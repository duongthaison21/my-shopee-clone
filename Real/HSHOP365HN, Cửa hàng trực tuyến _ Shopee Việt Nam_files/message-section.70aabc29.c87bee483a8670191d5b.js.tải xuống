/*! For license information please see message-section.70aabc29.c87bee483a8670191d5b.js.LICENSE */
(window.miniJsonp=window.miniJsonp||[]).push([[9],{"1h1e":function(e,t){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),s=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$"),o=0,a=1,i=2,c=3,u=4,l=5,d=6,p=7;function f(){}function h(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function A(e,t,n,r,s,f){for(var h,A=++t,g=o;;){var m=e.charAt(A);switch(m){case"=":if(g===a)h=e.slice(t,A),g=c;else{if(g!==i)throw new Error("attribute equal must after attrName");g=c}break;case"'":case'"':if(g===c||g===a){if(g===a&&(f.warning('attribute value must after "="'),h=e.slice(t,A)),t=A+1,!((A=e.indexOf(m,t))>0))throw new Error("attribute value no end '"+m+"' match");E=e.slice(t,A).replace(/&#?\w+;/g,s),n.add(h,E,t-1),g=l}else{if(g!=u)throw new Error('attribute value must after "="');E=e.slice(t,A).replace(/&#?\w+;/g,s),n.add(h,E,t),f.warning('attribute "'+h+'" missed start quot('+m+")!!"),t=A+1,g=l}break;case"/":switch(g){case o:n.setTagName(e.slice(t,A));case l:case d:case p:g=p,n.closed=!0;case u:case a:case i:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return f.error("unexpected end of input"),g==o&&n.setTagName(e.slice(t,A)),A;case">":switch(g){case o:n.setTagName(e.slice(t,A));case l:case d:case p:break;case u:case a:"/"===(E=e.slice(t,A)).slice(-1)&&(n.closed=!0,E=E.slice(0,-1));case i:g===i&&(E=h),g==u?(f.warning('attribute "'+E+'" missed quot(")!!'),n.add(h,E.replace(/&#?\w+;/g,s),t)):("http://www.w3.org/1999/xhtml"===r[""]&&E.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+E+'" missed value!! "'+E+'" instead!!'),n.add(E,E,t));break;case c:throw new Error("attribute value missed!!")}return A;case"Â€":m=" ";default:if(m<=" ")switch(g){case o:n.setTagName(e.slice(t,A)),g=d;break;case a:h=e.slice(t,A),g=i;break;case u:var E=e.slice(t,A).replace(/&#?\w+;/g,s);f.warning('attribute "'+E+'" missed quot(")!!'),n.add(h,E,t);case l:g=d}else switch(g){case i:n.tagName;"http://www.w3.org/1999/xhtml"===r[""]&&h.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+h+'" missed value!! "'+h+'" instead2!!'),n.add(h,h,t),t=A,g=a;break;case l:f.warning('attribute space is required"'+h+'"!!');case d:g=a,t=A;break;case c:g=u,t=A;break;case p:throw new Error("elements closed character '/' and '>' must be connected to")}}A++}}function g(e,t,n){for(var r=e.tagName,s=null,o=e.length;o--;){var a=e[o],i=a.qName,c=a.value;if((p=i.indexOf(":"))>0)var u=a.prefix=i.slice(0,p),l=i.slice(p+1),d="xmlns"===u&&l;else l=i,u=null,d="xmlns"===i&&"";a.localName=l,!1!==d&&(null==s&&(s={},v(n,n={})),n[d]=s[d]=c,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(d,c))}for(o=e.length;o--;){(u=(a=e[o]).prefix)&&("xml"===u&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(a.uri=n[u||""]))}var p;(p=r.indexOf(":"))>0?(u=e.prefix=r.slice(0,p),l=e.localName=r.slice(p+1)):(u=null,l=e.localName=r);var f=e.uri=n[u||""];if(t.startElement(f,l,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=s,!0;if(t.endElement(f,l,r),s)for(u in s)t.endPrefixMapping(u)}function m(e,t,n,r,s){if(/^(?:script|textarea)$/i.test(n)){var o=e.indexOf("</"+n+">",t),a=e.substring(t+1,o);if(/[&<]/.test(a))return/^script$/i.test(n)?(s.characters(a,0,a.length),o):(a=a.replace(/&#?\w+;/g,r),s.characters(a,0,a.length),o)}return t+1}function E(e,t,n,r){var s=r[n];return null==s&&((s=e.lastIndexOf("</"+n+">"))<t&&(s=e.lastIndexOf("</"+n)),r[n]=s),s<t}function v(e,t){for(var n in e)t[n]=e[n]}function b(e,t,n,r){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(s=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,s-t-4),s+3):(r.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var s=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,s-t-9),n.endCDATA(),s+3}var o=function(e,t){var n,r=[],s=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;s.lastIndex=t,s.exec(e);for(;n=s.exec(e);)if(r.push(n),n[1])return r}(e,t),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var i=o[1][0],c=a>3&&/^public$/i.test(o[2][0])&&o[3][0],u=a>4&&o[4][0],l=o[a-1];return n.startDTD(i,c&&c.replace(/^(['"])(.*?)\1$/,"$2"),u&&u.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),l.index+l[0].length}}return-1}function _(e,t,n){var r=e.indexOf("?>",t);if(r){var s=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(s){s[0].length;return n.processingInstruction(s[1],s[2]),r+2}return-1}return-1}function y(e){}function S(e,t){return e.__proto__=t,e}f.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),v(t,t={}),function(e,t,n,r,s){function o(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(s.error("entity not found:"+e),e)}function a(t){if(t>v){var n=e.substring(v,t).replace(/&#?\w+;/g,o);d&&i(v),r.characters(n,0,t-v),v=t}}function i(t,n){for(;t>=u&&(n=l.exec(e));)c=n.index,u=c+n[0].length,d.lineNumber++;d.columnNumber=t-c+1}var c=0,u=0,l=/.*(?:\r\n?|\n)|.*$/g,d=r.locator,p=[{currentNSMap:t}],f={},v=0;for(;;){try{var S=e.indexOf("<",v);if(S<0){if(!e.substr(v).match(/^\s*$/)){var x=r.doc,C=x.createTextNode(e.substr(v));x.appendChild(C),r.currentElement=C}return}switch(S>v&&a(S),e.charAt(S+1)){case"/":var O=e.indexOf(">",S+3),w=e.substring(S+2,O),I=p.pop();O<0?(w=e.substring(S+2).replace(/[\s<].*/,""),s.error("end tag name: "+w+" is not complete:"+I.tagName),O=S+1+w.length):w.match(/\s</)&&(w=w.replace(/[\s<].*/,""),s.error("end tag name: "+w+" maybe not complete"),O=S+1+w.length);var M=I.localNSMap,T=I.tagName==w;if(T||I.tagName&&I.tagName.toLowerCase()==w.toLowerCase()){if(r.endElement(I.uri,I.localName,w),M)for(var j in M)r.endPrefixMapping(j);T||s.fatalError("end tag name: "+w+" is not match the current start tagName:"+I.tagName)}else p.push(I);O++;break;case"?":d&&i(S),O=_(e,S,r);break;case"!":d&&i(S),O=b(e,S,r,s);break;default:d&&i(S);var B=new y,k=p[p.length-1].currentNSMap,R=(O=A(e,S,B,k,o,s),B.length);if(!B.closed&&E(e,O,B.tagName,f)&&(B.closed=!0,n.nbsp||s.warning("unclosed xml attribute")),d&&R){for(var N=h(d,{}),P=0;P<R;P++){var D=B[P];i(D.offset),D.locator=h(d,{})}r.locator=N,g(B,r,k)&&p.push(B),r.locator=d}else g(B,r,k)&&p.push(B);"http://www.w3.org/1999/xhtml"!==B.uri||B.closed?O++:O=m(e,O,B.tagName,o,r)}}catch(e){s.error("element parse error: "+e),O=-1}O>v?v=O:a(Math.max(S,v)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},y.prototype={setTagName:function(e){if(!s.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!s.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},S({},S.prototype)instanceof S||(S=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.XMLReader=f},Ao50:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.USS=void 0;var a=n("vDqi"),i=n("rPHV"),c=n("zDSj"),u=n("ibA+"),l=new Map([["jpg",u.ContentTypeHeader.image],["jpeg",u.ContentTypeHeader.image],["png",u.ContentTypeHeader.pngImage]]),d=function(){function e(e){this.queueMap=new Map,this.bucket=e.bucket,this.domain=e.domain,this.concurrency=e.concurrency||3,this.$=a.default.create({baseURL:e.uploadDomain+"/api/v2",headers:{Authorization:e.authorization}}),this.$.interceptors.response.use((function(e){return e}),(function(e){var t,n,r,s,o,c,l;return a.default.isCancel(e)?Promise.reject(new i.Error({code:u.ErrorCode.UserCancel,message:"User cancel."})):(null===(n=null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.data)||void 0===n?void 0:n.code)?Promise.reject(new i.Error({code:null===(s=null===(r=null==e?void 0:e.response)||void 0===r?void 0:r.data)||void 0===s?void 0:s.code,message:null===(c=null===(o=null==e?void 0:e.response)||void 0===o?void 0:o.data)||void 0===c?void 0:c.message,error:e,httpCode:null===(l=null==e?void 0:e.response)||void 0===l?void 0:l.status})):Promise.reject(e)})),this.sliceSize=e.sliceSize}return e.prototype.putObject=function(e){var t=e.file,n=e.contentType,a=e.cancelToken,l=e.onUploadProgress,d=e.autoPicType;return s(this,void 0,void 0,(function(){var e,p,f,h,A,g,m,E,v,b,_,y,S,x=this;return o(this,(function(C){switch(C.label){case 0:return e=d&&t.name.split(".").pop(),[4,c.getEtag(t)];case 1:if(p=C.sent(),f=i.createStorage(p),h=[],A=(f.get()||[]).reduce((function(e,t){return e.concat(e.find((function(e){return e.index===t.index}))?[]:[t])}),[]),g=t.size>this.sliceSize)for(m=function(e){var n=E.sliceSize*e,r=n+E.sliceSize,s=(r<=t.size?r:t.size)-n,o=t.slice(n,n+s);!!A.find((function(t){return t.index===e}))||h.push({index:e,slice:o,size:s})},E=this,v=0;v<t.size/this.sliceSize;v++)m(v);else h.push({index:0,slice:t,size:t.size});if(0!==h.length)return[3,5];C.label=2;case 2:return C.trys.push([2,,4,5]),[4,this.mergeObject(p,A,n,a,e)];case 3:return b=C.sent(),[2,r(r({},b),{url:this.getFileUrl(b.fid,n,e)})];case 4:return f.remove(),[7];case 5:return _=h.map((function(t){var i=t.slice,l=t.size,d=t.index;return function(){return s(x,void 0,void 0,(function(){var t,s=this;return o(this,(function(o){switch(o.label){case 0:return[4,c.getEtag(i)];case 1:return t=o.sent(),[2,this.$.post("/upload/"+this.bucket,i,{cancelToken:a.token,headers:{ETag:t,"Content-Type":g?u.ContentTypeHeader.slice:this.getContentTypeHeader(n,e)}}).then((function(t){var o=t.data.data;return{data:r(r({},o),{url:s.getFileUrl(o.fid,n,e)}),size:l,index:d}}))]}}))}))}})),y=new i.Queue(_,{concurrency:this.concurrency}),S=this.queueMap.get(a)||new Set,this.queueMap.set(a,S.add(y)),[2,new Promise((function(i,c){var u=0;y.setTaskFullfilledHandler((function(d){var h=d.data,g=d.size,m=d.index;return s(x,void 0,void 0,(function(){var s,d,E;return o(this,(function(o){switch(o.label){case 0:if(A.find((function(e){return e.index===m}))||A.push({index:m,size:g,fid:h.fid}),s=A.reduce((function(e,t){return e+t.size}),0),null==l||l({total:t.size,loaded:s,percent:parseFloat((s/t.size).toFixed(2))}),1===_.length)return i(r(r({},h),{url:this.getFileUrl(h.fid,n,e)})),[2];if(f.set(A),++u!==_.length)return[3,5];o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.mergeObject(p,A,n,a,e)];case 2:return d=o.sent(),i(r(r({},d),{url:this.getFileUrl(d.fid,n,e)})),[3,5];case 3:return E=o.sent(),c(E),[3,5];case 4:return f.remove(),[7];case 5:return[2]}}))}))})),y.setAllTaskFullfilledHandler((function(){var e=x.queueMap.get(a)||new Set;e.delete(y),x.queueMap.set(a,e)})),y.setTaskRejectedHandler((function(e){f.remove(),x.cancel(a),c(e)})),y.start()}))]}}))}))},e.prototype.cancel=function(e){var t=this.queueMap.get(e);null==t||t.forEach((function(e){return e.cancel()})),e.cancel()},e.prototype.resume=function(e){var t=this.queueMap.get(e);null==t||t.forEach((function(e){return e.resume()}))},e.prototype.getFileUrl=function(e,t,n){var r;switch(console.log("autoExt",n),t){case u.ContentType.video:r=u.FileExt.video;break;case u.ContentType.audio:r=u.FileExt.audio;break;default:r=l.has(n)?n:u.FileExt.image}return this.domain+"/"+this.bucket+"/"+e+"."+r},e.prototype.getContentTypeHeader=function(e,t){return console.log("header autoExt",t),t&&l.has(t)?l.get(t):u.ContentTypeHeader[e]},e.prototype.mergeObject=function(e,t,n,r,a){return s(this,void 0,void 0,(function(){var s,i;return o(this,(function(o){switch(o.label){case 0:return[4,this.$.post("/mergeFiles/"+this.bucket,{fids:t.map((function(e){return{index:e.index,fid:e.fid}}))},{headers:{ETag:e,"Content-Type":this.getContentTypeHeader(n,a)},cancelToken:r.token})];case 1:return s=o.sent(),i=s.data.data,[2,{url:this.getFileUrl(i.fid,n,a),etag:i.etag,fid:i.fid}]}}))}))},e}();t.USS=d},Bhkv:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n("s3hC"),o=n("YZgg"),a=function(){function e(e){this.allowReport=!0,this.enableResume=!0,this.getSignature=e.getSignature,void 0!==e.allowReport&&(this.allowReport=e.allowReport),void 0!==e.enableResume&&(this.enableResume=e.enableResume),this.appId=e.appId,this.reportId=e.reportId}return e.prototype.upload=function(e){var t=r({getSignature:this.getSignature,appId:this.appId,reportId:this.reportId,enableResume:this.enableResume},e),n=new s.default(t);return this.allowReport&&this.initReporter(n),n.start(),n},e.prototype.initReporter=function(e){new o.VodReporter(e)},e}();t.default=a},FRsH:function(e){e.exports=JSON.parse('{"name":"vod-js-sdk-v6","version":"1.4.12","description":"tencent cloud vod js sdk v6","main":"lib/src/tc_vod.js","unpkg":"dist/vod-js-sdk-v6.js","typings":"lib/src/tc_vod.d.ts","scripts":{"test":"cross-env NODE_ENV=test mocha -r espower-typescript/guess -r jsdom-global/register -r test/env test/**/*.test.ts","cover":"cross-env NODE_ENV=test nyc mocha -r espower-typescript/guess -r jsdom-global/register -r test/env test/**/*.test.ts","dev":"webpack --config webpack.dev.config.js --watch","dist":"webpack --config webpack.config.js","build":"npm run test && npm run dist && npm run compile","compile":"tsc -p tsconfig.json","prepublish":"npm run build","lint":"tsc --noEmit && eslint \'src/**/*.{js,ts,tsx}\' --quiet --fix"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/vod-js-sdk-v6.git"},"keywords":["tencentcloud","sdk","vod"],"author":"alsotang <alsotang@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/tencentyun/vod-js-sdk-v6/issues"},"homepage":"https://github.com/tencentyun/vod-js-sdk-v6#readme","dependencies":{"axios":"^0.21.1","cos-js-sdk-v5":"0.5.27","eventemitter3":"^4.0.7","js-sha1":"^0.6.0","uuid":"^3.3.2"},"devDependencies":{"@types/mocha":"^5.2.5","@types/semver":"^6.0.0","@types/sha1":"^1.1.1","@types/uuid":"^3.4.4","@typescript-eslint/eslint-plugin":"^1.9.0","@typescript-eslint/parser":"^1.9.0","cross-env":"^6.0.3","eslint":"^5.16.0","eslint-config-prettier":"^4.3.0","eslint-plugin-prettier":"^3.1.0","espower-typescript":"^9.0.1","jsdom":"^13.1.0","jsdom-global":"^3.0.2","mm":"^2.4.1","mocha":"^5.2.0","nyc":"^13.1.0","power-assert":"^1.6.1","prettier":"^1.17.1","semver":"^6.1.1","ts-loader":"^5.3.3","typescript":"^3.5.3","webpack":"^4.28.1","webpack-cli":"^3.2.1"},"nyc":{"extension":[".ts",".tsx"],"include":["src"],"reporter":["html"],"all":true}}')},HsjP:function(e,t,n){var r,s,o,a,i,c,u,l,d,p,f,h,A,g,m,E,v,b,_,y,S,x,C,O,w,I,M,T,j,B,k,R,N;window,e.exports=(r=n("q1tI"),s=n("tvxL"),o=n("XnKn"),a=n("5rFJ"),i=n("MQp2"),c=n("4j81"),u=n("/MKj"),l=n("6SzI"),d=n("Ogvq"),p=n("+xQE"),f=n("XzT5"),h=n("TSYQ"),A=n("p6iB"),g=n("e4V/"),m=n("i/3b"),E=n("pvLd"),v=n("JKOH"),b=n("FvWG"),_=n("ucpa"),y=n("0ike"),S=n("Wx0F"),x=n("C5SH"),C=n("s3ZY"),O=n("GqUL"),w=n("Iatj"),I=n("oeg4"),M=n("ZkkK"),T=n("vLVT"),j=n("lPiR"),B=n("b4o9"),k=n("Qf4c"),R=n("9rZX"),N=n("lQul"),function(e){function t(t){for(var n,o,a=t[0],i=t[1],u=t[3]||[],l=0,d=[];l<a.length;l++)o=a[l],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(c&&c(t),u.forEach((function(e){if(void 0===r[e]){r[e]=null;var t=document.createElement("link");s.nc&&t.setAttribute("nonce",s.nc),t.rel="prefetch",t.as="script",t.href=function(e){return s.p+""+({}[e]||e)+".js"}(e),document.head.appendChild(t)}}));d.length;)d.shift()()}var n={},r={2:0,0:0};function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var o=window.webpackJsonpseller_webchat_modules=window.webpackJsonpseller_webchat_modules||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var i=0;i<o.length;i++)t(o[i]);var c=a;return s(s.s=251)}([function(e,t){e.exports=r},function(e,t){e.exports=s},function(e,t){e.exports=o},function(e,t){e.exports=a},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){e.exports=n(124)},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=i},function(e,t){e.exports=c},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=u},function(e,t){e.exports=l},function(e,t,n){"use strict";n.r(t),n.d(t,"showMyRateCard",(function(){return _})),n.d(t,"showRateCard",(function(){return y})),n.d(t,"evaluationRequested",(function(){return S})),n.d(t,"watchEvaluation",(function(){return C})),n.d(t,"sendMessagesFailedByOffline",(function(){return P.e})),n.d(t,"resetMessagesFailedByOffline",(function(){return P.d})),n.d(t,"resendOfflineMessagesOnce",(function(){return P.b})),n.d(t,"resendOfflineMessagesOnceSucceed",(function(){return P.c})),n.d(t,"updateResendConversationMessage",(function(){return P.f})),n.d(t,"watchOffline",(function(){return P.g})),n.d(t,"resendMessageRequested",(function(){return c.a})),n.d(t,"watchResend",(function(){return c.b})),n.d(t,"sendMessagesRequested",(function(){return i.h})),n.d(t,"sendMessagesSucceeded",(function(){return i.i})),n.d(t,"sendingMessages",(function(){return i.l})),n.d(t,"sendMessagesToPending",(function(){return i.j})),n.d(t,"sendMessagesFailed",(function(){return i.g})),n.d(t,"abortAllSendingMessages",(function(){return i.a})),n.d(t,"cancelSendingMessageRequested",(function(){return i.b})),n.d(t,"cancelSendingMessageSucceeded",(function(){return i.c})),n.d(t,"sendVideoMessageRequested",(function(){return i.k})),n.d(t,"handleSendSucceededMessages",(function(){return i.e})),n.d(t,"sendMessages",(function(){return i.f})),n.d(t,"watchSendWithCancel",(function(){return i.n})),n.d(t,"watchSend",(function(){return i.m})),n.d(t,"populateMessageRequested",(function(){return B})),n.d(t,"getPopulateContent",(function(){return k})),n.d(t,"watchPopulate",(function(){return N})),n.d(t,"fetchMessagesRequested",(function(){return a.c})),n.d(t,"fetchMessagesSucceeded",(function(){return a.f})),n.d(t,"updateFetchMessagesRequestedStatus",(function(){return a.g})),n.d(t,"updatePreloadedMessages",(function(){return a.h})),n.d(t,"deletePreloadedMessages",(function(){return a.b})),n.d(t,"fetchMessagesRequestedWithPreloadSaga",(function(){return a.e})),n.d(t,"fetchMessagesRequestedSaga",(function(){return a.d})),n.d(t,"watchFetchMessage",(function(){return a.i})),n.d(t,"receiveMessageRequested",(function(){return ye})),n.d(t,"receiveMessageSucceeded",(function(){return Se})),n.d(t,"resetNewConversationQueue",(function(){return xe})),n.d(t,"resetOldConversationQueue",(function(){return Ce})),n.d(t,"resetConversationQueue",(function(){return Oe})),n.d(t,"handleNewConversationMessageQueue",(function(){return ke})),n.d(t,"watchNewConversationMessageQueue",(function(){return Re})),n.d(t,"watchOldConversationMessageQueue",(function(){return Ne})),n.d(t,"handleCurrentConversationChange",(function(){return De})),n.d(t,"watchReceive",(function(){return Ue})),n.d(t,"translateMessagesRequested",(function(){return l.d})),n.d(t,"changeTranslateStatus",(function(){return l.a})),n.d(t,"showTranslateFeedback",(function(){return l.c})),n.d(t,"sendTranslateFeedback",(function(){return l.b})),n.d(t,"watchTranslate",(function(){return l.e})),n.d(t,"replaceHttpLinkWithHttps",(function(){return W.c})),n.d(t,"updateVideoInfo",(function(){return W.d})),n.d(t,"deleteVideoInfo",(function(){return W.b})),n.d(t,"uploadMonitor",(function(){return W.e})),n.d(t,"uploadVideoGetToken",(function(){return W.h})),n.d(t,"uploadVideGetResult",(function(){return W.f})),n.d(t,"uploadVideo",(function(){return W.g})),n.d(t,"fetchFaqMessagesRequested",(function(){return Z})),n.d(t,"fetchFaqMessagesSucceeded",(function(){return $})),n.d(t,"updateFetchFaqMessagesRequestedStatus",(function(){return ee})),n.d(t,"updateCurrentFaqId",(function(){return te})),n.d(t,"showFaqHistoryModal",(function(){return ne})),n.d(t,"watchFaqHistorySagas",(function(){return oe})),n.d(t,"setReplyToMessage",(function(){return Le.i})),n.d(t,"resetReplyToMessage",(function(){return Le.c})),n.d(t,"scrollToMessage",(function(){return Le.e})),n.d(t,"setScrollToMessageId",(function(){return Le.j})),n.d(t,"resetScrollToMessageId",(function(){return Le.d})),n.d(t,"setInScrollToMessage",(function(){return Le.h})),n.d(t,"setCurrentConversationReplyToMessage",(function(){return Le.g})),n.d(t,"resetCurrentConversationReplyToMessage",(function(){return Le.b})),n.d(t,"scrollToMessageSaga",(function(){return Le.f})),n.d(t,"watchReplySaga",(function(){return Le.k})),n.d(t,"deleteMessageRequested",(function(){return He.b})),n.d(t,"deleteMessagePostRequested",(function(){return He.a})),n.d(t,"watchDeleteMessage",(function(){return He.c})),n.d(t,"handleSensitiveUrl",(function(){return F})),n.d(t,"deleteConversationMessageHash",(function(){return u.b})),n.d(t,"messageSyncUpdate",(function(){return Xe})),n.d(t,"setEntryPoint",(function(){return tt})),n.d(t,"sagas",(function(){return ot})),n.d(t,"reducerMap",(function(){return at}));var r=n(4),s=n.n(r),o=n(11),a=n(43),i=n(37),c=n(68),u=n(73),l=n(96),d=n(5),p=n.n(d),f=n(3),h=n(2),A=n(1),g=n(18),m=p.a.mark(_),E=p.a.mark(y),v=p.a.mark(x),b=p.a.mark(C);function _(e,t){var n;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(f.select)(Object(A.rateCardSelector)(e));case 3:if((n=r.sent)&&"failed"!==n.fetchStatus&&n.status!==h.EvaluationStatus.UNRATED){r.next=8;break}return r.next=7,Object(f.call)(A.fetch,{parent:"rating_cards",parentId:e,resource:"get",params:t});case 7:n=r.sent;case 8:return r.abrupt("return",n);case 11:return r.prev=11,r.t0=r.catch(0),r.abrupt("return",{id:e,status:"",fetchStatus:"failed"});case 14:case"end":return r.stop()}}),m,null,[[0,11]])}function y(e){var t,n,r,s,o,a,i,c,u;return p.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.ids,n=e.shopId,r=Array.isArray(t)?t:[t],s={},"0"!==n&&(s.shop_id=n),l.next=6,Object(f.select)(A.isSubAccountSelector);case 6:return o=l.sent,l.next=9,Object(f.select)(A.currentUserShopIdSelector);case 9:if(l.sent===parseInt(n)||o){l.next=19;break}return a=[],r.forEach((function(e){return a.push(Object(f.call)(_,e,s))})),l.next=15,Object(f.all)(a);case 15:return i=l.sent,l.abrupt("return",i);case 19:return l.prev=19,c="rating_cards",s.ids="[".concat(r.join(","),"]"),l.next=24,Object(f.call)(A.fetch,{resource:c,params:s});case 24:return u=l.sent,l.abrupt("return",u[c]||[]);case 28:return l.prev=28,l.t0=l.catch(19),l.abrupt("return",[]);case 31:case"end":return l.stop()}}),E,null,[[19,28]])}var S=Object(o.createActions)(s()({},g.a.EVALUATION_REQUESTED,(function(e){var t=e.id,n=e.shopId,r=e.grade,s=e.reason;return{id:t,shopId:n,grade:r,reason:void 0===s?[]:s}}))).evaluationRequested;function x(e){var t,n,r,s,o,a,i,c;return p.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,n=t.id,r=t.shopId,s=t.grade,o=t.reason,u.prev=1,a={grade:s,reason:o},r&&(a.shop_id=r),u.next=6,Object(f.call)(A.fetch,{method:"PUT",parent:"rating_cards",parentId:n,resource:"evaluate",payload:JSON.stringify(a)});case 6:return u.next=8,Object(f.put)(Object(A.updateRecord)({name:"rateCards",id:n,record:{grade:s,status:h.EvaluationStatus.RATED}}));case 8:u.next=18;break;case 10:return u.prev=10,u.t0=u.catch(1),i=Date.now(),u.t0.message&&u.t0.message.error_code&&((c=u.t0.message.error_code)===h.EvaluationErrorCode.RATED&&(i=h.EvaluationStatus.RATED),c===h.EvaluationErrorCode.EXPIRED&&(i=h.EvaluationStatus.EXPIRED)),u.next=16,Object(f.put)(Object(A.updateRecord)({name:"rateCards",id:n,record:{status:i}}));case 16:return u.next=18,Object(f.call)(A.setToastInformationSaga,Object(A.setToastInformation)({error:u.t0}));case 18:case"end":return u.stop()}}),v,null,[[1,10]])}function C(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.takeLatest)(S,x);case 2:case"end":return e.stop()}}),b)}var O=n(29);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=p.a.mark(k),T=p.a.mark(R),j=p.a.mark(N),B=Object(o.createActions)(s()({},g.a.POPULATE_MESSAGE_REQUESTED,(function(e){return{message:e.message}}))).populateMessageRequested;function k(e,t){var n,r,s,o,a,i,c,u;return p.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:s=(r=t).id,o=r.shopId,a=r.creatorId,i=r.cartItems,c=r.faqMessageIds,l.t0=e,l.next="product"===l.t0?4:"order"===l.t0?8:"offer"===l.t0?12:"shop"===l.t0?16:"shops"===l.t0?20:l.t0===h.MessageTypes.MSG_TYPE_RATE_CARDS?24:l.t0===h.MessageTypes.MSG_TYPE_VOUCHER_WEB?28:l.t0===h.MessageTypes.MSG_TYPE_FEED_STORY?32:l.t0===h.MessageTypes.MSG_TYPE_VOUCHER?36:l.t0===h.MessageTypes.MSG_TYPE_SHOPPING_CART?41:l.t0===h.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER?45:l.t0===h.MessageTypes.MSG_TYPE_BUNDLE_MESSAGE?49:53;break;case 4:return l.next=6,Object(f.call)(A.showProduct,{payload:{productId:s,shopId:o}});case 6:return n=l.sent,l.abrupt("break",54);case 8:return l.next=10,Object(f.call)(A.showOrder,{payload:{orderId:s,shopId:o}});case 10:return n=l.sent,l.abrupt("break",54);case 12:return l.next=14,Object(f.call)(A.showOffer,{payload:{offerId:s,shopId:o}});case 14:return n=l.sent,l.abrupt("break",54);case 16:return l.next=18,Object(f.call)(A.showShop,{payload:{shopId:o}});case 18:return n=l.sent,l.abrupt("break",54);case 20:return l.next=22,Object(f.call)(A.showShop,{payload:{shopId:t}});case 22:return n=l.sent,l.abrupt("break",54);case 24:return l.next=26,Object(f.call)(y,{shopId:o,ids:s});case 26:return n=l.sent,l.abrupt("break",54);case 28:return l.next=30,Object(f.call)(A.showVoucher,{shopId:o,ids:s});case 30:return n=l.sent,l.abrupt("break",54);case 32:return l.next=34,Object(f.call)(A.showFeedStory,{payload:{id:s,creatorId:a}});case 34:return n=l.sent,l.abrupt("break",54);case 36:return l.next=38,Object(f.call)(A.showVoucher,{shopId:o,ids:Array.isArray(s)?s:[s]});case 38:return u=l.sent,n=u[0],l.abrupt("break",54);case 41:return l.next=43,Object(f.call)(A.showCartReminder,{id:s,cartItems:i});case 43:return n=l.sent,l.abrupt("break",54);case 45:return l.next=47,Object(f.call)(A.showUnrateOrder,{payload:{orderId:s,shopId:o}});case 47:return n=l.sent,l.abrupt("break",54);case 49:return l.next=51,Object(f.call)(A.showFaqHistory,{payload:{ids:c.slice(0,3),id:s}});case 51:return n=l.sent,l.abrupt("break",54);case 53:n={};case 54:return l.abrupt("return",{type:e,content:n});case 55:case"end":return l.stop()}}),M)}function R(e){var t,n,r;return p.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.message,s.next=3,Object(f.put)(Object(A.updateRecord)({name:"messages",id:t.id,record:{fetchStatus:""}}));case 3:return s.next=5,Object(f.select)(A.isSubAccountSelector);case 5:return n=s.sent,s.next=8,Object(f.select)(A.currentUserShopIdSelector);case 8:return r=s.sent,s.next=11,Object(f.call)(O.f,[t],r,n);case 11:return s.next=13,Object(f.put)(Object(A.updateRecord)({name:"messages",id:t.id,record:I({},t)}));case 13:case"end":return s.stop()}}),T)}function N(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.takeEvery)(B,R);case 2:case"end":return e.stop()}}),j)}var P=n(69),D=n(27),U=p.a.mark(L),q=p.a.mark(H),F=Object(o.createActions)(s()({},g.a.HANDLE_SENSITIVE_URL,(function(e){return{href:e.href}}))).handleSensitiveUrl;function L(e){var t;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.href,n.next=3,Object(f.put)(Object(A.showModal)({type:"CONFIRM_MODAL",title:{key:"common.navigation.cofirm_titile"},actions:{cancel:{label:{key:"common.cancel"},handler:function(){D.store.dispatch(Object(A.closeModal)())}},confirm:{label:{key:"common.navigation.confirm"},handler:function(){D.store.dispatch(Object(A.closeModal)());var e=window.open();e.opener=null,e.location=t}}},additions:{content:{key:"common.navigation.cofirm_content"},modalStyle:{width:"352px"},contentStyle:{paddingTop:"8px",paddingBottom:"13px"}}}));case 3:case"end":return n.stop()}}),U)}function H(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.takeEvery)(F,L);case 2:case"end":return e.stop()}}),q)}var G,z,W=n(38),Y=n(71);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=p.a.mark(se),J=p.a.mark(oe),K=Object(o.createActions)((G={},s()(G,g.a.FETCH_FAQ_MESSAGES_REQUESTED,(function(e){var t=e.sourceId,n=e.shopId,r=e.reset;return{sourceId:t,shopId:n,reset:void 0!==r&&r}})),s()(G,g.a.FETCH_FAQ_MESSAGES_SUCCEEDED,(function(e){var t=e.messageIds,n=e.sourceId,r=e.faqHistoryStatus,s=e.offset,o=e.hasMore;return{messageIds:t,sourceId:n,faqHistoryStatus:r,offset:s,hasMore:void 0===o||o}})),s()(G,g.a.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS,(function(e){return{status:e.status}})),s()(G,g.a.UPDATE_CURRENT_FAQ_ID,(function(e){return{id:e.id}})),s()(G,g.a.SHOW_FAQ_HISTORY_MODAL,(function(e){return{sourceId:e.sourceId,shopId:e.shopId}})),G)),Z=K.fetchFaqMessagesRequested,$=K.fetchFaqMessagesSucceeded,ee=K.updateFetchFaqMessagesRequestedStatus,te=K.updateCurrentFaqId,ne=K.showFaqHistoryModal,re=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;return new Promise((function(s,o){Object(A.fetch)({parent:"conversation",resource:"bundle_message",params:{shop_id:t,offset:n,limit:r,source_id:e}}).then((function(e){var t=e.bundle_message,n=e.total;Object(Y.a)(t),s({messages:t,total:n})})).catch((function(e){o(e)}))}))};function se(e){var t,n,r,s,o,a,i,c,u,l,d,g,m,E,v,b,_;return p.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,n=t.sourceId,r=t.shopId,s=t.reset,p.prev=1,p.next=4,Object(f.put)(te({id:n}));case 4:return p.next=6,Object(f.select)(A.currentFaqHistorySeletor);case 6:if(o=p.sent,a=o.offset,i=void 0===a?0:a,!(void 0!==(c=o.hasMore)&&!c||s&&i)){p.next=13;break}return p.abrupt("return",null);case 13:return p.next=15,Object(f.select)(A.isSubAccountSelector);case 15:return u=p.sent,p.next=18,Object(f.select)(A.currentUserShopIdSelector);case 18:return l=p.sent,p.next=21,Object(f.put)(ee({status:s?h.DataFetchStatus.INIT_PENDING:h.DataFetchStatus.PENDING}));case 21:return p.next=23,re(n,r,i);case 23:return d=p.sent,g=d.messages,m=d.total,E=i+g.length,g.sort((function(e,t){return Object(O.a)(e.id,t.id)})),g=g.filter((function(e){return"webview"!==e.type})),v=Object(A.normalize)("messages",g),b=v.result,_=v.entities,p.next=32,Object(f.put)(Object(A.updateEntities)({entities:_}));case 32:return p.next=34,Object(f.call)(O.f,g,l,u);case 34:return p.next=36,Object(f.put)($({sourceId:n,offset:E,hasMore:E<m,faqHistoryStatus:h.DataFetchStatus.SUCCEED,messageIds:b}));case 36:p.next=42;break;case 38:return p.prev=38,p.t0=p.catch(1),p.next=42,Object(f.put)(ee({status:s?h.DataFetchStatus.INIT_FAILED:h.DataFetchStatus.FAILED}));case 42:case"end":return p.stop()}}),Q,null,[[1,38]])}function oe(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.takeEvery)(Z,se);case 2:case"end":return e.stop()}}),J)}var ae=(z={},s()(z,g.a.FETCH_FAQ_MESSAGES_SUCCEEDED,(function(e,t){var n=t.payload,r=n.messageIds,o=n.sourceId,a=n.faqHistoryStatus,i=n.offset,c=n.hasMore,u=e.faqHistoryHash,l=(u[o]||{all:[]}).all,d=Array.from(new Set(l.concat(r)));return X(X({},e),{},{faqHistoryHash:X(X({},u),{},s()({},o,{all:d,offset:i,hasMore:c})),faqHistoryStatus:a})})),s()(z,g.a.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS,(function(e,t){var n=t.payload.status;return X(X({},e),{},{faqHistoryStatus:n})})),s()(z,g.a.UPDATE_CURRENT_FAQ_ID,(function(e,t){var n=t.payload.id;return X(X({},e),{},{faqId:n})})),z);function ie(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ue=p.a.mark(je),le=p.a.mark(Be),de=p.a.mark(ke),pe=p.a.mark(Re),fe=p.a.mark(Ne),he=p.a.mark(De),Ae=p.a.mark(Ue);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee,ve=h.MessageTypes.MSG_TYPE_OFFER,be=h.MessageTypes.MSG_TYPE_VIDEO,_e=Object(o.createActions)({RECEIVE_MESSAGE_REQUESTED:function(e){return{message:e.message}},RECEIVE_MESSAGE_SUCCEEDED:function(e){return{conversationId:e.conversationId,message:e.message}},RESET_NEW_CONVERSATION_QUEUE:function(){return{}},RESET_OLD_CONVERSATION_QUEUE:function(){return{}},RESET_CONVERSATION_QUEUE:function(){return{}}}),ye=_e.receiveMessageRequested,Se=_e.receiveMessageSucceeded,xe=_e.resetNewConversationQueue,Ce=_e.resetOldConversationQueue,Oe=_e.resetConversationQueue,we=2e3,Ie=2e3,Me=[],Te=[];function je(e){var t,n,r,s,o,a,i,c;return p.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.content,e.from_id,e.send_by_yourself,n=e.conversation_id,s=(r=t||{}).offer_id,o=r.model_id,r.shop_id,a=r.product_id,i=[],c={},u.next=6,Object(f.select)(Object(A.relatedOfferIdsSelector)(n,o,s,a));case 6:return u.sent.forEach((function(e){var t=e.id;c[t]=me(me({},e),{},{status:h.OfferStatus.CANCELLED})})),i.push(Object(f.put)(Object(A.batchUpdateRecord)({name:"offers",records:c}))),u.next=11,Object(f.all)(i);case 11:case"end":return u.stop()}}),ue)}function Be(e){var t,n,r,s,o,a,c,u,l,d,h,g,m,E,v,b,_,y,S,x,C,w,I,M,T,j,B,k,R,N,P,D,U,q,F,L;return p.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload.message,n=t.id,r=t.type,s=t.request_id,t.from_shop_id,t.to_shop_id,o=t.conversation_id,a=t.send_by_yourself,c=t.content,u=t.created_at,Y.b.includes(r)&&Object(Y.a)(t),p.next=5,Object(f.select)(A.isSubAccountSelector);case 5:return l=p.sent,p.next=8,Object(f.select)((function(e){return e.conversationReducer}));case 8:return d=p.sent,h=d.conversationIdsMap,g=d.currentConversationId,m=d.currentConversationCanRead,p.next=14,Object(f.select)(Object(A.getConversation)(o));case 14:if(E=p.sent,v=E.id&&E.faking,h&&h[o.toString()]||v){p.next=21;break}Me.push(t),p.next=111;break;case 21:if(r!==ve){p.next=25;break}return p.next=25,Object(f.call)(je,t);case 25:if(b=g===o,_=Object(O.b)(t,{updateMaxGeneralOptionHideTime:a}),y=Object(O.c)(t),!b){p.next=110;break}if(!a){p.next=78;break}return p.next=32,Object(f.select)(A.messagesWithSourceSelector);case 32:S=p.sent,x=!1,C=!1,w=!1,I=ie(S),p.prev=37,I.s();case 39:if((M=I.n()).done){p.next=49;break}if(T=M.value,j=T.id,B=T.retryRequestId,C=j===s,w=B===s,!((x=j===n)||C||w)){p.next=47;break}return p.abrupt("break",49);case 47:p.next=39;break;case 49:p.next=54;break;case 51:p.prev=51,p.t0=p.catch(37),I.e(p.t0);case 54:return p.prev=54,I.f(),p.finish(54);case 57:if(x){p.next=76;break}if(!C&&!w){p.next=63;break}return p.next=61,Object(f.call)(i.e,[t],o);case 61:p.next=76;break;case 63:return p.next=65,Object(f.select)(A.currentUserSelector)||{};case 65:return k=p.sent,R=k.shop_id,p.next=69,Object(f.call)(O.f,[t],R,l,!0);case 69:return N=Object(A.normalize)("messages",t),p.next=72,Object(f.put)(Object(A.updateEntities)({entities:N.entities}));case 72:return p.next=74,Object(f.put)(Object(A.updateRecord)({name:"conversations",id:o,record:me(me({latest_message_id:n,latest_message_type:r,latest_message_content:c,last_message_time:u},_),y)}));case 74:return p.next=76,Object(f.put)(Se({conversationId:o,message:t}));case 76:p.next=102;break;case 78:if(r!==be){p.next=81;break}return p.next=81,Object(f.put)(Object(W.d)({id:s,info:{shouldPreload:!0}}));case 81:return p.next=83,Object(f.select)(A.currentUserSelector)||{};case 83:return P=p.sent,D=P.shop_id,p.next=87,Object(f.select)(A.currentConversationSelector);case 87:return U=p.sent,p.next=90,Object(f.call)(O.f,[t],D,l,!0);case 90:return q=Object(A.normalize)("messages",t),p.next=93,Object(f.put)(Object(A.updateEntities)({entities:q.entities}));case 93:if(F=U.unread_count,L=m?F:F+1,0!==F||m){p.next=98;break}return p.next=98,Object(f.spawn)(A.handleUnreadCountChangeAction,Object(A.updateUnreadCount)({type:A.unreadCountActions.RECEIVE_UNREADABLE_MESSAGE,conversation:U}));case 98:return p.next=100,Object(f.put)(Object(A.updateRecord)({name:"conversations",id:o,record:me(me({latest_message_id:n,latest_message_type:r,latest_message_content:c,last_message_time:u,unread_count:L},_),y)}));case 100:return p.next=102,Object(f.put)(Se({conversationId:o,message:t}));case 102:if(!v){p.next=105;break}return p.next=105,Object(f.call)(A.fetchConversationsRequestedSaga,Object(A.fetchConversationsRequested)({direction:"latest"}));case 105:if(a||!m){p.next=108;break}return p.next=108,Object(f.call)(A.markMessagesRequestedSaga,Object(A.markMessagesRequested)({conversationId:o,isRead:!0,latestMessageId:n,shopId:E.shop_id}));case 108:p.next=111;break;case 110:Te.push(t);case 111:case"end":return p.stop()}}),le,null,[[37,51,54,57]])}function ke(){var e,t,n,r,s,o,a,i=arguments;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=i.length>0&&void 0!==i[0]&&i[0],!(t=Me.length)){c.next=19;break}return c.next=5,Object(f.select)(A.isSubAccountSelector);case 5:return n=c.sent,r=Me.splice(0,t).sort((function(e,t){return e.created_timestamp-t.created_timestamp})),c.next=9,Object(f.select)((function(e){return e.conversationReducer}));case 9:if(s=c.sent,o=s.maxLatestTimestampNano,a=s.maxLatestReceivedMessageId,!(n?Object(h.greaterThan)(r[0].id,a):o<=r[0].created_timestamp*Math.pow(10,9))){c.next=19;break}return c.next=16,Object(f.call)(A.fetchConversationsRequestedSaga,Object(A.fetchConversationsRequested)({direction:"latest"}));case 16:if(!e){c.next=19;break}return c.next=19,Object(f.spawn)(A.handleUnreadCountChangeAction,Object(A.updateUnreadCount)({type:A.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT}));case 19:case"end":return c.stop()}}),de)}function Re(){var e,t;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(f.delay)(we);case 3:if(e=Me.length){n.next=8;break}we=8e3===we?we:2*we,n.next=20;break;case 8:if(we=2e3,t=Me[e-1].id,Ee===t){n.next=14;break}return Ee=t,n.next=14,Object(f.spawn)(A.handleUnreadCountChangeAction,Object(A.updateUnreadCount)({type:A.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT}));case 14:return n.next=16,Object(f.select)(A.showChatWindowSelector);case 16:if(!n.sent){n.next=20;break}return n.next=20,Object(f.call)(ke,!0);case 20:n.next=0;break;case 22:case"end":return n.stop()}}),pe)}function Ne(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(f.delay)(Ie);case 3:if(e=Te.length){t.next=8;break}Ie=8e3===Ie?Ie:2*Ie,t.next=9;break;case 8:return t.delegateYield(p.a.mark((function t(){var n,r,s,o,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.put)(Object(A.updateFetchConversationsDirection)({direction:"latest"}));case 2:return n=Te.splice(0,e),Ie=2e3,r=Array.from(new Set(n.map((function(e){return e.conversation_id})))),t.next=7,Object(f.select)(Object(A.getConversations)(r));case 7:return s=t.sent,o={},a=0,n.forEach((function(e){var t=e.id,n=e.type,r=e.content,i=e.created_at,c=e.conversation_id,u=e.send_by_yourself,l=Object(O.b)(e,{updateMaxGeneralOptionHideTime:u}),d=Object(O.c)(e),p=me(me({latest_message_id:t,latest_message_type:n,latest_message_content:r,last_message_time:i},l),d),f=o[c];if(f)t>f.latest_message_id?o[c]=me(me(me({},f),p),{},{unread_count:u?f.unread_count:f.unread_count+1}):o[c]=me(me({},f),{},{unread_count:u?f.unread_count:f.unread_count+1});else{var h=s.find((function(e){return e.id===c}))||{},A=h.unread_count,g=void 0===A?0:A;h.shop_id,o[c]=me(me({},p),{},{unread_count:u?g:g+1}),u||0!==g||(a+=1)}})),t.next=13,Object(f.put)(Object(A.batchUpdateRecord)({name:"conversations",records:o,checkProp:"latest_message_id"}));case 13:return t.next=15,Object(f.spawn)(A.handleUnreadCountChangeAction,Object(A.updateUnreadCount)({type:A.unreadCountActions.MESSAGE_QUEUE_UPDATE,messageQueueUpdate:{totalIncrease:a}}));case 15:case"end":return t.stop()}}),t)}))(),"t0",9);case 9:t.next=0;break;case 11:case"end":return t.stop()}}),fe)}function Pe(){var e=Me.length,t=Te.length;e&&Me.splice(0,e),t&&Te.splice(0,t)}function De(e){var t,n,r,s,o,a,i,c,u,l,d;return p.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(!(t=Te.filter((function(t){return t.conversation_id===e}))).length){p.next=12;break}return t.forEach((function(e){var t=Te.findIndex((function(t){return t.id===e.id}));Te.splice(t,1)})),n=t.sort((function(e,t){return t.latest_message_id-e.latest_message_id})),r=n[0],s=r.id,o=r.type,a=r.content,i=r.created_at,c=r.send_by_yourself,u=Object(O.b)(r,{updateMaxGeneralOptionHideTime:c}),l=Object(O.c)(r),d=me(me({latest_message_id:s,latest_message_type:o,latest_message_content:a,last_message_time:i},u),l),p.next=11,Object(f.put)(Object(A.updateRecord)({name:"conversations",id:e,record:d}));case 11:return p.abrupt("return",s);case 12:return p.abrupt("return",null);case 13:case"end":return p.stop()}}),he)}function Ue(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.takeEvery)(ye,Be);case 2:return e.next=4,Object(f.takeEvery)(Oe,Pe);case 4:case"end":return e.stop()}}),Ae)}var qe,Fe=s()({},Se,(function(e,t){var n,r=t.payload,o=r.conversationId,a=r.message,i=a.id,c=a.request_id,u=e.messageIdsHash,l=u[o]||{},d=l.all||[],p=l.sending||[];return n=d.includes(i)?d:[i].concat(d).filter((function(e){return e!==c})),me(me({},e),{},{messageIdsHash:me(me({},u),{},s()({},o,me(me({},l),{},{all:n,sending:p.filter((function(e){return!p.includes(c)}))})))})})),Le=n(89),He=n(97);function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var We=p.a.mark(Je),Ye=p.a.mark(Ke),Ve=Object(o.createActions)((qe={},s()(qe,g.a.MESSAGE_SYNC_UPDATE,(function(e){return{conversation:e.conversation}})),s()(qe,g.a.MESSAGE_UPDATE_TIME_NOW,(function(e){return{conversationId:e.conversationId,timeNow:e.timeNow}})),qe)),Xe=Ve.messageSyncUpdate,Qe=Ve.messageUpdateTimeNow;function Je(e){var t,n,r,s,o,i,c,u,l,d,h,g,m,E,v,b,_,y,S;return p.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload.conversation,n=t.id,r=t.shop_id,p.next=4,Object(f.select)(Object(A.messageUpdateTimeNowSelector)(n));case 4:return s=p.sent,p.prev=5,p.next=8,Object(f.select)(A.messageIdsHashSelector);case 8:if(i=p.sent,c=i[n]||{},0!==(void 0===(u=c.all)?[]:u).length){p.next=13;break}return p.abrupt("return");case 13:return p.next=15,Object(f.call)(A.fetch,{subServer:"coreapi",parent:"conversation",resource:"updated_message_list",params:{conversation_id:n,shop_id:r,last_update_time:s||"0"}});case 15:if(l=p.sent,d=l.messages,h=void 0===d?[]:d,g=l.page_result,h.sort((function(e,t){return t.id-e.id})),!(h.length>0)){p.next=22;break}return m=Object(A.normalize)("messages",h),E=m.entities,p.next=22,Object(f.put)(Object(A.updateEntities)({entities:E}));case 22:if(v=c.oldestMessageId,b=null===(o=h[0])||void 0===o?void 0:o.id,y=(_=g||{}).has_more,!(S=_.next_last_update_time)){p.next=28;break}return p.next=28,Object(f.put)(Qe({conversationId:n,timeNow:S}));case 28:if(!(y&&v<b)){p.next=31;break}return p.next=31,Object(f.call)(Je,{payload:{conversation:t}});case 31:p.next=40;break;case 33:if(p.prev=33,p.t0=p.catch(5),!(p.t0 instanceof A.CustomError)){p.next=40;break}return p.next=38,Object(f.put)(Qe({conversationId:n,timeNow:"0"}));case 38:return p.next=40,Object(f.put)(Object(a.c)({conversation:t,reset:!0}));case 40:case"end":return p.stop()}}),We,null,[[5,33]])}function Ke(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.takeEvery)(Xe,Je);case 2:case"end":return e.stop()}}),Ye)}var Ze=s()({},g.a.MESSAGE_UPDATE_TIME_NOW,(function(e,t){var n=t.payload,r=n.conversationId,o=n.timeNow,a=e.messageUpdateTimeMap;return ze(ze({},e),{},{messageUpdateTimeMap:ze(ze({},a),{},s()({},r,o))})}));function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt=Object(o.createActions)(s()({},g.a.SET_ENTRY_POINT,(function(e){return{type:e.type,conversationId:e.conversationId}}))).setEntryPoint,nt=s()({},g.a.SET_ENTRY_POINT,(function(e,t){var n=t.payload;return et(et({},e),{},{entryPoint:n})}));function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ot=[a.i,i.m,c.b,Ue,H,l.e,N,P.g,C,i.n,oe,Ne,Re,Le.k,He.c,Ke],at={messageReducer:Object(o.handleActions)(st(st(st(st(st(st(st(st(st(st({},a.a),i.d),Fe),u.a),P.a),W.a),ae),nt),Le.a),Ze),{status:"pendingInit",messageIdsHash:{},videoMap:{1234:{percentage:"10",size:"1300"}},offlineMessages:{},entryPoint:{},faqHistoryHash:{},faqId:null,faqHistoryStatus:"",reply:{toMessageId:{},inScrollToMessage:!1,scrollToMessageId:""},messageUpdateTimeMap:{}})}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(79);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(80).default,s=n(6);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(13),s=n.n(r),o=n(14),a=n.n(o),i=n(6),c=n.n(i),u=n(15),l=n.n(u),d=n(16),p=n.n(d),f=n(9),h=n.n(f),A=n(0),g=n.n(A),m=n(1),E=n(8),v=n(2),b=n(184),_=n(185),y=n(99),S=g.a.memo((function(e){var t,n,r,s,o=e.content,a=void 0===o?{}:o,i=e.comingShopContent,c=void 0===i?{}:i,u=e.sendStatus,l=e.isSendByMe,d=e.isSubAccount,p=e.isScChat,f=e.isFaking,h=e.messageId,A=e.conversationId,m=a.id,E=a.image,b=a.name,_=a.original_price,S=a.actual_price,x=a.stock,C=a.status,O=a.shop_id;d?(n=c&&c.content?c.content:null)&&(t=n.id,s="https://".concat(Object(v.getMallUrl)(n.country),"/product/").concat(O,"/").concat(m,"/")):(r="https://".concat(Object(v.getSellerCenterUrl)(),"/portal/product/").concat(m),s="https://".concat(Object(v.getMallUrl)(),"/product/").concat(O,"/").concat(m));var w={isSubAccount:d,originalPrice:_,status:C,stock:x,scProductLink:r,mallProductLink:s,shopId:t,itemId:m,sendStatus:u,isSendByMe:l,isScChat:p,isFaking:f,messageId:h,conversationId:A};return g.a.createElement(y.a,{id:m,category:"source",type:"product",image:E,name:b,price:S,extraProps:w})}));S.displayName="ProductMessageSource";var x=S,C=g.a.memo((function(e){var t=e.message,n=e.timeFlag,r=e.isSubAccount,s=e.isScChat,o=e.shopId,a=e.isSend,i=e.region,c=e.handleReload,u=t.isFaking,l=t.source_type,d=t.sourceContent,p=void 0===d?{}:d,f=t.hasMessageSource,h=t.shopContent,A=void 0===h?{}:h,m=t.fetchStatus,b=void 0===m?"":m,y=t.send_status,S=t.id,C=t.conversation_id;if(!f)return null;var O={marginTop:n?"1.5em":"0.75em"};if(b.includes("Source"))return g.a.createElement(E.Processor,{type:"loading",messageType:"source",style:O});if("done"===b){var w,I;if("order"===l&&(w=!(null!=p&&null!==(I=p.content)&&void 0!==I&&I.id)),"product"===l){var M=(null==p?void 0:p.content)||{},T=M.id,j=M.actual_price;w=!T||!j}if(w)return g.a.createElement(E.Processor,{type:"reload",messageType:"source",reloadRequest:c,style:O})}return Object(v.checkEmptyObject)(p)?null:["product","order"].includes(l)&&g.a.createElement("div",{style:O},"product"===l?g.a.createElement(x,{isFaking:u,content:p.content,comingShopContent:A,sendStatus:y,isSendByMe:a,isSubAccount:r,isScChat:s,messageId:S,conversationId:C}):g.a.createElement(_.a,{isFaking:u,content:p.content,sendStatus:y,isSendByMe:a,isSubAccount:r,shopId:o,isScChat:s,region:i,messageId:S,conversationId:C}))}));C.displayName="MessageSource";var O,w=C,I=n(191),M=n(192),T=n(194),j=n(4),B=n.n(j);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){B()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=v.MessageTypes.MSG_TYPE_BUNDLE_DEAL,P=v.MessageTypes.MSG_TYPE_FLASH_SALE,D=v.MessageTypes.MSG_TYPE_VOUCHER,U=v.MessageTypes.MSG_TYPE_ITEM_LIST,q=v.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,F=v.MessageTypes.MSG_TYPE_SHOPPING_CART,L=v.MessageTypes.MSG_TYPE_PRODUCT,H=v.MessageTypes.MSG_TYPE_VIDEO,G=v.MessageTypes.MSG_TYPE_IMAGE,z=v.MessageTypes.MSG_TYPE_TEXT,W=(O={},B()(O,N,"impressionBundleDealCard"),B()(O,P,"impressionFlashSaleCard"),B()(O,D,"impressionVoucherCard"),B()(O,U,"impressionProductListCard"),B()(O,L,"impressionProductCard"),B()(O,q,"impressionRateCard"),B()(O,F,"impressionCartCard"),B()(O,H,"impressionVideoMessage"),B()(O,G,"impressionImageMessage"),O),Y=function(e){var t=e.trackerName,n=void 0===t?"":t,r=e.operation,s=void 0===r?"impression":r,o=e.data,a=void 0===o?{}:o,i=e.info,c=i.message,u=c.id,l=c.type,d=c.content,p=c.source,f=c.textContent,h=void 0===f?{}:f,A=c.to_id,g=c.from_id,E=c.request_id,b=c.crm_activity_id,_=i.conversation,y=_.buyerId,S=_.shopId,x=_.id,C=R({message_id:u,crm_activity_id:b||"",from_source:b?"CRM":"",conversation_id:x},a);switch(l){case z:C=R({message_id:u,conversation_id:x,message_type:v.ApiMessageTypes[z],is_sender:y===A},a);break;case N:C.bundle_deal_id=d.bundle_deal_id;break;case P:C.flash_sale_id=d.flash_sale_id;break;case q:C.order_id=d.order_id;break;case D:var O=y===A,w=h.status,I=void 0===w?"":w,M=h.claimed,T=["unclaimed","claimed","expired"];C.voucher_id=d.voucher_id,O||(C=R(R({},C),{},{shopid:S,promotion_id:d.voucher_id,promotion_shopid:S,source:p,voucher_status:"finished"===I?T[2]:M?T[1]:T[0],is_sender:O}));break;case H:C={message_id:u===E?0:u,is_sender:y===A,to_user_id:A,from_user_id:g,video_original_duration:d.duration_seconds,conversation_id:x};break;case G:var j=y===A;if(!d.unknown_qr_code||j)return;C={shopid:S,message_id:u===E?0:u,conversation_id:x}}var B={trackerName:n||W[l],data:C,shopId:S};"impression"!==s?Object(m.clickTracker)(B):Object(m.impressionTracker)(B)},V=n(60),X=n.n(V),Q=n(36),J=n.n(Q),K=n(12),Z=n(10),$={setReplyToMessage:K.setReplyToMessage,deleteMessageRequested:K.deleteMessageRequested},ee=Object(Z.connect)((function(e){return{scrollToMessageId:Object(m.scrollToMessageIdSelector)(e),hasReplyPermission:Object(m.hasReplyPermissionSelector)(e),hasDeletePermission:Object(m.hasDeletePermissionSelector)(e),currentConversationId:Object(m.currentConversationIdSelector)(e),deleteConfigDuration:Object(m.deleteConfigDurationSelector)(e)}}),$)((function(e){return g.a.createElement(E.MessageToolbar,J()({},e,{impressionTracker:m.impressionTracker,clickTracker:m.clickTracker}))})),te=v.MessageTypes.MSG_TYPE_WEBVIEW,ne=v.MessageTypes.MSG_TYPE_NOTIFICATION,re=v.MessageTypes.MSG_TYPE_ORDER,se=v.MessageTypes.MSG_TYPE_OFFER,oe=v.MessageTypes.MSG_TYPE_RATE_CARDS,ae=v.MessageTypes.MSG_TYPE_VIDEO,ie=v.MessageTypes.MSG_TYPE_TEXT,ce=v.MessageTypes.MSG_TYPE_PRODUCT,ue=v.MessageTypes.MSG_TYPE_SHOPPING_CART,le=v.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,de=[ce,re,se,ue,le],pe=["index","timeFlag","lastMessageFlag"];t.a=function(e){var t=function(t){l()(r,t);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var s=h()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return p()(this,n)}}(r);function r(e,t){var o;s()(this,r),o=n.call(this,e,t);var a=e.index,i=e.message,u=e.newMessageFlag,l=e.exposedMessageIds,d=void 0===l?[]:l,p=e.addExposedMessageId,f=i.type===re&&"done"===i.fetchStatus&&!i.order;if((0===a||i.type===se||u||f)&&(o.needRemeasure=!0),o.handleReload=o.handleReload.bind(c()(o)),o.handleResendMessage=o.handleResendMessage.bind(c()(o)),o.handleCancelMessage=o.handleCancelMessage.bind(c()(o)),o.handleMessageIsSend=o.handleMessageIsSend.bind(c()(o)),o.track=o.track.bind(c()(o)),o.timer=null,o.messageNode=null,o.shouldExpose=!0,o.clearTimer=o.clearTimer.bind(c()(o)),o.needExpose="function"==typeof IntersectionObserver&&W[o.props.message.type]&&!d.includes(o.props.message.id),o.needExpose){var h={root:document.querySelector("#messagesContainer"),threshold:.5};o.observer=new IntersectionObserver((function(e){var t=e[0];t&&t.isIntersecting&&t.intersectionRatio>=.5?!o.timer&&o.shouldExpose&&(o.shouldExpose=!1,o.timer=setTimeout((function(){o.track(),o.clearTimer(),p&&p(o.props.message.id)}),1e3)):t&&t.intersectionRatio<=0&&(o.shouldExpose=!0)}),h)}return o}return a()(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.message,n=e.hasSourceMessageMap;void 0===n[t.id]&&(n[t.id]=t.hasMessageSource),this.needExpose&&this.observer.observe(this.messageNode),this.measureMessage()}},{key:"componentWillUnmount",value:function(){this.clearTimer(),this.needExpose&&this.observer.unobserve(this.messageNode)}},{key:"componentDidUpdate",value:function(e){var t=this,n=e.message,r=e.hasSourceMessageMap,s=e.newMessageFlag,o=e.showWarningMessageIds,a=this.props,i=a.message,c=a.newMessageFlag,u=a.showWarningMessageIds,l=!1;if(n.type===se)l=(n.textContent&&n.textContent.status)!==(i.textContent&&i.textContent.status);else{var d=["errorCode","status","send_status","fetchStatus"];i.type!==te&&d.push("content"),(l=d.some((function(e){return n[e]!==i[e]})))||(l=pe.some((function(n){return t.props[n]!==e[n]})))}r[i.id]!==i.hasMessageSource&&(l=!0,r[i.id]=i.hasMessageSource),s!==c&&(l=!0),n.type===ie&&o.indexOf(n.id)!==u.indexOf(i.id)&&(l=!0),!Object(v.isDeletedMessage)(n)&&Object(v.isDeletedMessage)(i)&&(l=!0),l&&(this.needRemeasure=l),this.measureMessage()}},{key:"clearTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"handleReload",value:function(){var e=this.props,t=e.message;(0,e.populateMessageRequested)({message:t})}},{key:"measureMessage",value:function(){this.needRemeasure&&(this.props.measure(),this.needRemeasure=!1)}},{key:"handleResendMessage",value:function(){var e=this.props,t=e.message,n=e.resendMessageRequested,r=e.conversationId,s=e.conversationShopId,o=e.conversationStatus,a=t.id;t.type===ae&&Object(m.clickTracker)({shopId:s,trackerName:"clickResendVideo",data:{message_id:a,conversation_id:r}}),n({conversationId:r,conversationStatus:o,message:t})}},{key:"handleCancelMessage",value:function(){var e=this.props,t=e.message,n=e.cancelSendingMessageRequested,r=e.conversationId,s=e.conversationShopId,o=t.id;Object(m.clickTracker)({shopId:s,trackerName:"clickCancelVideo",data:{message_id:o,conversation_id:r}}),n({id:o,conversationId:r})}},{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"impression",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.props,s=r.message,o=r.conversationBuyerId,a=r.conversationId,i=r.conversationShopId;Y({trackerName:e,operation:t,data:n,info:{message:s,conversation:{buyerId:o,shopId:i,id:a}}})}},{key:"handleMessageIsSend",value:function(e){var t=this.props.conversationBuyerId;return e.to_id===t}},{key:"renderMessage",value:function(t){var n=this.props,r=n.message,s=n.measure,o=n.timeFlag,a=n.isScChat,i=n.isSubAccount,c=n.newMessageFlag,u=n.isLastSystemMessage,l=n.showWarningMessageIds,d=n.shop,p=n.conversationId,f=n.conversationShopId,h=n.conversationBuyerId,A=n.conversationStatus,m=n.isInFaqHistoryModal,_=void 0!==m&&m,y=r.type,S=r.send_status,x=r.hasMessageSource,C=r.fetchStatus,O=void 0===C?"":C,j=r.content,B=void 0===j?{}:j,k=r.from_shop_id,R=r.request_id,N=r.textContent,P=!t&&c,D=y===v.MessageTypes.MSG_TYPE_TEXT&&!t&&-1!==l.indexOf(r.id),U=y===ne||y===te&&B.type===oe&&(t||i),q=U?X.a.message:t?X.a.messageSend:X.a.messageReceive,F=!(x||o||u||U)||o&&U?"4px":"8px",L=(d&&d.country?d.country:"SG").toLowerCase(),H="closed"===A,G=Object(v.isDeletedMessage)(r),z=function(e,t,n){if(de.includes(e))switch(e){case re:case ce:case le:return void 0===t||n.includes("Card");case se:case ue:return n.includes("Card")}return n.includes("Card")}(y,N,O),W=function(e,t,n){if(de.includes(e))switch(e){case re:return!(null!=t&&t.id);case ce:if(t){var r=t.id,s=t.actual_price,o=t.status;return!(r&&s||Object(v.checkProductDeleted)(r,o))}return!1;case se:return!t||!!t.error||!Object.keys(t).length;case ue:return"failed"===n;case le:return!(null!=t&&t.id&&null!=t&&t.serial_number)}return!1}(y,N,O);return g.a.createElement(g.a.Fragment,null,P&&g.a.createElement(b.a,null),o&&g.a.createElement("div",{className:X.a.messageTime},o),g.a.createElement(w,{message:r,timeFlag:o,isSubAccount:i,isScChat:a,shopId:f,isSend:t,region:L,handleReload:this.handleReload}),g.a.createElement("div",{style:{marginTop:F},className:q},t&&g.a.createElement(I.a,{isClosed:H,message:r,resendMessage:this.handleResendMessage}),t&&!U&&g.a.createElement(M.a,{type:y,status:S,requestId:R,handleCancelMessage:this.handleCancelMessage}),G?g.a.createElement(E.DeletedMessage,{isSend:t}):g.a.createElement(ee,{isSend:t,message:r,isInFaqHistoryModal:_,isClosed:H},g.a.createElement("div",{className:X.a.bubble},z?g.a.createElement(E.Processor,{type:"loading",messageType:y,content:B}):W?g.a.createElement(E.Processor,{type:"reload",messageType:y,reloadRequest:this.handleReload}):g.a.createElement(e,{message:r,isScChat:a,isSend:t,measure:s,isSubAccount:i,handleReload:this.handleReload,track:this.track,shop:d,region:L,conversationId:p,conversationShopId:f,conversationBuyerId:h,conversationStatus:A,isInFaqHistoryModal:_,handleMessageIsSend:this.handleMessageIsSend})))),g.a.createElement(T.a,{message:r,buyerId:h,shop:d}),D&&g.a.createElement(E.TextWarning,{shopId:k,region:L}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,r=t.message,s=t.isLastMessage,o=t.className,a=this.renderMessage(this.handleMessageIsSend(r)),i="".concat(X.a.root," ").concat(s?X.a.lastMessage:""," ").concat(o);return g.a.createElement("div",{style:n,className:i,ref:function(t){return e.messageNode=t}},a)}}]),r}(g.a.PureComponent);return t.defaultProps={showWarningMessageIds:[]},t}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.DELETE_CONVERSATION_MESSAGE_HASH="DELETE_CONVERSATION_MESSAGE_HASH",e.SET_ENTRY_POINT="SET_ENTRY_POINT",e.EVALUATION_REQUESTED="EVALUATION_REQUESTED",e.FETCH_FAQ_MESSAGES_REQUESTED="FETCH_FAQ_MESSAGES_REQUESTED",e.FETCH_FAQ_MESSAGES_SUCCEEDED="FETCH_FAQ_MESSAGES_SUCCEEDED",e.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS="UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS",e.UPDATE_CURRENT_FAQ_ID="UPDATE_CURRENT_FAQ_ID",e.SHOW_FAQ_HISTORY_MODAL="SHOW_FAQ_HISTORY_MODAL",e.FETCH_MESSAGES_REQUESTED="FETCH_MESSAGES_REQUESTED",e.FETCH_MESSAGES_SUCCEEDED="FETCH_MESSAGES_SUCCEEDED",e.UPDATE_FETCH_MESSAGES_REQUESTED_STATUS="UPDATE_FETCH_MESSAGES_REQUESTED_STATUS",e.UPDATE_PRELOADED_MESSAGES="UPDATE_PRELOADED_MESSAGES",e.DELETE_PRELOADED_MESSAGES="DELETE_PRELOADED_MESSAGES",e.HANDLE_SENSITIVE_URL="HANDLE_SENSITIVE_URL",e.SEND_MESSAGES_FAILED_BY_OFFLINE="SEND_MESSAGES_FAILED_BY_OFFLINE",e.RESET_MESSAGES_FAILED_BY_OFFLINE="RESET_MESSAGES_FAILED_BY_OFFLINE",e.RESEND_OFFLINE_MESSAGES_ONCE="RESEND_OFFLINE_MESSAGES_ONCE",e.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED="RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED",e.POPULATE_MESSAGE_REQUESTED="POPULATE_MESSAGE_REQUESTED",e.RECEIVE_MESSAGE_REQUESTED="RECEIVE_MESSAGE_REQUESTED",e.RECEIVE_MESSAGE_SUCCEEDED="RECEIVE_MESSAGE_SUCCEEDED",e.RESET_NEW_CONVERSATION_QUEUE="RESET_NEW_CONVERSATION_QUEUE",e.RESET_OLD_CONVERSATION_QUEUE="RESET_OLD_CONVERSATION_QUEUE",e.RESET_CONVERSATION_QUEUE="RESET_CONVERSATION_QUEUE",e.RESEND_MESSAGE_REQUESTED="RESEND_MESSAGE_REQUESTED",e.SEND_MESSAGES_REQUESTED="SEND_MESSAGES_REQUESTED",e.SEND_MESSAGES_SUCCEEDED="SEND_MESSAGES_SUCCEEDED",e.SENDING_MESSAGES="SENDING_MESSAGES",e.SEND_MESSAGES_TO_PENDING="SEND_MESSAGES_TO_PENDING",e.SEND_MESSAGES_FAILED="SEND_MESSAGES_FAILED",e.ABORT_ALL_SENDING_MESSAGES="ABORT_ALL_SENDING_MESSAGES",e.CANCEL_SENDING_MESSAGE_REQUESTED="CANCEL_SENDING_MESSAGE_REQUESTED",e.CANCEL_SENDING_MESSAGE_SUCCEEDED="CANCEL_SENDING_MESSAGE_SUCCEEDED",e.SEND_VIDEO_MESSAGE_REQUESTED="SEND_VIDEO_MESSAGE_REQUESTED",e.SEND_PRODUCTS_MESSAGE_REQUESTED="SEND_PRODUCTS_MESSAGE_REQUESTED",e.TRANSLATE_MESSAGES_REQUESTED="TRANSLATE_MESSAGES_REQUESTED",e.CHANGE_TRANSLATE_STATUS="CHANGE_TRANSLATE_STATUS",e.UPDATE_VIDEO_INFO="UPDATE_VIDEO_INFO",e.DELETE_VIDEO_INFO="DELETE_VIDEO_INFO",e.MESSAGE_SYNC_UPDATE="MESSAGE_SYNC_UPDATE",e.MESSAGE_UPDATE_TIME_NOW="MESSAGE_UPDATE_TIME_NOW",e.SHOW_TRANSLATE_FEEDBACK="SHOW_TRANSLATE_FEEDBACK",e.SEND_TRANSLATE_FEEDBACK="SEND_TRANSLATE_FEEDBACK"}(r||(r={}))},function(e,t,n){"use strict";var r,s=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function a(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function i(e,t){for(var n={},r=[],s=0;s<e.length;s++){var i=e[s],c=t.base?i[0]+t.base:i[0],u=n[c]||0,l="".concat(c," ").concat(u);n[c]=u+1;var d=a(l),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(o[d].references++,o[d].updater(p)):o.push({identifier:l,updater:A(p,t),references:1}),r.push(l)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=s(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var u,l=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,n,r){var s=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,s);else{var o=document.createTextNode(s),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function p(e,t,n){var r=n.css,s=n.media,o=n.sourceMap;if(s?e.setAttribute("media",s):e.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,h=0;function A(e,t){var n,r,s;if(t.singleton){var o=h++;n=f||(f=c(t)),r=d.bind(null,n,o,!1),s=d.bind(null,n,o,!0)}else n=c(t),r=p.bind(null,n,t),s=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else s()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=i(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var s=a(n[r]);o[s].references--}for(var c=i(e,t),u=0;u<n.length;u++){var l=a(n[u]);0===o[l].references&&(o[l].updater(),o.splice(l,1))}n=c}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,s,o=e[1]||"",a=e[3];if(!a)return o;if(t&&"function"==typeof btoa){var i=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(s," */")),c=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[o].concat(c).concat([i]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var s={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(s[a]=!0)}for(var i=0;i<e.length;i++){var c=[].concat(e[i]);r&&s[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t,n){"use strict";n.r(t),n.d(t,"t",(function(){return o}));var r=n(44),s=n.n(r),o=s.a.t.bind(s.a)},function(e,t,n){var r=n(62),s=n(63),o=n(49),a=n(64);e.exports=function(e,t){return r(e)||s(e,t)||o(e,t)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},,,function(e,t,n){var r=n(121),s=n(122),o=n(49),a=n(123);e.exports=function(e){return r(e)||s(e)||o(e)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},,function(e,t){e.exports=d},,function(e,t,n){"use strict";n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return C})),n.d(t,"f",(function(){return P})),n.d(t,"e",(function(){return U})),n.d(t,"c",(function(){return q})),n.d(t,"a",(function(){return F}));var r=n(22),s=n.n(r),o=n(4),a=n.n(o),i=n(25),c=n.n(i),u=n(5),l=n.n(u),d=n(3),p=n(12),f=n(1),h=n(2),A=n(90),g=n.n(A),m=l.a.mark(O),E=l.a.mark(M),v=l.a.mark(T),b=l.a.mark(P);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=["product","order","offer","voucher","feed_story","unrated_order_reminder","bundle_message"],x=function(e,t){for(var n,r=e.length,s=t.length,o=0,a=0,i=new Array(r+s).fill(0);o<r||a<s;)n=o===r?t[a++]:a===s?e[o++]:/^\d+$/.test(e[o])?Object(h.greaterThan)(e[o],t[a])?e[o++]:t[a++]:e[o++],i[o+a-1]=n;return c()(new Set(i))},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.updateMaxGeneralOptionHideTime,r=void 0===n||n,s=t.updateMessageOption,o=void 0===s||s,a=e||{},i=a.created_timestamp,c=a.message_option,u=r?{max_general_option_hide_time:i}:{},l=o?{last_message_option:c}:{};return y(y({},u),l)};function O(e){var t,n;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=[],n=[],Object.entries(e).forEach((function(e){var t=s()(e,2),r=t[0],o=t[1];Array.isArray(o)?n.push(Object(d.call)(p.getPopulateContent,r,c()(new Set(o)))):Object.entries(o).forEach((function(e){var t=s()(e,2),o=t[0],a=t[1];n.push(Object(d.call)(p.getPopulateContent,r,{shopId:o,id:c()(new Set(a))}))}))})),r.next=5,Object(d.all)(n);case 5:return r.sent.forEach((function(e){var n=Object(f.normalize)("voucher_web"===e.type?"vouchers":Object(h.camelCase)(e.type),e.content);t.push(Object(d.put)(Object(f.updateEntities)({entities:n.entities})))})),r.next=9,Object(d.all)(t);case 9:case"end":return r.stop()}}),m)}function w(e,t,n,r){var o=[],a={sourceInfo:n,contentInfo:r},i=t.filter((function(e){return"shops"===e.type}));return Object.keys(a).forEach((function(n){Object.entries(a[n]).forEach((function(r){var a=s()(r,2),c=a[0],u=a[1];Object.entries(u).forEach((function(r){var a=s()(r,2),u=a[0],l=a[1];o=o.concat(l);var d=t.find((function(e){return e.type===c&&e.content&&parseInt(e.content.id+"")===parseInt(u)}));l.forEach((function(t){switch(n){case"sourceInfo":if(e[t].sourceContent=d,d){var r=i.findIndex((function(e){return[d.content.shop_id,d.content.id].includes(e.content.id)}));e[t].shopContent=-1!==r?i[r]:{}}else e[t].shopContent={};break;case"contentInfo":e[t].textContent=d&&d.content||{}}}))}))}))})),c()(new Set(o))}function I(e,t){var n={},r=[],s=[],o=[];return t.forEach((function(e){var t=e.content,s=t.id,o=t.result,a=t.fetchStatus;n[s]=o,"failed"===a&&r.push(s)})),e.forEach((function(e,t){"shopping_cart"===e.type&&n[e.id]&&(e.textContent=n[e.id],s.push(t)),r.includes(e.id)&&o.push(t)})),[c()(new Set(s)),c()(new Set(o))]}function M(e,t){var n,r,o,a,i,c;return l.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return n=[],Object.entries(t).forEach((function(e){var t=s()(e,2),r=t[0],o=t[1];n.push(Object(d.call)(p.getPopulateContent,"shopping_cart",{id:r,cartItems:o}))})),u.next=4,Object(d.all)(n);case 4:r=u.sent,o=I(e,r),a=s()(o,2),i=a[0],c=a[1],e.forEach((function(e,t){i.includes(t)&&(e.fetchStatus="done"),c.includes(t)&&(e.fetchStatus="failed")}));case 7:case"end":return u.stop()}}),E)}function T(e,t){var n,r,o,a,i,u,A,g,m,E,b,_;return l.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(n=t.merge,r=t.source,o=t.content,a=t.sourceShops,i=t.webviews,u=t.cartReminders,l.t0=Object.keys(i).length,!l.t0){l.next=5;break}return l.next=5,Object(d.fork)(O,i);case 5:return A=[],Object.entries(n).forEach((function(e){var t,n=s()(e,2),r=n[0],o=n[1];(t=A).push.apply(t,c()(o.map((function(e){return Object(d.call)(p.getPopulateContent,r,e)}))))})),g=Array.from(new Set(a)).map((function(e){return Object(d.call)(p.getPopulateContent,"shops",e)})),A=A.concat(g),l.next=11,Object(d.all)(A);case 11:if(m=l.sent,E=w(e,m,r,o),e.filter((function(e,t){return E.includes(t)})).forEach((function(e){e.fetchStatus="done"})),l.t1=Object.keys(u).length,!l.t1){l.next=18;break}return l.next=18,Object(d.call)(M,e,u);case 18:return e[0]&&window.clickedConversationId===e[0].conversation_id&&(window.populateMessageConversationId=window.clickedConversationId),(b=c()(e)).forEach((function(t){var n=t.quoted_msg;if(n){var r=e.find((function(e){return e.id===n.id}));r&&!Object(h.isDeletedMessage)(r)&&(t.quoted_msg=r)}})),_=Object(f.normalize)("messages",b),l.next=24,Object(d.put)(Object(f.updateEntities)({name:"messages",entities:_.entities}));case 24:case"end":return l.stop()}}),v)}h.MessageTypes.MSG_TYPE_OFFER,h.MessageTypes.MSG_TYPE_ORDER;var j=h.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,B=h.MessageTypes.MSG_TYPE_BUNDLE_MESSAGE,k=function(e,t,n){return e.some((function(e){return e[t]===n}))},R=function(e,t,n,r){!e[t][n]&&(e[t][n]={}),!e[t][n][r]&&(e[t][n][r]=[]),!e.merge[n]&&(e.merge[n]=[])},N=function(e,t,n){var r={source:{},content:{},merge:{},sourceShops:[],webviews:{},cartReminders:{}};return t.forEach((function(t,s){var o=t.id,a=t.source_type,i=t.source_content,c=void 0===i?{}:i,u=t.type,l=t.content,d=void 0===l?{}:l,p=t.hasPopulated,f=!e[o]||!e[o].fetchStatus;if(a&&c){var A=c["".concat(a,"_id")];if(A&&![-1,0].includes(A)){var g=c.shop_id;R(r,"source",a,A),n&&r.sourceShops.push(g),r.source[a][A].push(s),f&&(t.fetchStatus="pendingSource"),k(r.merge[a],"id",A)||r.merge[a].push({id:A,shopId:g})}}if(S.includes(u)&&d){f&&(t.fetchStatus="pendingSource"===t.fetchStatus?"pendingCardAndSource":"pendingCard");var m=d.shop_id,E=function(e){var t=e.type,n=e.content,r=e.id;return t===j?n.order_id:t===B?r:n["".concat(t,"_id")]}(t),v=d.creator_id,b=d.messages;R(r,"content",u,E),r.content[u][E].push(s),k(r.merge[u],"id",E)||r.merge[u].push({id:E,shopId:m,creatorId:v,faqMessageIds:b})}else if("webview"===u){var _=d.url,x=void 0===_?"":_,C=x.split("/"),O=C[C.length-2],w="rate_cards"===(O="voucher"===O?"".concat(O,"_web"):O)?Object(h.getUrlParam)("id",x):parseInt(Object(h.getUrlParam)("id",x)),I=Object(h.getUrlParam)("shop_id",x);t.content=y(y({},d),{},{id:w,type:O}),p||(I&&(R(r,"webviews",O,I),r.webviews[O][I].push(w)),I||(R(r,"webviews",O,"0"),r.webviews[O][0].push(w)),t.content.fetchStatus="pendingCard")}else if("shopping_cart"===u){var M=t.content.cart_items,T=t.id;t.fetchStatus="pendingCard",r.cartReminders[T]=M}})),r};function P(e,t,n){var r,s,o,a,i=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>3&&void 0!==i[3]&&i[3],t.next=3,Object(d.select)((function(e){return e.entityReducer}));case 3:return s=t.sent,o=s.messages,t.next=7,Object(d.call)(N,o,e,n);case 7:if(a=t.sent,!r){t.next=13;break}return t.next=11,Object(d.call)(T,e,a);case 11:t.next=15;break;case 13:return t.next=15,Object(d.spawn)(T,e,a);case 15:case"end":return t.stop()}}),b)}var D={1:"product_entry_point",2:"order_entry_point",3:"shop_entry_point",8:"product_inactive_seller",10:"lowest_price_guaranteed",11:"poor_fulfilment"},U=function(e){var t=e.id,n=e.recipientID,r=e.message,s=e.redirectInfo,o=e.conversationId,a=e.entryPoint,i=e.replyToMessageId,c=t||g()(),u=r.content,l=r.type,d=r.shopId,p={id:c,type:l,content:u,isFaking:r.isFaking,to_id:n,shop_id:d,request_id:c,created_timestamp:Math.floor(Date.now()/1e3),chat_send_option:{force_send_cancel_order_warning:!1,comply_cancel_order_warning:!1}};if(i&&(p.content=y(y({},p.content),{},{quoted_msg_id:i})),a&&a.type&&a.conversationId===o?p.entry_point=D[a.type]:p.entry_point="direct_chat_entry_point",s){var f=s.orderId,h=s.productId,A=s.conversationId,m=s.shopId;if(parseInt(o)===parseInt(A)){if(f){var E=parseInt(f);p=y(y({},p),{},{order_id:E,source_content:{order_id:E,shop_id:m},source_type:"order"})}if(h){var v=parseInt(h);p=y(y({},p),{},{product_id:v,source_content:{product_id:v,shop_id:m},source_type:"product"})}}}return p},q=function(e){var t=e.crm_message_preview,n=void 0===t?{}:t;return n.text?{crm_message_preview:n}:{crm_message_preview:{}}},F=function(e,t){return e===t?0:Object(h.greaterThan)(e,t)?1:-1}},,,,function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n(25);var r=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},s=function(e,t){return e>t},o=function(e){return e[e.length-1]},a=function(e,t){return e?function(){}:t},i=function(e,t){return e.length===t.length&&e.every((function(e,n){var r=t[n];return JSON.stringify(e)===JSON.stringify(r)}))}}).call(this,n(21).t)},,function(e,t,n){"use strict";n.r(t);var r=n(22),s=n.n(r),o={};Object.entries({"input-field":["fetchMessageShortcutsGroupRequested","updateFetchMessageShortcutsGroupStatus","fetchMessageShortcutsGroupSucceeded","setCurrentGroupType","setCurrentGroupId","fetchOffersRequested","fetchOffersSucceed","updateFetchOffersRequestedStatus","getPendingOffersCountRequested","getPendingOffersCountSucceed","replyOfferRequested","fetchAllOrdersRequested","fetchOrdersRequested","fetchOrdersSucceed","updateFetchOrdersStatus","fetchAllOrders","fetchOrders","fetchProductsRequested","fetchMyShopProducts","fetchProductsSucceed","updateMyShopProductsRequestedStatus","updateOtherShopProductsRequestedStatus","updateAllShopProductsRequestedStatus","updateMyShopSearchKeyword","updateOtherShopSearchKeyword","updateSelectedProductTab","fetchAllProductsRequested","fetchAllShopProducts","fetchProducts","initPacks","initStickers","selectSticker","updateCurrentSticker","fetchSingleStickerRequested","fetchSingleStickerSucceeded","updateFetchPacksRequestedStatus","updateFetchStickersRequestedStatus","fetchStickersRequested","fetchStickersRequestedSaga","claimVoucherRequested","fetchVouchersRequested","fetchVouchersSucceeded","updateFetchVouchersRequestedStatus"],"message-section":["deleteConversationMessageHash","deleteMessageRequested","deleteMessagePostRequested","setEntryPoint","evaluationRequested","showMyRateCard","showRateCard","fetchFaqMessagesRequested","fetchFaqMessagesSucceeded","updateFetchFaqMessagesRequestedStatus","updateCurrentFaqId","showFaqHistoryModal","fetchMessagesRequested","fetchMessagesSucceeded","updateFetchMessagesRequestedStatus","updatePreloadedMessages","deletePreloadedMessages","fetchMessagesRequestedWithPreloadSaga","fetchMessagesRequestedSaga","handleSensitiveUrl","sendMessagesFailedByOffline","resetMessagesFailedByOffline","resendOfflineMessagesOnce","resendOfflineMessagesOnceSucceed","updateResendConversationMessage","populateMessageRequested","getPopulateContent","receiveMessageRequested","receiveMessageSucceeded","resetNewConversationQueue","resetOldConversationQueue","resetConversationQueue","handleNewConversationMessageQueue","handleCurrentConversationChange","setReplyToMessage","resetReplyToMessage","scrollToMessage","setScrollToMessageId","resetScrollToMessageId","setInScrollToMessage","setCurrentConversationReplyToMessage","resetCurrentConversationReplyToMessage","resendMessageRequested","sendMessagesRequested","sendMessagesSucceeded","sendingMessages","sendMessagesToPending","sendMessagesFailed","abortAllSendingMessages","cancelSendingMessageRequested","cancelSendingMessageSucceeded","sendVideoMessageRequested","sendProductsMessageRequested","handleSendSucceededMessages","sendMessages","messageSyncUpdate","messageUpdateTimeNow","translateMessagesRequested","changeTranslateStatus","showTranslateFeedback","sendTranslateFeedback","populateWebviewContent","populateCartReminder","populateRoughMessage","populateMessageWithSourceAndContent","updateVideoInfo","deleteVideoInfo","uploadVideoGetToken","uploadVideGetResult","uploadVideo"]}).forEach((function(e){var t=s()(e,2),n=t[0];t[1].forEach((function(e){o[e]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.payload,s=t.isLazy;return{id:n,action:e,payload:r,isLazy:s}}}))})),t.default=o},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,n.apply(this,arguments)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";(function(e,r){n.d(t,"h",(function(){return de})),n.d(t,"i",(function(){return pe})),n.d(t,"l",(function(){return fe})),n.d(t,"j",(function(){return he})),n.d(t,"g",(function(){return Ae})),n.d(t,"a",(function(){return ge})),n.d(t,"b",(function(){return me})),n.d(t,"c",(function(){return Ee})),n.d(t,"k",(function(){return ve})),n.d(t,"e",(function(){return we})),n.d(t,"f",(function(){return Ie})),n.d(t,"n",(function(){return Be})),n.d(t,"m",(function(){return ke}));var s,o=n(22),a=n.n(o),i=n(25),c=n.n(i),u=n(4),l=n.n(u),d=n(5),p=n.n(d),f=n(90),h=n.n(f),A=n(27),g=n(197),m=n.n(g),E=n(198),v=n.n(E),b=n(199),_=n.n(b),y=n(11),S=n(3),x=n(1),C=n(68),O=n(43),w=n(69),I=n(73),M=n(29),T=n(38),j=n(2),B=p.a.mark(_e),k=p.a.mark(ye),R=p.a.mark(Se),N=p.a.mark(Ce),P=p.a.mark(we),D=p.a.mark(Ie),U=p.a.mark(Me),q=p.a.mark(Te),F=p.a.mark(je),L=p.a.mark(Be),H=p.a.mark(ke);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=j.MessageTypes.MSG_TYPE_IMAGE,Y=j.MessageTypes.MSG_TYPE_TEXT,V=j.MessageTypes.MSG_TYPE_VOUCHER,X=j.MessageTypes.MSG_TYPE_VOUCHER_WEB,Q=j.MessageTypes.MSG_TYPE_WEBVIEW,J=j.MessageTypes.MSG_TYPE_VIDEO,K=(j.MessageTypes.MSG_TYPE_ITEM_LIST,j.MessageTypes.MSG_TYPE_RATE_CARDS),Z=j.MessageErrorCode.DEFAULT,$=j.MessageErrorCode.FORBIDDEN,ee=j.MessageErrorCode.LIMITING,te=j.MessageErrorCode.CUSTOM_ERROR,ne=j.MessageErrorCode.BLACKLIST,re=j.MessageErrorCode.CANCEL_ORDER,se=j.MessageErrorCode.UNVERIFIED_PHONE_NUMBER,oe=j.MessageErrorCode.EXCEED_DAILY_LIMIT,ae=j.MessageErrorCode.UNTRUSTED_NETWORK,ie=j.MessageErrorCode.NEED_CAPTCHA,ce=j.MessageErrorCode.DFP_ERROR,ue=j.MessageErrorCode.SPAMMER,le=Object(y.createActions)({SEND_MESSAGES_REQUESTED:function(e){var t=e.id,n=e.conversationId,r=e.conversationUserId,s=e.messages,o=e.more;return{id:t,conversationId:n,conversationUserId:r,messages:s,more:void 0===o?{}:o}},SEND_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,requestIdToMessageId:e.requestIdToMessageId}},SENDING_MESSAGES:function(e){var t=e.conversationId,n=e.requestIds,r=e.isCancelable;return{conversationId:t,requestIds:n,isCancelable:void 0!==r&&r}},SEND_MESSAGES_TO_PENDING:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},SEND_MESSAGES_FAILED:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},ABORT_ALL_SENDING_MESSAGES:function(){return{}},CANCEL_SENDING_MESSAGE_REQUESTED:function(e){return{id:e.id,conversationId:e.conversationId}},CANCEL_SENDING_MESSAGE_SUCCEEDED:function(e){return{id:e.id,conversationId:e.conversationId}},SEND_VIDEO_MESSAGE_REQUESTED:function(e){var t=e.conversationId,n=e.conversationUserId,r=e.message,s=e.isResend;return{conversationId:t,conversationUserId:n,message:r,isResend:void 0!==s&&s}}}),de=le.sendMessagesRequested,pe=le.sendMessagesSucceeded,fe=le.sendingMessages,he=le.sendMessagesToPending,Ae=le.sendMessagesFailed,ge=le.abortAllSendingMessages,me=le.cancelSendingMessageRequested,Ee=le.cancelSendingMessageSucceeded,ve=le.sendVideoMessageRequested;function be(e,t){return delete e.errorCode,delete e.error,z(z({},e),{},{chat_send_option:{force_send_cancel_order_warning:t,comply_cancel_order_warning:!t}})}function _e(t){var n,r,s,o,a,i,c,u;return p.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return n=t.payload,r=n.conversationId,s=n.conversationUserId,o=n.message,a=n.isResend,l.next=3,Object(S.call)(T.h,r,o.shopId||o.shop_id);case 3:if(null!==(i=l.sent)){l.next=8;break}return l.next=7,Object(S.call)(x.setToastInformationSaga,Object(x.setToastInformation)({toast:{show:!0,type:"fail",message:e("toast.chat_bot_limit")}}));case 7:return l.abrupt("return");case 8:if(!1!==i){l.next=12;break}return l.next=11,Object(S.call)(x.setToastInformationSaga,Object(x.setToastInformation)({error:null}));case 11:return l.abrupt("return");case 12:return c=a?o.id:h()(),u=z({},i),a&&(u.precent=0),l.next=17,Object(S.put)(Object(T.d)({id:c,info:u}));case 17:return l.next=19,Object(S.put)(de({id:c,conversationId:r,conversationUserId:s,messages:[z(z({},o),{},{type:J})],more:{isResend:a}}));case 19:case"end":return l.stop()}}),B)}function ye(e,t){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(S.delay)(1e3);case 2:return n.next=4,Object(S.put)(he({conversationId:e,requestIds:t}));case 4:case"end":return n.stop()}}),k)}function Se(e,t){var n,r,s,o,a,i,c,u,l,d,f,h,g,m,E,v;return p.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(n=e.type,r=e.request_id,s=e.content,o=s.url,a=s.file,i=s.duration_seconds,c=s.video_url,u=n===J,p.prev=2,n!==W||o){p.next=24;break}return(l=new window.FormData).append("file",a),l.append("conversation_id",t),p.next=9,Object(S.call)(x.fetch,{method:"POST",subServer:"coreapi",resource:"images",payload:l});case 9:d=p.sent,f=d.url,h=d.thumbnail,g=d.thumb_width,m=d.thumb_height,E=d.file_server_id,e.content.url_hash=f.split("/").pop(),e.content.url=f,e.content.thumb_url=h,e.content.thumb_width=g,e.content.thumb_height=m,e.content.file_server_id=E,delete e.content.file,p.next=30;break;case 24:if(!u||c){p.next=30;break}return p.next=27,Object(S.call)(T.g,{id:r,file:a,duration:i,onProgress:function(e){A.store.dispatch(Object(T.d)({id:r,info:{percent:e}}))}});case 27:v=p.sent,e.content=z(z({},e.content),v),delete e.content.file;case 30:return p.abrupt("return",!0);case 33:if(p.prev=33,p.t0=p.catch(2),p.t1=u,!p.t1){p.next=39;break}return p.next=39,Object(S.put)(Object(T.d)({id:r,info:{percent:void 0}}));case 39:return p.abrupt("return",!1);case 40:case"end":return p.stop()}}),R,null,[[2,33]])}var xe=["request_id","to_id","type","content","shop_id","order_id","source","chat_send_option","source_content","source_type","entry_point"];function Ce(t,n,s){var o,a,i,c,u,l,d,f,h,A,g,E;return p.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return o="",a={},xe.forEach((function(e){t[e]&&(a[e]=t[e]),a[e]&&a[e].localUrl&&(o=a[e].localUrl,delete a[e].localUrl)})),t.retryRequestId&&(a.request_id=t.retryRequestId),i=JSON.stringify(z(z({},a),{},{device_id:s,source:Object(j.getChatSource)()?"minichat":"pc_mall"})),c=""+Date.parse(new Date)/1e3,u={},p.prev=7,l=m()(i).toString(),p.next=11,_.a.x(l,c,1,(r.env.COUNTRY||"SG").toUpperCase());case 11:u=p.sent,p.next=17;break;case 14:p.prev=14,p.t0=p.catch(7),u={"X-Sap-Access-S":i.request_id,"X-Sap-Access-T":c,"X-Sap-Access-F":"error"};case 17:return p.prev=17,p.next=20,v.a.getClientCheckData();case 20:d=p.sent,p.next=26;break;case 23:p.prev=23,p.t1=p.catch(17),d="error";case 26:return f=Math.floor(Date.now()/1e3),p.prev=27,h=z(z({},u),{},{"X-Dfp-Access-F":d}),p.next=31,Object(S.select)(x.captchaSignatureSelector);case 31:if(!(A=p.sent)){p.next=36;break}return h["X-Dfp-Access-S"]=A,p.next=36,Object(S.call)(x.updateCaptchaSignatureSaga,Object(x.updateCaptchaSignature)({signature:""}));case 36:return p.next=38,Object(S.call)(x.fetch,{method:"POST",resource:"messages",payload:i,headers:z({},h)});case 38:return g=p.sent,o&&(g.content.localUrl=o),n&&Object(j.removeItem)("mini-sc_redirect"),p.abrupt("return",z(z({},g),{},{created_at:new Date,created_timestamp:f}));case 44:p.prev=44,p.t2=p.catch(27),p.t3=!0,p.next=p.t3===p.t2 instanceof x.Forbidden?49:p.t3===p.t2 instanceof x.Limiting?51:p.t3===p.t2 instanceof x.CustomError?53:p.t3===p.t2 instanceof x.Blacklist?55:p.t3===p.t2 instanceof x.CancelOrderWarning?58:p.t3===p.t2 instanceof x.UnverifiedPhoneNumber?60:p.t3===("message_exceed_daily_limit"===p.t2.message)?62:p.t3===("request_block_errorrequest block error."===p.t2.message)?64:p.t3===("need_captcha"===p.t2.message)?66:p.t3===("dfp_block_error"===p.t2.message)||p.t3===("captcha_error"===p.t2.message)?68:p.t3===("soft_spammer_error"===p.t2.message)?70:72;break;case 49:return E=$,p.abrupt("break",73);case 51:return E=ee,p.abrupt("break",73);case 53:return E=te,p.abrupt("break",73);case 55:return E=ne,t.content={text:e("common.blacklist.replaced_text")},p.abrupt("break",73);case 58:return E=re,p.abrupt("break",73);case 60:return E=se,p.abrupt("break",73);case 62:return E=oe,p.abrupt("break",73);case 64:return E=ae,p.abrupt("break",73);case 66:return E=ie,p.abrupt("break",73);case 68:return E=ce,p.abrupt("break",73);case 70:return E=ue,p.abrupt("break",73);case 72:E=Z;case 73:return o&&(t.content.localUrl=o),p.abrupt("return",z(z({},t),{},{requestId:t.request_id,created_timestamp:f,errorCode:E,error:p.t2}));case 75:case"end":return p.stop()}}),N,null,[[7,14],[17,23],[27,44]])}var Oe=function(e){return e.content&&e.content.translation&&e.content.translation.text};function we(e,t){var n,r,s,o,a,i,c,u,d,f,h,A,g,m;return p.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return n=[],r=[],p.next=4,Object(S.select)(x.currentConversationIdSelector);case 4:if((s=p.sent)===t){p.next=12;break}return p.next=8,Object(S.select)(Object(x.conversationMessageIdsSelector)(t));case 8:return n=p.sent,p.next=11,Object(S.select)(Object(x.getMessagesSelector)(n.all));case 11:r=p.sent;case 12:return p.next=14,Object(S.select)(x.messagesWithSourceSelector);case 14:if(o=p.sent,a=Object(x.normalize)("messages",o).entities.messages||{},i=[],(c=e.map((function(e){var n,c=e.request_id,u=e.id,l=e.content,d=e.type;if(d===Q&&l&&l.type===V&&(l.type=X),a[c]){d===J&&i.push(Object(S.put)(Object(T.b)({id:c}))),i.push(Object(S.put)(Object(x.deleteRecord)({name:"messages",id:c})));var p=z(z({},a[c]),{},{translateStatus:Oe(e)?j.TranslationStatus.SHOW:j.TranslationStatus.FAILED});return a[u]?null:Object(j.deepMerge)(p,e)}if((n=s!==t?r.filter((function(e){return e&&e.retryRequestId===c})):o.filter((function(e){return e.retryRequestId===c}))).length){var f=n[0].request_id;i.push(Object(S.put)(Object(x.deleteRecord)({name:"messages",id:f})));var h=z(z({},a[f]),{},{translateStatus:Oe(e)?j.TranslationStatus.SHOW:j.TranslationStatus.FAILED}),A=a[u]?null:Object(j.deepMerge)(h,e);return A&&A.retryRequestId&&(A.original_request_id=f),A}return null})).filter(Boolean)).length){p.next=20;break}return p.abrupt("return");case 20:return p.next=22,Object(S.call)(x.updateOrReplaceAction,a,c,"messages");case 22:return p.next=24,Object(S.put)(pe({conversationId:t,requestIdToMessageId:c.reduce((function(e,t){return t.original_request_id?z(z({},e),{},l()({},t.original_request_id,t.id)):z(z({},e),{},l()({},t.request_id,t.id))}),{})}));case 24:return c.sort((function(e,t){return t.id-e.id})),p.next=27,Object(S.all)(i);case 27:return u=c[0],d=u.id,f=u.content,h=u.created_at,A=u.created_timestamp,g=u.type,m=u.message_option,p.next=30,Object(S.put)(Object(x.updateRecord)({name:"conversations",id:t,record:{latest_message_id:d,latest_message_type:g,latest_message_content:f,last_message_time:h,last_message_option:m,max_general_option_hide_time:A,crm_message_preview:{},unread_count:0,flag:"normal"}}));case 30:case"end":return p.stop()}}),P)}function Ie(t){var n,r,s,o,a,i,u,l,d,f,g,m,E,v,b,_,y,O,I,M,T,B,k,R,N,P,U,q,F,L,H,G,V,X,$;return p.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(n=t.conversationId,r=t.requestIds,s=t.messages,o=t.more,i=(a=void 0===o?{}:o).isRedirect,u=a.isFakingSource,l=a.isCancelable,s[0].content.type===K){p.next=5;break}return p.next=5,Object(S.put)(fe({conversationId:n,requestIds:r,isCancelable:l}));case 5:if(!u){p.next=7;break}return p.abrupt("return");case 7:if(d=s.length,p.t0=!l,!p.t0){p.next=12;break}return p.next=12,Object(S.spawn)(ye,n,r);case 12:return f=0,g=[],m=[],E=[],p.next=18,Object(S.select)(x.networkStatusSelector);case 18:return v=p.sent,p.next=21,Object(S.call)(j.getItem,"device_id");case 21:if(b=p.sent,"offline"!==v){p.next=28;break}_=s.map((function(e){return z(z({},e),{},{requestId:e.request_id})})),E.push.apply(E,c()(_)),m.push.apply(m,c()(_)),p.next=57;break;case 28:if(!(f<d)){p.next=57;break}return y=s[f],p.next=32,Object(S.call)(Se,y,n);case 32:if(O=p.sent,I=void 0,O){p.next=39;break}I=z(z({},y),{},{requestId:y.request_id}),m.push(I),p.next=54;break;case 39:return p.next=41,Object(S.call)(Ce,y,i,b);case 41:if(!(I=p.sent).errorCode){p.next=52;break}if(M=y.type,T=y.content,M!==Q||!T||T.type!==K){p.next=49;break}return p.next=47,Object(S.call)(x.setToastInformationSaga,Object(x.setToastInformation)({error:I.error}));case 47:p.next=50;break;case 49:m.push(I);case 50:p.next=53;break;case 52:g.push(I);case 53:I.error&&I.error.offlineError&&E.push(I);case 54:f++,p.next=28;break;case 57:if(!g.length){p.next=61;break}return g.forEach((function(e){e.send_status=j.MessageSendStatus.SUCCEED})),p.next=61,Object(S.call)(we,g,n);case 61:if(!m.length){p.next=112;break}return p.next=64,Object(S.select)(x.currentConversationIdSelector);case 64:if(p.sent!==n){p.next=78;break}if(!(B=m.find((function(e){return e.errorCode===ie})))){p.next=72;break}return p.next=70,Object(S.put)(Object(x.updateCaptchaVisible)({visible:!0,resendMessagePayload:{conversationId:n,messageId:B.id}}));case 70:p.next=78;break;case 72:if(k=[Z,te],R=m.find((function(e){return k.includes(e.errorCode)})),p.t1=R,!p.t1){p.next=78;break}return p.next=78,Object(S.call)(x.setToastInformationSaga,Object(x.setToastInformation)({error:R.error}));case 78:return N=[],m.forEach((function(e){var t=e.errorCode,n=e.error,r=e.request_id,s=e.type,o=e.content,a=e.to_id,i=e.from_id,c=e.shop_id,u=e.conversation_id;t===ee&&N.push(Object(S.call)(x.setToastInformationSaga,Object(x.setToastInformation)({error:n})));var l={errorCode:t,translateStatus:j.TranslationStatus.FAILED,retryRequestId:h()()};s===J&&Object(x.impressionTracker)({trackerName:"impressionResendVideo",data:{message_id:0,conversation_id:u,is_sender:!0,from_user_id:i,to_user_id:a,video_original_duration:o.duration_seconds},shopId:c}),(s===Y&&t===ne||[J,W].includes(s))&&(l.content=o),N.push(Object(S.put)(Object(x.updateRecord)({name:"messages",id:r,record:l})))})),p.next=82,Object(S.all)(N);case 82:return P=m.map((function(e){return e.requestId})),p.next=85,Object(S.put)(Ae({conversationId:n,requestIds:P}));case 85:if(U=[re,ae,ce,oe,ue],!(q=m.find((function(e){return U.includes(e.errorCode)})))){p.next=112;break}return p.next=90,Object(S.select)(x.currentConversationShopSelectors);case 90:F=p.sent,L=(F||{}).country,H=L&&L.toLowerCase(),p.t2=q.errorCode,p.next=p.t2===re?96:p.t2===oe?102:p.t2===ue?105:108;break;case 96:return p.next=98,Object(S.select)(Object(x.getMessageSelector)(q.request_id));case 98:return G=p.sent,p.next=101,Object(S.put)(Object(x.showModal)({type:"Cancel_ORDER_WARNING_MODAL",title:{key:"cancel_order.modal.title"},additions:{content:{key:"cancel_order.modal.content"},region:H||"sg"},actions:{cancel:{label:{key:"cancel_order.modal.send_it"},handler:function(){A.store.dispatch(Object(x.closeModal)());var e=be(G,!0);A.store.dispatch(Object(C.a)({conversationId:n,message:e}))}},confirm:{label:{key:"cancel_order.modal.not_send"},handler:function(){A.store.dispatch(Object(x.closeModal)());var e=be(G,!1);A.store.dispatch(Object(C.a)({conversationId:n,message:e}))}}}}));case 101:return p.abrupt("break",112);case 102:return p.next=104,Object(S.put)(Object(x.showModal)({type:"CONFIRM_MODAL",additions:{content:{key:"label.exceed.daily.limit.warning"}},actions:{confirm:{label:{key:"label.modal.confirm"},handler:function(){return A.store.dispatch(Object(x.closeModal)())}}}}));case 104:return p.abrupt("break",112);case 105:return p.next=107,Object(S.put)(Object(x.showModal)({type:"SPAMMER_MODAL",title:{key:"modal.translation_spammer.title"},additions:{content:{key:"modal.translation_spammer.content"},region:H||"sg"},actions:{confirm:{label:{key:"common.ok"},handler:function(){return A.store.dispatch(Object(x.closeModal)())}}}}));case 107:return p.abrupt("break",112);case 108:return V=q.errorCode===ce,X='<a style="color: #395692" target="blank" href="'.concat(Object(j.getShopeeCustomerService)(H),'">').concat(e("text.shopee_cs"),"</a>"),p.next=112,Object(S.put)(Object(x.showModal)({type:"CONFIRM_MODAL",title:{key:"modal.title.".concat(V?"common_error":"untrusted_network")},additions:{withCloseIcon:!0,renderContentAsHtml:!0,content:e("modal.content.".concat(V?"common_error_hint":"untrusted_network"),{someone:X})},actions:{confirm:{label:{key:"common.ok"}}}}));case 112:if(!E.length){p.next=117;break}return $=E.map((function(e){return e.requestId})),p.next=116,Object(S.put)(Object(w.e)({conversationId:n,requestIds:$}));case 116:Object(x.networkJudge)();case 117:case"end":return p.stop()}}),D)}function Me(e){var t,n,r,s,o,a,i,c,u,l,d,f,h,A,g,m,E,v,b,_,y,C,w,T,B;return p.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(t=e.payload,n=t.id,r=t.conversationId,s=t.conversationUserId,o=t.messages,a=t.more,!Object(j.getChatSource)()){p.next=4;break}return p.next=4,Object(S.put)(Object(x.reportRequested)({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 4:if(i=a.isResend,c=a.isFakingSource,!i){p.next=9;break}return p.next=8,Ie({conversationId:r,messages:o,requestIds:[o[0].request_id],more:{isCancelable:!!n}});case 8:return p.abrupt("return");case 9:return p.next=11,Object(S.select)(x.inlocationSelector);case 11:if(!p.sent){p.next=22;break}return p.next=15,Object(S.select)(x.currentConversationSelector);case 15:return u=p.sent,p.next=18,Object(S.put)(Object(x.updateLocationMode)({inlocation:!1}));case 18:return p.next=20,Object(S.put)(Object(I.b)({conversationId:u.id}));case 20:return p.next=22,Object(S.call)(O.d,{payload:{conversation:u,reset:!0,source:j.MessageSource.send}});case 22:return p.next=24,Object(S.select)(x.entryPointSelector);case 24:return l=p.sent,p.next=27,Object(S.select)(x.messagesWithSourceSelector);case 27:return d=p.sent,p.next=30,Object(S.call)(j.getItem,"mini-sc_redirect");case 30:return f=p.sent,h=o.map((function(e){var t;return Object(M.e)({id:n,recipientID:s,message:e,redirectInfo:f,conversationId:r,replyToMessageId:null==e||null===(t=e.replyToMessage)||void 0===t?void 0:t.id,entryPoint:l})})),p.next=34,Object(S.select)(x.currentUserIdSelector);case 34:return A=p.sent,p.next=37,Object(S.select)(x.currentUserShopIdSelector);case 37:return g=p.sent,p.next=40,Object(S.select)(x.currentUserSelector);case 40:if(m=p.sent,E=h.map((function(e,t){var n,r=z({},e);r.from_id=A;var s,a=r.type,i=r.content;if(["product","order","voucher"].includes(a)){var c="".concat(a,"_id"),u=i[c];r.fetchStatus="done";var l=o.find((function(e){return e.content[c]===u}));l&&(r.textContent=l.textContent)}else a===Y&&(r.translateStatus=j.TranslationStatus.PENDING);return null!==(n=o[t])&&void 0!==n&&n.replyToMessage&&(r.quoted_msg=null===(s=o[t])||void 0===s?void 0:s.replyToMessage),r.from_user_name=m.username||m.name,r})),v=d.filter((function(e){return e.hasMessageSource&&!e.isFaking})),b=d.filter((function(e){return e.hasMessageSource&&e.isFaking})),_=b[b.length-1],!b.length){p.next=51;break}return y=[],c||(E[0].sourceContent=_.sourceContent),b.forEach((function(e){y.push(Object(S.put)(Object(x.deleteRecord)({name:"messages",id:e.id})))})),p.next=51,Object(S.all)(y);case 51:if(!c){p.next=62;break}if(C=E[0]||{},w=C.source_content||{},!v.filter((function(e){var t=e.source_content||{};return w.shop_id===t.shop_id&&w.product_id===t.product_id&&w.order_id===t.order_id})).length){p.next=57;break}return p.abrupt("return");case 57:return p.next=59,Object(S.select)(x.isSubAccountSelector);case 59:return T=p.sent,p.next=62,Object(S.call)(M.f,E,g,T,!0);case 62:return B=Object(x.normalize)("messages",E),p.next=65,Object(S.put)(Object(x.updateEntities)({entities:B.entities}));case 65:return p.next=67,Ie({conversationId:r,messages:h,requestIds:B.result,more:{isFakingSource:c,isRedirect:!!f,isCancelable:!!n}});case 67:case"end":return p.stop()}}),U)}function Te(){var e,t;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(S.select)(x.messageIdsHashSelector);case 2:return e=n.sent,t=[],Object.entries(e).forEach((function(e){var n=a()(e,2),r=n[0],s=n[1].sending||[];s.length&&t.push(Object(S.put)(Ae({conversationId:r,requestIds:s})))})),n.next=7,Object(S.all)(t);case 7:case"end":return n.stop()}}),q)}function je(e){var t,n,r;return p.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.id,r=t.conversationId,s.next=3,Object(S.put)(Ee({id:n,conversationId:r}));case 3:return s.next=5,Object(S.put)(Object(x.deleteRecord)({name:"messages",id:n}));case 5:case"end":return s.stop()}}),F)}function Be(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.takeEveryWithCancel)(de,Me,Ee);case 2:case"end":return e.stop()}}),L)}function ke(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.takeEvery)(me,je);case 2:return e.next=4,Object(S.takeEvery)(ve,_e);case 4:return e.next=6,Object(S.takeLatest)(ge,Te);case 6:case"end":return e.stop()}}),H)}t.d=(s={},l()(s,fe,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,o=n.isCancelable,a=e.messageIdsHash,i=a[r]||{},c=i.sending||[];c=o?c.concat(s):c;var u=i.all||[],d=i.failed||[];return z(z({},e),{},{messageIdsHash:z(z({},a),{},l()({},r,z(z({},i),{},{all:s.reverse().filter((function(e){return!u.includes(e)})).concat(u),failed:d.filter((function(e){return!s.includes(e)})),sending:c})))})})),l()(s,he,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,o=e.messageIdsHash,a=o[r]||{},i=a.sending||[],c=a.all||[],u=a.failed||[],d=s.filter((function(e){return c.includes(e)&&!u.includes(e)}));return z(z({},e),{},{messageIdsHash:z(z({},o),{},l()({},r,z(z({},a),{},{sending:i.concat(d)})))})})),l()(s,pe,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIdToMessageId,o=e.messageIdsHash,a=o[r]||{},i=(a.all||[]).map((function(e){return s[e]?s[e]:e})),c=a.sending||[];return z(z({},e),{},{messageIdsHash:z(z({},o),{},l()({},r,z(z({},a),{},{all:i,offset:i[i.length-1],sending:c.filter((function(e){return!s.hasOwnProperty(e)}))})))})})),l()(s,Ae,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,o=e.messageIdsHash,a=o[r]||{},i=a.failed||[],c=a.sending||[];return z(z({},e),{},{messageIdsHash:z(z({},o),{},l()({},r,z(z({},a),{},{sending:c.filter((function(e){return!s.includes(e)})),failed:i.concat(s)})))})})),l()(s,Ee,(function(e,t){var n=t.payload,r=n.id,s=n.conversationId,o=e.messageIdsHash,a=o[s]||{},i=a.all||[],c=a.sending||[];return z(z({},e),{},{messageIdsHash:z(z({},o),{},l()({},s,z(z({},a),{},{all:i.filter((function(e){return e!==r})),sending:c.filter((function(e){return e!==r}))})))})})),s)}).call(this,n(21).t,n(125))},function(e,t,n){"use strict";n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return S})),n.d(t,"b",(function(){return x})),n.d(t,"e",(function(){return T})),n.d(t,"h",(function(){return j})),n.d(t,"f",(function(){return R})),n.d(t,"g",(function(){return P}));var r,s,o=n(4),a=n.n(o),i=n(5),c=n.n(i),u=n(3),l=n(11),d=n(1),p=n(18);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=c.a.mark(j),g=c.a.mark(B),m=c.a.mark(k),E=c.a.mark(R),v=c.a.mark(P),b=function(e){return e?e/3*1e3:8e3},_=function(e){return e.startsWith("http:")?e.replace("http:","https:"):e},y=Object(l.createActions)((r={},a()(r,p.a.UPDATE_VIDEO_INFO,(function(e){var t=e.id,n=e.info;return{id:t,info:void 0===n?{}:n}})),a()(r,p.a.DELETE_VIDEO_INFO,(function(e){return{id:e.id}})),r)),S=y.updateVideoInfo,x=y.deleteVideoInfo,C="get_config_error",O="upload_error",w="report_upload_error",I="push_timeout",M="query_result_error";function T(e,t){Object(d.fetch)({method:"POST",subServer:"coreapi",parent:"video",resource:"monitor",payload:JSON.stringify({step:e,reason:t})}).catch((function(){return{}}))}function j(e,t){var n,r,s,o;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(u.call)(d.fetch,{method:"POST",subServer:"coreapi",parent:"video",resource:"preupload",payload:JSON.stringify({conversation_id:e,shop_id:t})});case 3:if(n=a.sent,r=n.is_allowed,s=n.data,o=void 0===s?{}:s,r){a.next=11;break}return a.next=10,Object(u.call)(T,C,"Not Allowed");case 10:return a.abrupt("return",null);case 11:return a.abrupt("return",o);case 14:return a.prev=14,a.t0=a.catch(0),a.next=18,Object(u.call)(T,C);case 18:return a.abrupt("return",!1);case 19:case"end":return a.stop()}}),A,null,[[0,14]])}function B(e){var t,r,s,o,a,i,u,l,p,f,h,A,m,E,v,b;return c.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=performance.now(),r=e.file,s=e.uploadId,o=e.onProgress,a=e.serviceId,i=e.token,u=e.domain,l=e.uploadDomain,p=e.sliceSize,f=e.bucket,c.next=4,Promise.resolve().then(n.t.bind(null,249,7));case 4:return h=c.sent,A=h.default,m=h.UploaderEvents,E=h.MediaType,v=new A({authorization:i,serviceID:a,uploadDomain:_(l),domain:_(u),vid:s,sliceSize:p,bucket:f}),c.next=11,v.upload({mediaFile:r,mediaType:E.video});case 11:return(b=c.sent).on(m.mediaProgress,(function(e){return o(.95*e.percent*100)})),c.next=15,b.done().then((function(e){var n=performance.now();return Object(d.collectAsyncTask)(d.ReportPoint.VIDEO_UPLOAD,n-t),{error:!1,data:e}})).catch((function(){return T(O),!1}));case 15:return c.abrupt("return",c.sent);case 16:case"end":return c.stop()}}),g)}function k(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u.call)(d.fetch,{method:"POST",subServer:"coreapi",parent:"video",resource:"report_upload",payload:JSON.stringify(e)});case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t.catch(0),t.next=10,Object(u.call)(T,w);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),m,null,[[0,6]])}function R(e){var t;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(u.call)(d.fetch,{subServer:"coreapi",parent:"video",resource:"upload_status",params:{vid:e}});case 3:return t=n.sent,n.abrupt("return",t);case 7:return n.prev=7,n.t0=n.catch(0),n.next=11,Object(u.call)(T,M);case 11:return n.abrupt("return",{});case 12:case"end":return n.stop()}}),E,null,[[0,7]])}var N=function(e){var t=e.video,n=e.thumbnail,r=e.duration;return{video_url:t,thumb_url:n,thumb_width:e.width,thumb_height:e.height,duration_seconds:Math.ceil(r/1e3)}};function P(e){var t,n,r,s,o,a,i,l,p,f,h,A,g,m,E,_,y,x,C,O,w,j,P,D,U,q,F,L;return c.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=new Error("upload fail"),n=e.id,r=e.file,s=e.duration,o=e.onProgress,a=void 0===o?function(){return{}}:o,c.next=4,Object(u.select)(Object(d.selectVideoInfoByKey)(n));case 4:return i=c.sent,p=(l=i||{}).vid,f=l.services,h=f.find((function(e){return"txcloud"===e.service_id}))||f[0],A=h.service_id,g=h.token,m=h.upload_domain,E=h.domain,_=h.bucket,y=h.slice_size,c.next=10,Object(u.call)(B,{file:r,uploadId:p,serviceId:A,token:g,domain:E,bucket:_,sliceSize:y,uploadDomain:m,onProgress:a});case 10:if(x=c.sent){c.next=13;break}throw t;case 13:if(C="txcloud"===A,O=x.data.video,w=O.md5,j=O.extendId,P=O.url,!C||P){c.next=17;break}throw t;case 17:return c.next=19,Object(u.call)(k,{vid:p,md5:w,service_id:A,extend_id:j,file_size:r.size,video_url:P||"".concat(E,"/").concat(p,".ori.mp4")});case 19:if(c.sent){c.next=22;break}throw t;case 22:return c.next=24,Object(u.delay)(b(s));case 24:D=180;case 25:if(!(D>0)){c.next=58;break}return c.next=28,Object(u.select)(Object(d.selectVideoInfoByKey)(n));case 28:if("successful"!==(i=c.sent).status){c.next=31;break}return c.abrupt("return",N(i.uploadResult));case 31:if("failed"!==i.status){c.next=35;break}return c.next=34,Object(u.call)(T,M,"failed");case 34:throw t;case 35:return c.next=37,Object(u.call)(R,p);case 37:if(U=c.sent,(q=U.status)&&"reported"!==q){c.next=45;break}return c.next=42,Object(u.delay)(3e3);case 42:D-=3,c.next=56;break;case 45:return c.next=47,Object(u.put)(S({id:n,info:{status:q}}));case 47:if("successful"!==q){c.next=53;break}return(F=performance.getEntriesByName("REPORT_UPLOAD_".concat(p),"mark")[0])&&(performance.mark("SERVICE_DONE_".concat(p)),L=performance.getEntriesByName("SERVICE_DONE_".concat(p))[0].startTime-F.startTime,performance.clearMarks("REPORT_UPLOAD_".concat(p)),performance.clearMarks("SERVICE_DONE_".concat(p)),Object(d.collectAsyncTask)(d.ReportPoint.SERVICE_DONE,L)),c.abrupt("return",N(U));case 53:return c.next=55,Object(u.call)(T,M,q);case 55:throw t;case 56:c.next=25;break;case 58:return c.next=60,Object(u.call)(T,I,status);case 60:throw t;case 61:case"end":return c.stop()}}),v)}t.a=(s={},a()(s,p.a.UPDATE_VIDEO_INFO,(function(e,t){var n=t.payload,r=n.id,s=n.info,o=e.videoMap[r]||{};return h(h({},e),{},{videoMap:h(h({},e.videoMap),{},a()({},r,h(h({},o),s)))})})),a()(s,p.a.DELETE_VIDEO_INFO,(function(e,t){var n=t.payload.id,r=e.videoMap;return delete r[n],h(h({},e),{},{videoMap:h({},r)})})),s)},,function(e,t){e.exports=p},,,function(e,t,n){"use strict";n.d(t,"c",(function(){return O})),n.d(t,"f",(function(){return w})),n.d(t,"g",(function(){return I})),n.d(t,"h",(function(){return M})),n.d(t,"b",(function(){return T})),n.d(t,"e",(function(){return P})),n.d(t,"d",(function(){return D})),n.d(t,"i",(function(){return U}));var r,s=n(25),o=n.n(s),a=n(4),i=n.n(a),c=n(5),u=n.n(c),l=n(11),d=n(3),p=n(1),f=n(29),h=n(71),A=n(2),g=u.a.mark(B),m=u.a.mark(k),E=u.a.mark(R),v=u.a.mark(N),b=u.a.mark(P),_=u.a.mark(D),y=u.a.mark(U);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=Object(l.createActions)({FETCH_MESSAGES_REQUESTED:function(e){return{conversation:e.conversation,reset:e.reset,direction:e.direction,messageId:e.messageId,cachedLatestId:e.cachedLatestId,cachedOldestId:e.cachedOldestId,source:e.source,isPreload:e.isPreload,messageList:e.messageList}},FETCH_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,messageIds:e.messageIds,limit:e.limit,persist:e.persist,status:e.status,messageRequestIds:e.messageRequestIds,direction:e.direction,reset:e.reset,cachedOldestId:e.cachedOldestId}},UPDATE_FETCH_MESSAGES_REQUESTED_STATUS:function(e){return{status:e.status}},UPDATE_PRELOADED_MESSAGES:function(e){return{conversationId:e.conversationId,key:e.key,payload:e.payload}},DELETE_PRELOADED_MESSAGES:function(e){return{conversationId:e.conversationId,key:e.key}}}),O=C.fetchMessagesRequested,w=C.fetchMessagesSucceeded,I=C.updateFetchMessagesRequestedStatus,M=C.updatePreloadedMessages,T=C.deletePreloadedMessages,j=function(e){var t=e.conversationId,n=e.shopId,r=e.offset,s=e.limit,o=void 0===s?20:s,a=e.direction,i=void 0===a?"older":a,c=(e.source,{shop_id:n,offset:r,limit:"around"===i?Math.ceil(o/2):o,direction:i});return new Promise((function(e,n){Object(p.fetch)({parent:"conversations",parentId:t,resource:"messages",params:c}).then((function(t){var n=t.messages,r=void 0===n?[]:n;Object(h.a)(r),e({messages:r,limit:o})})).catch((function(e){n(e)}))}))};function B(e){var t,n,r,s;return u.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.next=3,Object(d.call)(D,{payload:x(x({},t),{},{isPreload:!0,reset:!1,direction:"older"})});case 3:if(!(n=o.sent)){o.next=11;break}return r=t.conversation.id,o.next=8,Object(d.call)(k,r);case 8:return s=o.sent,o.next=11,Object(d.put)(M({conversationId:r,key:s,payload:n}));case 11:case"end":return o.stop()}}),g)}function k(e){var t,n,r;return u.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(d.select)((function(e){return e.messageReducer}));case 2:return t=s.sent,n=t.messageIdsHash,r=n[e]||{},s.abrupt("return",r.oldestMessageId);case 6:case"end":return s.stop()}}),m)}function R(e){var t,n,r;return u.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(d.select)((function(e){return e.messageReducer}));case 2:return t=s.sent,n=t.messageIdsHash,r=n[e]||{},s.abrupt("return",r.preloaded||{});case 6:case"end":return s.stop()}}),E)}function N(e){var t,n,r,s;return u.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!e.reset||"around"===e.direction){o.next=8;break}return o.next=3,Object(d.select)((function(e){return e.messageReducer}));case 3:return t=o.sent,n=t.messageIdsHash,r=e.conversation.id,s=n[r]||{},o.abrupt("return",0===(s.all||[]).length);case 8:return o.abrupt("return","older"===e.direction);case 9:case"end":return o.stop()}}),v)}function P(e){var t,n,r,s,o;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,N(t);case 3:if(!a.sent){a.next=31;break}return n=null,r=t.conversation.id,a.next=9,Object(d.call)(k,r);case 9:if(!(s=a.sent)){a.next=15;break}return a.next=13,Object(d.call)(R,r);case 13:o=a.sent,n=o[s];case 15:if(!n){a.next=22;break}return a.next=18,Object(d.put)(w(n));case 18:return a.next=20,Object(d.put)(T({conversationId:r,key:s}));case 20:a.next=27;break;case 22:return a.next=24,Object(d.call)(D,{payload:t});case 24:if(a.sent){a.next=27;break}return a.abrupt("return");case 27:return a.next=29,Object(d.fork)(B,{payload:t});case 29:a.next=33;break;case 31:return a.next=33,Object(d.call)(D,{payload:t});case 33:case"end":return a.stop()}}),b)}function D(e){var t,n,r,s,a,i,c,l,h,g,m,E,v,b,y,S,x,C,M,T,B,k,R,N,P,D,U,q,F,L,H,G,z,W;return u.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,n=t.conversation,r=t.reset,s=t.direction,a=t.messageId,i=t.cachedOldestId,c=t.cachedLatestId,l=t.source,h=t.isPreload,g=t.isPopulateSync,m=t.messageList,u.prev=1,u.next=4,Object(d.select)((function(e){return e.conversationReducer}));case 4:return E=u.sent,v=E.persist,u.next=8,Object(d.select)(p.currentUserShopIdSelector);case 8:return b=u.sent,u.next=11,Object(d.select)(p.isSubAccountSelector);case 11:return y=u.sent,S=n.id,x=n.shop_id,u.next=15,Object(d.select)((function(e){return e.messageReducer}));case 15:if(C=u.sent,M=C.messageIdsHash,T=M[S]||{},!r||"around"===s){u.next=25;break}B=0,s="older",k=!0,i=T.oldestMessageId,u.next=38;break;case 25:u.t0=s,u.next="older"===u.t0?28:"latest"===u.t0?31:"around"===u.t0?34:37;break;case 28:return B=T.oldestMessageId,k=T.hasMoreOlderMessage,u.abrupt("break",38);case 31:return B=T.latestMessageId,k=T.hasMoreLatestMessage,u.abrupt("break",38);case 34:return B=a,k=!0,u.abrupt("break",38);case 37:return u.abrupt("break",38);case 38:if(k){u.next=46;break}return u.next=41,Object(d.select)(p.messageHttpStatusSelector);case 41:if(!u.sent.includes("failed")){u.next=45;break}return u.next=45,Object(d.put)(I({status:A.DataFetchStatus.SUCCEED}));case 45:return u.abrupt("return");case 46:if(h){u.next=49;break}return u.next=49,Object(d.put)(I({status:r||"around"===s?A.DataFetchStatus.INIT_PENDING:A.DataFetchStatus.PENDING}));case 49:if(!m||!m.length){u.next=54;break}R=m,N=20,u.next=59;break;case 54:return u.next=56,Object(d.call)(j,{conversationId:S,shopId:x,offset:B,direction:s,source:l});case 56:P=u.sent,R=P.messages,N=P.limit;case 59:return R.sort((function(e,t){return t.id-e.id})),D=R.map((function(e){return e.id})),U=o()(R),R.forEach((function(e){var t=e.quoted_msg;if(t){if(U.some((function(e){return e.id===t.id})))return;U=[].concat(o()(U),[t])}})),u.next=65,Object(d.call)(f.f,U,b,y,g);case 65:return u.next=67,Object(d.select)(p.messagesWithSourceSelector);case 67:return q=u.sent,u.next=70,Object(d.call)(p.updateOrReplaceAction,q,R,"messages",["content"]);case 70:if(F=new Map,L=R.reduce((function(e,t){var n=t.request_id,r=t.id;return e.has(n)||e.set(n,r),e}),F),H={reset:r,limit:N,direction:s,messageIds:D,conversationId:S,persist:v,status:A.DataFetchStatus.SUCCEED,messageRequestIds:L},G=!1,(z=c||(T.all||[])[0])&&(r||c)&&(W=D[D.length-1]||B,z&&Object(A.greaterThan)(W,z)?(G=!0,c=c||z):H.cachedOldestId=i),h){u.next=79;break}return u.next=79,Object(d.put)(w(H));case 79:if(!G){u.next=82;break}return u.next=82,Object(d.put)(O({direction:"older",conversation:n,cachedLatestId:c,cachedOldestId:i||0}));case 82:return("around"===s||m&&m.length)&&a&&p.EventBus.emit("scrollToMessage",a),u.abrupt("return",H);case 86:if(u.prev=86,u.t1=u.catch(1),h){u.next=91;break}return u.next=91,Object(d.put)(I({status:r?A.DataFetchStatus.INIT_FAILED:A.DataFetchStatus.FAILED}));case 91:case"end":return u.stop()}}),_,null,[[1,86]])}function U(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.takeEvery)(O,P);case 2:case"end":return e.stop()}}),y)}t.a=(r={},i()(r,w,(function(e,t){var n=t.payload,r=n.limit,s=n.status,o=n.conversationId,a=n.messageIds,c=n.persist,u=n.messageRequestIds,l=n.direction,d=n.reset,p=n.cachedOldestId,h=e.messageIdsHash,A=h[o]||{},g={};switch(l){case"older":g.oldestMessageId=p||a[a.length-1],g.hasMoreOlderMessage=a.length>=r;break;case"latest":g.latestMessageId=a[0],g.hasMoreLatestMessage=a.length>=r;break;case"around":g.oldestMessageId=a[a.length-1],g.latestMessageId=a[0],g.hasMoreOlderMessage=!0,g.hasMoreLatestMessage=!0,A={}}d&&"around"!==l&&(g.hasMoreLatestMessage=!1);var m=(A.all||[]).map((function(e){return u.has(e)?u.get(e):e})),E=A.failed||[];return x(x({},e),{},{status:s,messageIdsHash:x(x({},h),{},i()({},o,x(x({},A),{},{all:Object(f.d)(m,a),failed:E.filter((function(e){return!u.has(e)}))},g))),persist:c})})),i()(r,I,(function(e,t){var n=t.payload.status;return x(x({},e),{},{status:n})})),i()(r,M,(function(e,t){var n=t.payload,r=n.conversationId,s=n.key,o=n.payload,a=e.messageIdsHash,c=a[r]||{},u=c.preloaded||{};return x(x({},e),{},{messageIdsHash:x(x({},a),{},i()({},r,x(x({},c),{},{preloaded:x(x({},u),{},i()({},s,o))})))})})),i()(r,T,(function(e,t){var n=t.payload,r=n.conversationId,s=n.key,o=e.messageIdsHash,a=o[r]||{},c=a.preloaded||{};return c[s]?x(x({},e),{},{messageIdsHash:x(x({},o),{},i()({},r,x(x({},a),{},{preloaded:x(x({},c),{},i()({},s,null))})))}):e})),r)},function(e,t){e.exports=f},,function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),s=n.n(r).a.createContext({});s.displayName="ImgCacheContext"},function(e,t,n){var r=n(19),s=n(232);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},,function(e,t,n){var r=n(50);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(120);e.exports=function(e,t){if(null==e)return{};var n,s,o=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAMAAAAJixmgAAABIFBMVEUAAADr7vnt8Prt8Pnt8fvt8fvt8PvEpaPs8Prt8fvt8Pvo7Pbo7fjr7/nn7Pfs7/rv8f3h5fDg5PDi5/Hn6/To6/Te4+7s7/np7fni5vHo7Pjm6vfk6fbf4/De4/Dc4O3d4u3i5/TZ3uvP1OHZ3ura3urvWz7y9f7/gmrW2ufvWz7Y3enxXUDW2uj4bVLyYET/g2vvWz7xXkL+eF70ZUn2Zkr+d13w8/zj5/Dm6vTj5vH3a0//gGf5blP4bVHN09/L0N3y9f7S1+Po7PbX2+fl6fPw8vvP1OHr7vfd4eza3+rs7/ng5e/u8Pre4u3U2eXv8/zj5/Hi5vH////Y3enl5/LwWz7yYUX09fn2Z0z/f2f5bVL8c1n4+fv/eV/u8Pak0IEiAAAAP3RSTlMABwwZEhYkBSAQHAQzLzcrJ0JKPi4pRx86Oj5CRlRQWE1PXe3Lp+rn6djDsJNrD6aLg/PHWSXwh4Ht37uejXhSf/O8AAAHjUlEQVR42uzWS2oDMRBF0TfTMkImctMI9z8T24FsokXbJvtfRqwWxJ+JZzao7tnBpSiqBAAAAAAAAAAAAAAAAABPuLaqWic72uNFKzuqFFzJjOk3+ZIZ4zkZZMbhlBxkxm5JRpnRx7jEOMmKKSa9zBjnpNat7b7gVySswd1d73C82KtM9Ro83vUWfZn7NXjSPzecV6UG+9Trb3p3p+xbZQoPK9wsWVChXOd95669MWtkQ5gzK73dnNWlHuFH3liv+ty7lRXhfb0fm58X2nxq5YL3zXvm+8eeHewmCwQBHB9YNEqXGq1iuPkqXwhkjUiKpIkX0vd/i8+NG6sG1llbBlb9zUUOHv4ZwmXIelUxdO0fMaCgD/6knD4Ea702/Nrwa8P933BKONTB7ohPw1U45SP3GV7pQbT6ETGQPokBHTeaXYrkllNiQIaFs2she+BgP6yzfNhgFtZjqZ6twe60SZpu6YYumGuCtSzd8OCj0ZYYtMzxGBu4/FmCWRDdstWzKtgN3m/b6tkUPOAYG2LQmnGAstGzJ9iZzFE2evYE+xOcjZ41wc4CSRCDlnhDJCHEhm7aC2YjJKFnzYb9JZLQsycYS+hZE8ywhJ41wd4AKSYGLXE9pFjPmmBnjBTrWRMMLlKsZ0+w82zB4ODECenE0B5ksJ5FGwZ4cxASYtCqt9uSJCYd6FqiZ9mGexwsL9Wz1Uxdqps9SPD1pbrZQwTXXarJJElxx5wY/7HxUk3l6y5pVUqp+DLVfKkmUtzhuzyp4sJM46Xah1p9CE7Lc9+FEXfaxAUSO2Oy96J4VyO7tlN4YzCHOt0HJ+W1RBd7Hf3RjEGN7oP3p70m6meKqVV0wWrFLpMnbWhLZqg4RsaZVJVSlRmINMYAbz4//uZq350Hi1LaHx/U59o0+L3BCDz+8xSM4aDz4H0pCVV/HpyjcI25zy8MAKAnwcn5hiuVmyEmDwJ+GCQPoPPgC9Xp/Za5KHMpOAyKA38u/wX1lRa5gcn8MGjLNoKze0f1VrmJhRmnPxsuqvKoWJsYDhenQfD6E6x6q93ayOjM8Paw3gSr93mfr+8KVpa3+PDX/nNXvz9pA3Ecx48KgkxnFIZTBB1gFkP2eG5Prr1eKXeUNjCW7Nn+//9idz1+iPZKvx3Iyes0NkJi3n5aZflMVe+QQVVXrqqbGROs/gP/FVccdNgRkCnB6o6OeyHAwSWjgv9wuBKMtYNgnuPkDy7CFMxYmM+/5HACYqGt42/MAimYEuz+inE4aK9ZwTO4AoDsfT/BfOqOBo4wcqcsXzASzAqmWsHQeW404VQpxz5kgHZjlsuG4GDgvPJ7HqwBrM2P5pIazEdOkjGjAgIyJDhN6OhMqQgua46G+cFTZ27ghVzuHXpjZ847wIUDRxkyusLdZTEqwzY2PTicr8uidYvneoKADAmONIeqLJdGr3hOrAmc2JBgHbWjFyVRD/fXEwRiRHCkE6p9SbLfjvR9zxNTGsGPztgRxhEhUeIZxi8fIRiDF1YDc5GWjA4MmDjKgWi46obWm8RPMajLhGDdHUsH0ozoRQMJ9IfaiGDNxEzWDEkabyB8R/tEtmciawKShg2E3l4XJiQCHw1vLHBCfP2hY+ErAjF34eFIoCTVSLIAExsfTFIXVu+pouxMCNbGSMRP5Q6FyoEs7GYNPpSFvQzBQ8lCe5yYEB96dKauQP00xBV+IBADFtZgrsD8NDNX6KHyYSxMPWGC0wSe8IRAzF2YeFKE9dQ7rtE+J/a3B4eeEGI95gk/EYTRwZGaeMPAT6j8zhbGWuFECPzUl38UEYTZwdFUYjgZn0pP6N0tnFLMAonjJDSQflpov/AW2RiHgcTk9frBsyDWL8MWNjpYIGGMkZffZ+HcAyzJ8GBbFCuc4PnMMpeGwqr4YBa2BcIWKJFPu08oZ2tAG5sRbCcfVexzlozPlsXZJzYjWMeOYSriXh+KMTVgY6wF33iZ7FP+EiXxr4IrD4eysPhQ/Gg917elVXE/a5cpwfZmmBAqEaJqlR5V+vtb2M5zcvv2uCiulCz05gpFnJOdU2dZ3PvW6bQbtbNP1WIBIejC8NKr8+tGq9PJuXD+4GfFnaVW4/r8SnTvQqF0fHrRvlvAbzyx+JGdx0jpde7WtS9Oj0tbzC5W6rX71rrcC0OLu3asJayK71oJ7mv1ShH9J6tar7W/JLB3qbv8XGpLd49E6bcTfJHatXrVyjvs8cfbSx0bAFqb5DLW7pFY9zLV7cdj6NQnldPmbRr7jTWU+54KFpe36ZqnlROUTeGoftPcxN6Jru7mti/mLuPiB3HV3OymflTYWFs9u8mia++UCl3pXiw0+t2u7L3J6Kya0vyhdP45o3/t3U0OgkAMhuFSRkUGhUQN7llzB+9/KoOTKCFE4/9k+j5dddl8m26a9t3ph7p+N3F8Qr3w8+G21TZRVZvNPc1KWqGTdDfJG6fs6mjsH6tf5STwZROTw33NG0of5l2acZk4LwzJRbSMUzvUyNB/gIrLTXGyMEacMaJrU1RETRERr4aEzSMzw0uQGSFX3gRBJFa3+vtlOL6MbAEAAAAAAAAAAAAAAID0nAFUiEuaAG9VMQAAAABJRU5ErkJggg=="},function(e,t){e.exports=h},,function(e,t,n){var r=n(19),s=n(233);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(19),s=n(245);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},,,function(e,t,n){var r=n(19),s=n(231);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(19),s=n(239);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(19),s=n(246);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,o=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){i=!0,s=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw s}}return o}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},,function(e,t,n){"use strict";(function(e){var r=n(0),s=n.n(r),o=n(70),a=n.n(o),i=n(7),c=n(2),u=n(52),l=function(t){var n=Object(r.useRef)(null),o=Object(r.useRef)(0),l=Object(c.throttle)((function(e){var r=t.loadMoreOffset,s=t.onLoadMore,a=t.onScroll,i=t.status,u=n.current,l=u.scrollHeight,d=u.scrollTop,p=u.clientHeight;if(i===c.DataFetchStatus.PENDING)return!1;l-d-p<=r&&o.current<d&&s&&s(),o.current=d,a&&a()}),200),d=t.listData,p=t.makeItem,f=t.status,h=t.emptyImage,A=t.emptyText,g=t.emptyClassName;return s.a.createElement("div",{className:a.a.root,onScroll:l,ref:n},f===c.DataFetchStatus.SUCCEED||f===c.DataFetchStatus.PENDING||f===c.DataFetchStatus.FAILED?d.length>0?d.map((function(e,t){return p(e,t)})):s.a.createElement(i.Empty,{classname:g||a.a.empty,image:h||u.a,text:A||e("common.scroll_list.no_data")}):"")};l.defaultProps={loadMoreOffset:10,emptyImage:u.a},t.a=Object(i.CatchStatus)(l)}).call(this,n(21).t)},function(e,t){e.exports=A},function(e,t,n){"use strict";n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return m}));var r=n(4),s=n.n(r),o=n(5),a=n.n(o),i=n(11),c=n(3),u=n(2),l=n(1),d=n(37),p=n(18),f=a.a.mark(g),h=a.a.mark(m),A=Object(i.createActions)(s()({},p.a.RESEND_MESSAGE_REQUESTED,(function(e){var t=e.conversationId,n=e.conversationStatus;return{conversationId:t,conversationStatus:void 0===n?"":n,message:e.message}}))).resendMessageRequested;function g(e){var t,n,r,s,o,i,p;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.payload,n=t.conversationId,r=t.conversationStatus,s=t.message,"closed"!==r){a.next=5;break}return a.next=4,Object(c.call)(l.setToastInformationSaga,Object(l.setToastInformation)({type:"conversation-closed-tip"}));case 4:return a.abrupt("return");case 5:if(o=s.type,i=s.content,p=s.to_id,o!==u.MessageTypes.MSG_TYPE_VIDEO||i.video_url){a.next=10;break}return a.next=9,Object(c.put)(Object(d.k)({conversationId:n,conversationUserId:p,message:s,isResend:!0}));case 9:return a.abrupt("return");case 10:return a.next=12,Object(c.put)(Object(d.h)({conversationId:n,conversationUserId:p,messages:[s],more:{isResend:!0}}));case 12:case"end":return a.stop()}}),f)}function m(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.takeEvery)(A,g);case 2:case"end":return e.stop()}}),h)}},function(e,t,n){"use strict";n.d(t,"e",(function(){return w})),n.d(t,"d",(function(){return I})),n.d(t,"b",(function(){return M})),n.d(t,"c",(function(){return T})),n.d(t,"f",(function(){return B})),n.d(t,"g",(function(){return k}));var r,s,o=n(25),a=n.n(o),i=n(22),c=n.n(i),u=n(4),l=n.n(u),d=n(5),p=n.n(d),f=n(11),h=n(3),A=n(27),g=n(37),m=n(1),E=n(18);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=p.a.mark(j),y=p.a.mark(B),S=p.a.mark(k);function x(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=Object(f.createActions)((r={},l()(r,E.a.SEND_MESSAGES_FAILED_BY_OFFLINE,(function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}})),l()(r,E.a.RESET_MESSAGES_FAILED_BY_OFFLINE,(function(){return{}})),l()(r,E.a.RESEND_OFFLINE_MESSAGES_ONCE,(function(){return{}})),l()(r,E.a.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED,(function(e){return{conversationId:e.conversationId,messageIds:e.messageIds}})),r)),w=O.sendMessagesFailedByOffline,I=O.resetMessagesFailedByOffline,M=O.resendOfflineMessagesOnce,T=O.resendOfflineMessagesOnceSucceed;function j(){var e,t,n,r,s,o,a,i,u;return p.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Object(h.select)(m.offlineMessagesSelector);case 2:e=l.sent,t=Object.entries(e),n=[],r=p.a.mark((function e(){var t,r,a,i,u,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o[s],r=c()(t,2),a=r[0],i=r[1],e.next=4,Object(h.select)(Object(m.getMessagesSelector)(i));case 4:u=e.sent,l=i.map((function(e,t){return{conversationId:a,requestIds:[e],messages:[u[t]]}})).filter((function(e){return e.messages[0]})),n=n.concat(l);case 7:case"end":return e.stop()}}),e)})),s=0,o=t;case 7:if(!(s<o.length)){l.next=12;break}return l.delegateYield(r(),"t0",9);case 9:s++,l.next=7;break;case 12:a=x(n),l.prev=13,a.s();case 15:if((i=a.n()).done){l.next=23;break}return u=i.value,l.next=19,Object(g.f)(u);case 19:return l.next=21,Object(h.delay)(400);case 21:l.next=15;break;case 23:l.next=28;break;case 25:l.prev=25,l.t1=l.catch(13),a.e(l.t1);case 28:return l.prev=28,a.f(),l.finish(28);case 31:return l.next=33,Object(h.put)(I());case 33:case"end":return l.stop()}}),_,null,[[13,25,28,31]])}function B(e){var t,n;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.conversationId,n=e.messageIds,r.next=3,Object(h.put)(T({conversationId:t,messageIds:n}));case 3:case"end":return r.stop()}}),y)}function k(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.takeEvery)(M,j);case 2:case"end":return e.stop()}}),S)}window.addEventListener("judge-online",(function(){A.store.dispatch(M())})),t.a=(s={},l()(s,E.a.SEND_MESSAGES_FAILED_BY_OFFLINE,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,o=e.offlineMessages,i=(o[r]||[]).concat(s);return b(b({},e),{},{offlineMessages:b(b({},o),{},l()({},r,a()(new Set(i))))})})),l()(s,E.a.RESET_MESSAGES_FAILED_BY_OFFLINE,(function(e){return b(b({},e),{},{offlineMessages:{}})})),l()(s,E.a.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED,(function(e,t){var n=t.payload,r=n.conversationId,s=n.messageIds,o=e.messageIdsHash,a=o[r]||{},i=(a.all||[]).filter((function(e){return!s.includes(e)})),c=(a.failed||[]).filter((function(e){return!s.includes(e)})),u=(a.sending||[]).filter((function(e){return!s.includes(e)}));return b(b({},e),{},{messageIdsHash:b(b({},o),{},l()({},r,b(b({},a),{},{all:i,failed:c,sending:u})))})})),s)},function(e,t,n){var r=n(19),s=n(126);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return A}));var r,s=n(4),o=n.n(s),a=n(1),i=n(2),c=i.MessageTypes.MSG_TYPE_ITEM_LIST,u=i.MessageTypes.MSG_TYPE_ADD_ON_DEAL,l=i.MessageTypes.MSG_TYPE_BUNDLE_DEAL,d=i.MessageTypes.MSG_TYPE_FLASH_SALE,p=(r={},o()(r,c,{listKey:"chat_product_infos",cleaner:a.itemListDetailCleaner}),o()(r,u,{listKey:"add_on_deal_item_list",cleaner:a.addOnDealItemDetailCleaner}),o()(r,l,{listKey:"bundle_deal_item_list",cleaner:a.bundleDealItemDetailCleaner}),o()(r,d,{listKey:"flash_sale_item",cleaner:a.flashSaleItemDetailCleaner}),r),f=[c,u,l,d],h=function(e){var t=e.type,n=e.content,r=e.country,s=n.shop_id;if(p[t]){var o=p[t],d=o.listKey,f=o.cleaner,h=e.content[d];e.content[d]=h.slice(0,i.MAX_SHOWING_ITEM_COUNT).map((function(e){return f(e,r,s)}))}if(t===c){var A=n.chat_product_infos;e.content.exceedMaxCount=A.length>i.MAX_SHOWING_ITEM_COUNT}else if(t===u){var g=n.add_on_deal_rule;e.content.add_on_deal_rule=Object(a.addOnDealRuleCleaner)(g,r)}else if(t===l){var m=n.bundle_rule;e.content.bundle_rule=Object(a.bundleDealRuleCleaner)(m,r)}},A=function(e){Array.isArray(e)?e.forEach((function(e){h(e)})):h(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var r=n(4),s=n.n(r),o=n(11),a=n(18);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=Object(o.createActions)(s()({},a.a.DELETE_CONVERSATION_MESSAGE_HASH,(function(e){return{conversationId:e.conversationId}}))).deleteConversationMessageHash;t.a=s()({},a.a.DELETE_CONVERSATION_MESSAGE_HASH,(function(e,t){var n=t.payload.conversationId,r=e.messageIdsHash;return delete r[n],c(c({},e),{},{messageIdsHash:c({},r)})}))},function(e,t,n){"use strict";var r=n(0),s=n.n(r),o=n(10),a=n(17),i=n(8),c=n(1),u=n(40),l=n.n(u),d=n(35),p=function(e){return l.a.put(d.default.claimVoucherRequested({payload:e}))},f={visitShopSellerCenterRequested:c.visitShopSellerCenterRequested};t.a=Object(a.a)(Object(o.connect)((function(e){return{locale:Object(c.localeSelector)(e),isSubAccount:Object(c.isSubAccountSelector)(e),shopAccess:Object(c.shopAccessSelector)(e)}}),f)((function(e){var t=e.isSend,n=e.visitShopSellerCenterRequested,r=e.isSubAccount,o=e.handleReload,a=e.measure,c=e.locale,u=e.message,l=e.shopAccess,d=e.track,f=l.hasViewVoucherAccess,h=u.content,A=u.textContent,g=u.id;return s.a.createElement(i.VoucherMessage,{content:h,textContent:A,isSend:t,visitShopSellerCenterRequested:n,claimVoucherRequested:p,isSubAccount:r,id:g,handleReload:o,measure:a,hasViewVoucherAccess:f,locale:c,track:d})})))},,function(e,t,n){var r=n(19),s=n(225);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(19),s=n(230);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(19),s=n(247);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,r)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},,function(e,t){e.exports=g},function(e,t){e.exports=m},function(e,t){e.exports=E},function(e,t){e.exports=v},function(e,t){e.exports=b},function(e,t){e.exports=_},function(e,t){e.exports=y},function(e,t,n){"use strict";(function(e){n.d(t,"i",(function(){return m})),n.d(t,"c",(function(){return E})),n.d(t,"e",(function(){return v})),n.d(t,"j",(function(){return b})),n.d(t,"d",(function(){return _})),n.d(t,"h",(function(){return y})),n.d(t,"g",(function(){return S})),n.d(t,"b",(function(){return x})),n.d(t,"f",(function(){return C})),n.d(t,"k",(function(){return I}));var r,s=n(4),o=n.n(s),a=n(5),i=n.n(a),c=n(11),u=n(1),l=n(3),d=n(43),p=n(2),f=i.a.mark(I);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=Object(c.createActions)({SET_REPLY_TO_MESSAGE:function(e){return{messageId:e.messageId}},RESET_REPLY_TO_MESSAGE:function(){return{}},SCROLL_TO_MESSAGE:function(e){return{messageId:e.messageId}},SET_SCROLL_TO_MESSAGE_ID:function(e){return{messageId:e.messageId}},RESET_SCROLL_TO_MESSAGE_ID:function(){},SET_IN_SCROLL_TO_MESSAGE:function(e){return{inScrollToMessage:e.inScrollToMessage}},SET_CURRENT_CONVERSATION_REPLY_TO_MESSAGE:function(e){return{messageId:e.messageId,currentConversationId:e.currentConversationId}},RESET_CURRENT_CONVERSATION_REPLY_TO_MESSAGE:function(e){return{currentConversationId:e.currentConversationId}}}),m=g.setReplyToMessage,E=g.resetReplyToMessage,v=g.scrollToMessage,b=g.setScrollToMessageId,_=g.resetScrollToMessageId,y=g.setInScrollToMessage,S=g.setCurrentConversationReplyToMessage,x=g.resetCurrentConversationReplyToMessage,C=i.a.mark((function t(n){var r,s,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.payload.messageId,t.next=3,Object(l.select)(u.messageIdsSelector);case 3:if(t.sent.all.includes(r)){t.next=14;break}return t.next=7,Object(l.select)(u.currentConversationSelector);case 7:return s=t.sent,t.next=10,Object(l.call)(d.d,{payload:{conversation:s,direction:"around",reset:!0,messageId:r,isPopulateSync:!0}});case 10:return t.next=12,Object(l.put)(y({inScrollToMessage:!0}));case 12:t.next=22;break;case 14:return t.next=16,Object(l.select)(Object(u.getMessageSelector)(r));case 16:if(o=t.sent,!Object(p.isDeletedMessage)(o)){t.next=21;break}return t.next=20,Object(l.call)(u.setToastInformationSaga,Object(u.setToastInformation)({toast:{show:!0,type:"fail",message:e("message.notfound")}}));case 20:return t.abrupt("return");case 21:u.EventBus.emit("scrollToMessage",r);case 22:return t.next=24,Object(l.put)(b({messageId:r}));case 24:return t.next=26,Object(l.delay)(1500);case 26:return t.next=28,Object(l.select)(u.scrollToMessageIdSelector);case 28:if(t.sent!==r){t.next=32;break}return t.next=32,Object(l.put)(_());case 32:case"end":return t.stop()}}),t)})),O=i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload.messageId,e.next=3,Object(l.select)(u.currentConversationIdSelector);case 3:return r=e.sent,e.next=6,Object(l.put)(S({currentConversationId:r,messageId:n}));case 6:case"end":return e.stop()}}),e)})),w=i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.select)(u.currentConversationIdSelector);case 2:return t=e.sent,e.next=5,Object(l.put)(x({currentConversationId:t}));case 5:case"end":return e.stop()}}),e)}));function I(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.takeEvery)(v,C);case 2:return e.next=4,Object(l.takeEvery)(E,w);case 4:return e.next=6,Object(l.takeEvery)(m,O);case 6:case"end":return e.stop()}}),f)}t.a=(r={},o()(r,S,(function(e,t){var n=t.payload,r=n.currentConversationId,s=void 0===r?"":r,a=n.messageId,i=void 0===a?"":a;return s&&i?A(A({},e),{},{reply:A(A({},e.reply),{},{toMessageId:A(A({},e.reply.toMessageId),{},o()({},s,i))})}):e})),o()(r,x,(function(e,t){var n=t.payload.currentConversationId,r=void 0===n?"":n;return r?A(A({},e),{},{reply:A(A({},e.reply),{},{toMessageId:A(A({},e.reply.toMessageId),{},o()({},r,""))})}):e})),o()(r,b,(function(e,t){return A(A({},e),{},{reply:A(A({},e.reply),{},{scrollToMessageId:t.payload.messageId})})})),o()(r,_,(function(e){return A(A({},e),{},{reply:A(A({},e.reply),{},{scrollToMessageId:""})})})),o()(r,y,(function(e,t){return A(A({},e),{},{reply:A(A({},e.reply),{},{inScrollToMessage:t.payload.inScrollToMessage})})})),r)}).call(this,n(21).t)},function(e,t,n){var r=n(240),s=n(241);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var i=0;i<16;++i)t[o+i]=a[i];return t||s(a)}},,function(e,t,n){var r=n(19),s=n(227);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(19),s=n(228);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(19),s=n(234);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(19),s=n(243);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return S})),n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return O})),n.d(t,"e",(function(){return P}));var r,s=n(4),o=n.n(s),a=n(5),i=n.n(a),c=n(11),u=n(27),l=n(3),d=n(2),p=n(1),f=n(18),h=i.a.mark(I),A=i.a.mark(j),g=i.a.mark(B),m=i.a.mark(R),E=i.a.mark(N),v=i.a.mark(P);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=Object(c.createActions)((r={},o()(r,f.a.TRANSLATE_MESSAGES_REQUESTED,(function(e){return{messageId:e.messageId,shopId:e.shopId,conversationId:e.conversationId,toggle:e.toggle,targetLang:e.targetLang,isClickTryagain:e.isClickTryagain,isSend:e.isSend}})),o()(r,f.a.CHANGE_TRANSLATE_STATUS,(function(e){return{messageId:e.messageId,status:e.status,changeMidStatus:e.changeMidStatus}})),o()(r,f.a.SHOW_TRANSLATE_FEEDBACK,(function(e){return{messageId:e.messageId,conversationId:e.conversationId,shopId:e.shopId,translationSource:e.translationSource,track:e.track}})),o()(r,f.a.SEND_TRANSLATE_FEEDBACK,(function(e){return{quality:e.quality,messageId:e.messageId,conversationId:e.conversationId,shopId:e.shopId,translationModel:e.translationModel,feedbacks:e.feedbacks,otherSuggestion:e.otherSuggestion}})),r)),S=y.translateMessagesRequested,x=y.changeTranslateStatus,C=y.showTranslateFeedback,O=y.sendTranslateFeedback,w=function(e,t){return Object(l.put)(Object(p.updateRecord)({name:"messages",id:e,record:t}))};function I(e,t,n,r,s,o,a){var c,u,l;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return c=a?d.TranslationStatus.SUCCEED:d.TranslationStatus.FAILED,u=n?{toggleTranslateStatus:c}:{translateStatus:c},l=a?_(_({},a),{},{target_language:r}):{text:"",target_language:r},i.next=5,w(e,_(_({},u),{},{content:{text:t,translation:n?s:l,mid:n?l:o}}));case 5:case"end":return i.stop()}}),h)}function M(e,t,n,r,s,o,a,i,c,u,l){var d={step2_target_language:c,step2_translation_status:!!u},f=e||t&&!o?_(_({},{step1_target_language:a,step1_translation_status:!!i}),d):d;Object(p.clickTracker)({trackerName:"translationTryAgain",data:_({message_id:n,conversation_id:r,message_type:0,is_sender:s,original_language:l},f)})}function T(e,t,n,r,s,o){var a=e||t&&!o?{step1_translation_status:!1,step2_translation_status:!1}:{step2_translation_status:!1};Object(p.clickTracker)({trackerName:"translationTryAgain",data:_({message_id:n,conversation_id:r,message_type:0,is_sender:s},a)})}function j(e){var t,n,r,s,o,a,c,u,f,h,g,m,E,v,b,y,S,x,C,O,j,k,R,N,P,D,U,q,F,L,H,G,z;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.messageId,r=t.shopId,s=t.conversationId,o=t.toggle,a=t.targetLang,c=t.isClickTryagain,u=t.isSend,i.next=3,Object(l.select)(Object(p.getMessageSelector)(n));case 3:if(i.t0=i.sent,i.t0){i.next=6;break}i.t0={};case 6:return f=i.t0,h=f.content||{},g=h.text,m=h.translation,E=h.mid,v=(E||{}).text,i.prev=9,b={},a&&o?b.toggleTranslateStatus=d.TranslationStatus.PENDING:b.translateStatus=d.TranslationStatus.PENDING,i.next=14,w(n,b);case 14:if(!o){i.next=19;break}if(!E||!E.text){i.next=19;break}return i.next=18,B({payload:{messageId:n,status:d.TranslationStatus.SUCCEED,changeMidStatus:!0}});case 18:return i.abrupt("return");case 19:return i.next=21,Object(l.call)(p.fetch,{method:"POST",resource:"messages",suffix:"retry_translate",payload:JSON.stringify({shop_id:r,message_id:n,conversation_id:s})});case 21:if(y=i.sent,x=(S=y||{}).translated,C=S.middle_translated,j=(O=x||{}).translated_text,k=O.target_language,R=O.source_language,P=(N=C||{}).translated_text,D=N.target_language,U=N.source_language,q=o?_(_({},C),{},{text:P}):_(_({},x),{},{text:j}),F=o?!!P:!!j,L=U||R,c&&M(o,a,n,s,u,v,D,P,k,j,L),!a){i.next=34;break}return i.next=32,I(n,g,o,a,m,E,F?q:void 0);case 32:i.next=39;break;case 34:return H=F?d.TranslationStatus.SUCCEED:d.TranslationStatus.FAILED,G={translateStatus:H},z=F?q:{text:"",source:""},i.next=39,w(n,_(_({},G),{},{content:{text:g,translation:z,mid:E}}));case 39:i.next=46;break;case 41:return i.prev=41,i.t1=i.catch(9),i.next=45,I(n,g,o,a,m,E);case 45:c&&T(o,a,n,s,u,v);case 46:case"end":return i.stop()}}),A,null,[[9,41]])}function B(e){var t,n,r,s,o;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.messageId,r=t.status,s=t.changeMidStatus,o=s?{toggleTranslateStatus:r}:{translateStatus:r},a.next=4,w(n,o);case 4:case"end":return a.stop()}}),g)}var k={shopee_en:"local_en",shopee_cn:"cn_en",shopee_kr:"kr_en"};function R(e){var t,n,r,s,o,a;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.messageId,r=t.conversationId,s=t.shopId,o=t.translationSource,a=t.track,i.next=3,Object(l.put)(Object(p.showModal)({type:"EVALUTE_MODAL",title:{key:"modal.translation_feedback.title"},actions:{cancel:{label:{key:"common.cancel"},shape:"default",handler:function(){u.store.dispatch(Object(p.closeModal)())}},confirm:{label:{key:"common.submit"},handler:function(e){u.store.dispatch(Object(p.closeModal)()),e.quality===d.TranslationFeedbackQuality.GOOD&&a("clickFeedbackGoodSubmit","click"),(e.feedbacks||e.otherSuggestion)&&a("clickFeedbackTellSubmit","click"),u.store.dispatch(O(_({messageId:n,conversationId:r,shopId:s,translationModel:k[o]},e)))}}},additions:{track:a}}));case 3:case"end":return i.stop()}}),m)}function N(t){var n,r,s,o,a,c,u,d,f,h,A;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.payload,r=n.quality,s=n.messageId,o=n.conversationId,a=n.shopId,c=n.translationModel,u=n.feedbacks,d=n.otherSuggestion,i.prev=1,i.next=4,Object(l.select)(Object(p.getMessageSelector)(s));case 4:if(i.t0=i.sent,i.t0){i.next=7;break}i.t0={};case 7:return f=i.t0,i.next=10,Object(l.select)(p.isSubAccountSelector);case 10:return h=i.sent,A={quality:r,message_id:s,conversation_id:o,translation_model:c,feedbacks:u,other_suggestion:d,to_shop_id:String(f.from_shop_id)},h&&(A.shop_id=a),i.next=15,Object(l.call)(p.fetch,{method:"POST",resource:"translation",suffix:"feedback",payload:JSON.stringify(A)});case 15:return i.next=17,Object(l.call)(p.setToastInformationSaga,Object(p.setToastInformation)({toast:{show:!0,type:"success",message:e("common.toast.translation_feedback")}}));case 17:i.next=21;break;case 19:i.prev=19,i.t1=i.catch(1);case 21:case"end":return i.stop()}}),E,null,[[1,19]])}function P(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.takeEvery)(S,j);case 2:return e.next=4,Object(l.takeEvery)(x,B);case 4:return e.next=6,Object(l.takeEvery)(C,R);case 6:return e.next=8,Object(l.takeEvery)(O,N);case 8:case"end":return e.stop()}}),v)}}).call(this,n(21).t)},function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return y}));var r=n(4),s=n.n(r),o=n(5),a=n.n(o),i=n(27),c=n(11),u=n(3),l=n(1),d=n(2);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=a.a.mark(b),A=a.a.mark(_),g=a.a.mark(y),m=Object(c.createActions)({DELETE_MESSAGE_REQUESTED:function(e){return{messageId:e.messageId,messageType:e.messageType,currentConversationId:e.currentConversationId}},DELETE_MESSAGE_POST_REQUESTED:function(e){return{messageId:e.messageId,messageType:e.messageType,currentConversationId:e.currentConversationId}}}),E=m.deleteMessageRequested,v=m.deleteMessagePostRequested;function b(t){var n,r,s,o;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.payload,r=n.messageId,s=n.messageType,o=n.currentConversationId,a.next=3,Object(u.put)(Object(l.showModal)({type:"CONFIRM_MODAL",title:{key:"message.delete.title"},actions:{cancel:{label:e("common.cancel"),handler:function(){i.store.dispatch(Object(l.closeModal)()),Object(l.clickTracker)({trackerName:"cancelConfirm",data:{message_id:r,message_type:s,conversation_id:o}})}},confirm:{label:e("common.confirm"),handler:function(){i.store.dispatch(Object(l.closeModal)()),i.store.dispatch(v({messageId:r,messageType:s,currentConversationId:o})),Object(l.clickTracker)({trackerName:"deleteConfirm",data:{message_id:r,message_type:s,conversation_id:o}})}}}}));case 3:case"end":return a.stop()}}),h)}function _(e){var t,n,r,s,o,i,c,p,h,g,m,E,v,b,_,y,S,x;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.messageId,r=t.messageType,s=t.currentConversationId,a.prev=1,a.next=4,Object(u.select)(l.deleteConfigSelector);case 4:return o=a.sent,a.next=7,Object(u.select)(Object(l.getMessageSelector)(n));case 7:return i=a.sent,a.next=10,Object(u.call)(l.fetch,{method:"POST",parent:"messages",resource:"delete",payload:JSON.stringify({msg_id:n,type:i.type,delete_config_version:o.deleteConfigVersion})});case 10:return c=a.sent,p=i.message_option|d.EMessageOption.MSG_OPT_DELETE,h=Object(l.normalize)("messages",f(f({},i),{},{message_option:p})),g=h.entities,a.next=15,Object(u.put)(Object(l.updateEntities)({entities:g}));case 15:return a.next=17,Object(u.select)(Object(l.getConversation)(i.conversation_id));case 17:if((m=a.sent).latest_message_id!==i.id){a.next=22;break}return E=Object(l.normalize)("conversations",f(f({},m),{},{last_message_option:p,latest_message_content:{text:""},latest_message_from_id:i.from_id})),v=E.entities,a.next=22,Object(u.put)(Object(l.updateEntities)({entities:v}));case 22:if(b=c.config_version,o.deleteConfigVersion!==b){a.next=25;break}return a.abrupt("return");case 25:return a.next=27,Object(u.select)(l.currentUserSelector);case 27:return _=a.sent,y=(c.region_config||[]).find((function(e){return e.region===_.country})),S=!1,x=0,y&&y.duration&&(S=!0,x=y.duration),a.next=34,Object(u.put)(Object(l.checkDeletePermissionSucceeded)({hasDeletePermission:S,deleteConfigVersion:b,deleteConfigDuration:x}));case 34:a.next=41;break;case 36:return a.prev=36,a.t0=a.catch(1),a.next=40,Object(u.call)(l.setToastInformationSaga,Object(l.setToastInformation)({error:a.t0}));case 40:Object(l.impressionTracker)({trackerName:"error",data:{message_id:n,message_type:r,conversation_id:s,error_reason:a.t0.message}});case 41:case"end":return a.stop()}}),A,null,[[1,36]])}function y(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.takeEvery)(E,b);case 2:return e.next=4,Object(u.takeEvery)(v,_);case 4:case"end":return e.stop()}}),g)}}).call(this,n(21).t)},,function(e,t,n){"use strict";var r=n(36),s=n.n(r),o=n(51),a=n.n(o),i=n(4),c=n.n(i),u=n(13),l=n.n(u),d=n(14),p=n.n(d),f=n(6),h=n.n(f),A=n(15),g=n.n(A),m=n(16),E=n.n(m),v=n(9),b=n.n(v),_=n(0),y=n.n(_),S=n(10),x=n(186),C=n.n(x),O=n(187),w=n(189),I=n(190),M=n(2),T=n(1),j=["type","image"];function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var k=function(e){g()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var s=b()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return E()(this,n)}}(n);function n(e){var r;return l()(this,n),(r=t.call(this,e)).visitInSC=r.visitInSC.bind(h()(r)),r.visitOrderInSC=r.visitOrderInSC.bind(h()(r)),r.visitProductInSC=r.visitProductInSC.bind(h()(r)),r}return p()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.id,r=e.extraProps,s=r.messageId,o=r.conversationId,a=r.shopId,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({message_id:s,conversation_id:o},c()({},"".concat(t,"_id"),n));"order"===t&&Object(T.impressionTracker)({shopId:a,trackerName:"impressionOrderFromSourceInSpecialMessage",data:i}),"product"===t&&Object(T.impressionTracker)({shopId:a,trackerName:"impressionProductFromSourceInSpecialMessage",data:i})}},{key:"visitInSC",value:function(){var e=this.props.type;"product"===e?this.visitProductInSC():"order"===e&&this.visitOrderInSC()}},{key:"visitProductInSC",value:function(){var e=this.props,t=e.extraProps,n=t.status,r=t.isScChat,s=t.isSubAccount,o=t.scProductLink,a=t.mallProductLink,i=t.shopId,c=t.itemId,u=t.messageId,l=t.conversationId,d=e.visitShopSellerCenterRequested,p=e.shopAccess.hasViewProductAccess;n===M.ProductStatusUsingNumber.DELETED||(Object(T.clickTracker)({shopId:i,trackerName:"clickVisitProductInSellerCenter",data:{product_id:c,message_id:u,conversation_id:l}}),r?Object(M.redirectionWithAccess)({access:p,isSubAccount:s,action:function(){return d({shopId:i,itemId:c})},url:o}):window.open(a))}},{key:"visitOrderInSC",value:function(){var e=this.props,t=e.extraProps,n=t.isScChat,r=t.isSubAccount,s=t.shopId,o=t.orderLink,a=t.mallOrderLink,i=t.orderId,c=t.messageId,u=t.conversationId,l=e.visitShopSellerCenterRequested,d=e.shopAccess.hasViewOrderAccess;Object(T.clickTracker)({shopId:s,trackerName:"clickVisitOrderInSellerCenter",data:{order_id:i,message_id:c,conversation_id:u}}),n?Object(M.redirectionWithAccess)({access:d,isSubAccount:r,action:function(){return l({shopId:s,orderId:i})},url:o}):window.open(a)}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.image,r=a()(e,j),o=r.shopAccess,i=o.hasViewOrderAccess,c=o.hasViewProductAccess,u=i||c;return y.a.createElement("div",{className:C.a.root,onClick:this.visitInSC,style:{cursor:u?"pointer":"default"}},"product"===t&&y.a.createElement(I.a,s()({image:n},r)),"order"===t&&y.a.createElement(w.a,s()({image:n},r)),y.a.createElement(O.a,s()({type:t},r)))}}]),n}(y.a.PureComponent),R={visitShopSellerCenterRequested:T.visitShopSellerCenterRequested};t.a=Object(S.connect)((function(e){return{currentUser:Object(T.currentUserSelector)(e),shopAccess:Object(T.shopAccessSelector)(e)}}),R)(k)},function(e,t,n){"use strict";var r,s=n(4),o=n.n(s),a=n(2),i=n(0),c=n.n(i),u=n(17),l=n(8),d=n(10),p=n(1),f=n(12),h={handleSensitiveUrl:f.handleSensitiveUrl,changeTranslateStatus:f.changeTranslateStatus,translateMessagesRequested:f.translateMessagesRequested,scrollToMessage:f.scrollToMessage,showTranslateFeedback:f.showTranslateFeedback},A=Object(u.a)(Object(d.connect)((function(e){return{shopTranslationSettings:Object(p.shopTranslationSettingsSelector)(e),currentConversationTranslationAccess:Object(p.currentConversationTranslationAccessSelector)(e)}}),h)((function(e){var t=e.isScChat,n=e.isSend,r=e.shopTranslationSettings,s=e.measure,o=e.handleSensitiveUrl,i=e.changeTranslateStatus,u=e.translateMessagesRequested,d=e.message,p=e.conversationShopId,f=e.currentConversationTranslationAccess,h=e.scrollToMessage,A=e.conversationId,g=e.conversationBuyerId,m=e.track,E=e.showTranslateFeedback,v=e.handleMessageIsSend,b=d.send_status,_=d.message_option,y=d.content,S=d.id,x=d.country,C=d.translateStatus,O=d.toggleTranslateStatus,w=d.type,I=d.quoted_msg,M=d.source;if(!y.text)return null;var T=(y||{}).translation,j=(T=void 0===T?{}:T).text,B=r[p]||{},k=B.translationPreference,R=B.autoTranslationStatus,N=B.source,P=B.inTranslationFeedbackWhitelist,D=R===a.SwitchStatus.ENABLED,U=Object(a.handleDisplayTranslation)(D,n,j,t,f);return c.a.createElement(l.TextMessage,{buyerId:g,shopId:p,sendStatus:b,messageOption:_,enableTranslation:U,translationPreference:k,translationSource:N,id:S,measure:s,translateStatus:C,toggleTranslateStatus:O,handleSensitiveUrl:o,changeTranslateStatus:i,translateMessagesRequested:u,content:y,isScChat:t,enableAutoTranslation:D,isSend:n,country:x,type:w,replyToMessage:I,scrollToMessage:h,conversationId:A,messageSource:M,track:m,showTranslateFeedback:E,inTranslationFeedbackWhitelist:P,handleMessageIsSend:v})}))),g=n(46),m={showMediaPreviewModalRequested:p.showMediaPreviewModalRequested,scrollToMessage:f.scrollToMessage},E=Object(u.a)(Object(d.connect)((function(){return{}}),m)((function(e){var t=e.isSend,n=e.measure,r=e.showMediaPreviewModalRequested,s=e.message,o=e.track,u=e.scrollToMessage,d=e.conversationBuyerId,p=e.handleMessageIsSend,f=s.id,h=s.request_id,A=s.content,m=s.send_status,E=s.quoted_msg,v=Object(i.useContext)(g.a),b=t&&m===a.MessageSendStatus.SENDING;return c.a.createElement(l.ImageMessage,{isSend:t,imgCache:v,isSending:b,id:f,request_id:h,content:A,showMediaPreviewModalRequested:r,measure:n,track:o,replyToMessage:E,scrollToMessage:u,conversationBuyerId:d,handleMessageIsSend:p})}))),v=n(40),b=n.n(v),_=n(35),y=function(e,t){var n=e.id,r=e.status,s=e.shop_id,o=e.region;Object(a.checkProductDeleted)(n,r)||(window.open("https://".concat(Object(a.getMallUrl)(o),"/product/").concat(s,"/").concat(n,"/")),t&&t(e))},S=Object(u.a)((function(e){var t=e.isSend,n=e.region,r=e.message,s=e.measure,o=e.conversationShopId,a=e.conversationStatus,i=r.id,u=r.content,d=r.textContent,f=void 0===d?{}:d,h=r.conversation_id,A=u.tax_value;return c.a.createElement(l.OfferMessage,{id:i,isSend:t,country:n,measure:s,onReply:function(e){Object(p.clickTracker)({trackerName:e.isAccept?"clickAcceptOffer":"clickRejectOffer",data:{itemid:f.id,conversation_id:h,message_id:i},shopId:o}),function(e){b.a.put(_.default.replyOfferRequested({payload:e}))}(e)},priceBeforeTax:u.price_before_tax,taxValue:A,textContent:f,handleClickItem:y,conversationClosed:"closed"===a})})),x={visitShopSellerCenterRequested:p.visitShopSellerCenterRequested},C=Object(u.a)(Object(d.connect)((function(e){return{shopAccess:Object(p.shopAccessSelector)(e)}}),x)((function(e){var t=e.isScChat,n=e.isSubAccount,r=e.visitShopSellerCenterRequested,s=e.isSend,o=e.track,i=e.message,u=e.shopAccess,d=void 0===u?{}:u,p=e.conversationShopId,f=d.hasViewProductAccess,h=i.textContent,A=h||{},g=A.id,m=A.status,E=A.shop_id,v=A.region,b=Object(a.checkProductDeleted)(g,m),_=E===p,y=t||!_||!n||f;return c.a.createElement(l.ProductMessage,{item:h,isSend:s,deleted:b,hasAccess:y,handleClickMessage:function(){y&&!b&&(o("clickViewProductInMallOrSellerCenter","click",{itemid:g}),_?n?Object(a.redirectionWithAccess)({access:!0,isSubAccount:!0,action:function(){return r({shopId:E,itemId:g})}}):t?window.open("https://".concat(Object(a.getSellerCenterUrl)(Object(a.isVisitingCNSC)()?"cn":v),"/portal/product/").concat(g)):window.open("https://".concat(Object(a.getMallUrl)(v),"/product/").concat(E,"/").concat(g,"/")):window.open("https://".concat(Object(a.getMallUrl)(v),"/product/").concat(E,"/").concat(g,"/")))}})}))),O={visitShopSellerCenterRequested:p.visitShopSellerCenterRequested},w=Object(u.a)(Object(d.connect)((function(e){return{shopAccess:Object(p.shopAccessSelector)(e)}}),O)((function(e){var t=e.isSubAccount,n=e.isSend,r=e.visitShopSellerCenterRequested,s=e.message,o=e.shopAccess,i=void 0===o?{}:o,u=e.conversationShopId,d=e.region,p=e.track,f=s.content,h=s.textContent,A=f||{},g=A.shop_id,m=A.order_id,E=i.hasViewOrderAccess,v=void 0!==E&&E,b=g===u;return c.a.createElement(l.OrderMessage,{region:d,hasViewOrderAccess:v,isSend:n,textContent:h,handleClickMessage:function(){if(!b)return window.open(Object(a.getMallOrderUrl)(h,g,d)),null;p&&p("clickOrderMessage","click"),Object(a.redirectionWithAccess)({access:v,isSubAccount:t,action:function(){return r({shopId:g,orderId:m})},url:"https://".concat(Object(a.getSellerCenterUrl)(d),"/portal/sale/").concat(m)})}})}))),I={scrollToMessage:f.scrollToMessage},M=Object(u.a)(Object(d.connect)((function(){return{}}),I)((function(e){var t=e.region,n=e.message,r=e.isSend,s=e.scrollToMessage,o=e.conversationBuyerId,u=e.handleMessageIsSend,d=n.send_status,p=n.request_id,f=n.id,h=n.content,A=n.quoted_msg,m=r&&d===a.MessageSendStatus.SENDING,E=Object(i.useContext)(g.a);return c.a.createElement(l.StickerMessage,{imgCache:E,isSending:m,id:f,content:h,country:t,request_id:p,isSend:r,replyToMessage:A,scrollToMessage:s,conversationBuyerId:o,handleMessageIsSend:u})}))),T=Object(u.a)((function(e){var t=e.isSend,n=e.message,r=n.type,s=n.content;return c.a.createElement(l.SystemMessage,{type:r,content:s,isSend:t})})),j=n(74),B=Object(u.a)((function(e){var t=e.isSend,n=e.track,r=e.message,s=e.region,o=r.type,a=r.content,i=function(e){var t=e.id;n&&n("clickProductListMessage","click",{itemid:t})};return c.a.createElement(l.ProductsMessage,{region:s,type:o,isSend:t,content:a,handleClickItem:function(e){y(e,i)}})})),k=Object(u.a)(Object(d.connect)((function(e){return{currentUser:Object(p.currentUserSelector)(e)}}),{})((function(e){var t=e.measure,n=e.isSend,r=e.handleReload,s=e.conversation,o=e.message,a=o.id,u=o.conversation_id,d=o.request_id,f=o.textContent,h=o.fetchStatus,A=Object(i.useContext)(g.a);return c.a.createElement(l.FeedStoryMessage,{imgCache:A,id:a,requestId:d,measure:t,isSend:n,textContent:f,handleReload:r,fetchStatus:h,handleTrackStory:function(){Object(p.clickTracker)({shopId:s.shop_id,trackerName:"clickHandleStoryMessage",data:{story_id:f.id,message_id:a,conversation_id:u}})}})}))),R=Object(u.a)((function(e){var t=e.measure,n=e.isSend,r=e.track,s=e.message,o=e.region,i=s.content,u=i.cart_items,d=void 0===u?[]:u,p=i.shop_id,f=s.textContent,h=void 0===f?[]:f,A=function(e){var t=e.id;r&&r("clickCartProduct","click",{itemid:t})};return c.a.createElement(l.CartReminderMessage,{isSend:n,measure:t,products:h,cartItemsCount:d.length,handleClickItem:function(e){y(e,A)},handleClickMessage:function(){var e=function(e,t){var n=e.map((function(e){var n=e.model_id,r=e.item_id,s=e.group_id,o={shopId:t,itemId:r};return n&&(o.modelId=n),s&&"0"!==s&&(o.itemGroupId=s),o}));return Object(a.encode)(JSON.stringify(n))}(d,p);window.open("https://".concat(Object(a.getMallUrl)(o),"/cart?referrerItems=").concat(e,"&source=seller_chat")),r&&r("clickCartButton","click")}})})),N=n(33),P={sendMessagesRequested:f.sendMessagesRequested},D=Object(u.a)(Object(d.connect)((function(){return{}}),P)((function(e){var t=e.isSend,n=e.measure,r=e.sendMessagesRequested,s=e.message,o=e.conversationShopId,a=e.conversationBuyerId,i=e.conversationId,u=e.isInFaqHistoryModal,d=s.content,p=Object(N.a)(u,r);return c.a.createElement(l.FaqMessage,{isSend:t,measure:n,sendMessagesRequested:p,content:d,conversationId:i,shopId:o,conversationUserId:a})}))),U=n(13),q=n.n(U),F=n(14),L=n.n(F),H=n(15),G=n.n(H),z=n(16),W=n.n(z),Y=n(9),V=n.n(Y),X=n(53),Q=n.n(X),J=n(103),K=n.n(J),Z=function(e){G()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V()(e);if(t){var s=V()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return W()(this,n)}}(n);function n(){return q()(this,n),t.apply(this,arguments)}return L()(n,[{key:"render",value:function(){var e=this.props,t=e.conversationId,n=e.conversationShopId,r=e.conversationBuyerId,s=e.sendMessagesRequested,o=e.isSend,i=e.isInFaqHistoryModal,u=e.message,d=void 0===u?{}:u,p=d.type,f=Object(N.a)(i,s),h=p===a.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED;return c.a.createElement("div",null,c.a.createElement("div",{className:Q()(K.a.message,o?K.a.send:"",h?K.a.unsupportFaq:"")},Object(a.getCustomMessageText)(d.type)),h&&c.a.createElement(l.FaqButton,{isSend:o,conversationId:t,shopId:n,conversationUserId:r,sendMessagesRequested:f}))}}]),n}(c.a.PureComponent),$={sendMessagesRequested:f.sendMessagesRequested},ee=Object(u.a)(Object(d.connect)(null,$)(Z)),te={sendMessagesRequested:f.sendMessagesRequested},ne=Object(u.a)(Object(d.connect)((function(){return{}}),te)((function(e){var t=e.sendMessagesRequested,n=e.isSend,r=e.message,s=e.conversationShopId,o=e.conversationBuyerId,a=e.conversationId,i=e.isInFaqHistoryModal,u=r.id,d=r.content,p=Object(N.a)(i,t);return c.a.createElement(l.FaqFeedbackPromptMessage,{id:u,content:d,sendMessagesRequested:p,conversationId:a,conversationUserId:o,isSend:n,shopId:s})}))),re={sendMessagesRequested:f.sendMessagesRequested},se=Object(u.a)(Object(d.connect)((function(){return{}}),re)((function(e){var t=e.sendMessagesRequested,n=e.isSend,r=e.conversationShopId,s=e.conversationBuyerId,o=e.conversationId,a=e.isInFaqHistoryModal,i=Object(N.a)(a,t);return c.a.createElement(l.FaqLiveAgentPromptMessage,{sendMessagesRequested:i,isSend:n,conversationId:o,shopId:r,conversationUserId:s})}))),oe=Object(u.a)((function(e){var t=e.region,n=e.measure,r=e.isSend,s=void 0!==r&&r,o=e.message,a=e.track,i=o.content,u=function(e){var t=e.id;a&&a("clickBundleDealDetail","click",{itemid:t})};return c.a.createElement(l.BundleDealMessage,{region:t,measure:n,isSend:s,content:i,handleClickItem:function(e){y(e,u)}})})),ae=Object(u.a)((function(e){var t=e.measure,n=e.isSend,r=void 0!==n&&n,s=e.message.content;return c.a.createElement(l.FlashSaleMesssage,{measure:t,isSend:r,content:s,handleClickItem:y})})),ie={visitShopSellerCenterRequested:p.visitShopSellerCenterRequested},ce=Object(u.a)(Object(d.connect)((function(e){return{shopAccess:Object(p.shopAccessSelector)(e)}}),ie)((function(e){var t=e.isSend,n=e.isSubAccount,r=e.visitShopSellerCenterRequested,s=e.track,o=e.message,i=e.shopAccess,u=void 0===i?{}:i,d=e.region,p=u.hasViewOrderAccess,f=o.content,h=f.order_id,A=f.shop_id,g=o.textContent;return c.a.createElement(l.RateReminderMessage,{isSend:t,region:d,textContent:g,track:s,hasViewOrderAccess:p,handleClickMessage:function(){t?Object(a.redirectionWithAccess)({access:p,isSubAccount:n,action:function(){return r({shopId:A,orderId:h})},url:"https://".concat(Object(a.getSellerCenterUrl)(Object(a.isVisitingCNSC)()?"cn":d),"/portal/sale/").concat(h)}):window.open("https://".concat(Object(a.getMallUrl)(d),"/user/purchase/order/").concat(h,"/?shopid=").concat(A))}})}))),ue=n(200),le={fetchFaqMessagesRequested:f.fetchFaqMessagesRequested,updateCurrentFaqId:f.updateCurrentFaqId},de=Object(u.a)(Object(d.connect)(null,le)((function(e){return c.a.createElement(ue.a,e)}))),pe=n(6),fe=n.n(pe),he=n(78),Ae=n.n(he),ge=a.MessageTypes.MSG_TYPE_SELECTED_OPTION,me=function(e){G()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V()(e);if(t){var s=V()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return W()(this,n)}}(n);function n(e){var r;return q()(this,n),(r=t.call(this,e)).renderOption=r.renderOption.bind(fe()(r)),r.sendMessage=r.sendMessage.bind(fe()(r)),r}return L()(n,[{key:"sendMessage",value:function(e){var t=e.request_live_agent,n=e.payload,r=e.text,s=this.props,o=s.sendMessagesRequested,a=s.conversationShopId,i=s.conversationBuyerId;o({conversationId:s.conversationId,conversationUserId:i,messages:[{shopId:a,type:ge,content:{text:r,payload:n,request_live_agent:t}}]})}},{key:"renderOption",value:function(e,t){var n,r=this,s=e.text,a=e.variant,i=this.props,u=i.message,l=i.currentConversationMaxOptionHideTime,d=u.created_timestamp<l,p=Q()(Ae.a.option,(n={},o()(n,Ae.a.primary,1===a),o()(n,Ae.a.invalid,d),n));return c.a.createElement("div",{key:t,className:p,title:s,onClick:function(){if(d)return null;r.sendMessage(e)}},s)}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleSensitiveUrl,r=t.message,s=r.content,o=s.title,a=s.options,i=void 0===a?[]:a,u=r.message_option;return c.a.createElement("div",{className:Ae.a.root},c.a.createElement("div",{className:Ae.a.title},c.a.createElement(l.Text,{text:o,messageOption:u,handleSensitiveUrl:n})),i.map((function(t,n){return e.renderOption(t,n)})))}}]),n}(i.PureComponent),Ee={handleSensitiveUrl:f.handleSensitiveUrl,sendMessagesRequested:f.sendMessagesRequested},ve=Object(u.a)(Object(d.connect)((function(e){return{conversation:Object(p.currentConversationSelector)(e),currentConversationMaxOptionHideTime:Object(p.currentConversationMaxOptionHideTimeSelectors)(e)}}),Ee)(me)),be=Object(u.a)((function(e){var t=e.isSend,n=e.message.content;return c.a.createElement(l.AddOnDealMessage,{content:n,isSend:t,handleClickItem:y})})),_e={showMediaPreviewModalRequested:p.showMediaPreviewModalRequested,scrollToMessage:f.scrollToMessage},ye=Object(d.connect)((function(e,t){return{videoInfo:Object(p.selectVideoInfoByKey)(t.message.request_id)(e)}}),_e)((function(e){var t=e.isSend,n=e.videoInfo,r=e.showMediaPreviewModalRequested,s=e.message,o=e.conversationShopId,i=e.scrollToMessage,u=e.conversationBuyerId,d=e.handleMessageIsSend,f=s.id,h=s.conversation_id,A=s.to_id,g=s.from_id,m=s.request_id,E=s.content,v=s.send_status,b=s.quoted_msg,_=t&&v===a.MessageSendStatus.SENDING;return c.a.createElement(l.VideoMessage,{id:f,isSend:t,content:E,isSending:_,videoInfo:n,onPlayVideo:function(e){Object(p.clickTracker)({trackerName:"clickPlayInVideoMessage",data:{message_id:f===m?0:f,conversation_id:h,is_sender:t,to_user_id:A,from_user_id:g,video_original_duration:E.duration_seconds},conversationShopId:o}),r({messageId:e})},replyToMessage:b,scrollToMessage:i,conversationBuyerId:u,handleMessageIsSend:d})})),Se=Object(u.a)((function(e){return c.a.createElement(ye,e)})),xe={handleSensitiveUrl:f.handleSensitiveUrl,showMediaPreviewModalRequested:p.showMediaPreviewModalRequested},Ce=Object(u.a)(Object(d.connect)((function(){return{}}),xe)((function(e){var t=e.isSend,n=e.measure,r=e.showMediaPreviewModalRequested,s=e.message,o=e.handleSensitiveUrl,a=s.content,u=s.id,d=s.request_id,p=s.send_status,f=s.message_option,h=Object(i.useContext)(g.a);return c.a.createElement(l.ImageWithTextMessage,{content:a,measure:n,messageId:u,requestId:d,isSend:t,imgCache:h,sendStatus:p,messageOption:f,handleSensitiveUrl:o,showMediaPreviewModalRequested:r})}))),Oe=(r={},o()(r,a.MessageTypes.MSG_TYPE_TEXT,A),o()(r,a.MessageTypes.MSG_TYPE_IMAGE,E),o()(r,a.MessageTypes.MSG_TYPE_OFFER,S),o()(r,a.MessageTypes.MSG_TYPE_ORDER,w),o()(r,a.MessageTypes.MSG_TYPE_STICKER,M),o()(r,a.MessageTypes.MSG_TYPE_PRODUCT,C),o()(r,a.MessageTypes.MSG_TYPE_WEBVIEW,T),o()(r,a.MessageTypes.MSG_TYPE_NOTIFICATION,T),o()(r,a.MessageTypes.MSG_TYPE_VOUCHER,j.a),o()(r,a.MessageTypes.MSG_TYPE_ITEM_LIST,B),o()(r,a.MessageTypes.MSG_TYPE_FEED_STORY,k),o()(r,a.MessageTypes.MSG_TYPE_SHOPPING_CART,R),o()(r,a.MessageTypes.MSG_TYPE_FAQ,D),o()(r,a.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT,A),o()(r,a.MessageTypes.MSG_TYPE_FAQ_QUESTION,A),o()(r,a.MessageTypes.MSG_TYPE_FAQ_FEEDBACK,A),o()(r,a.MessageTypes.MSG_TYPE_FAQ_FEEDBACK_PROMPT,ne),o()(r,a.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,se),o()(r,a.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,ce),o()(r,a.MessageTypes.MSG_TYPE_BUNDLE_MESSAGE,de),o()(r,a.MessageTypes.MSG_TYPE_BUNDLE_DEAL,oe),o()(r,a.MessageTypes.MSG_TYPE_FLASH_SALE,ae),o()(r,a.MessageTypes.MSG_TYPE_OPTION_PACK,ve),o()(r,a.MessageTypes.MSG_TYPE_SELECTED_OPTION,A),o()(r,a.MessageTypes.MSG_TYPE_ADD_ON_DEAL,be),o()(r,a.MessageTypes.MSG_TYPE_VIDEO,Se),o()(r,a.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT,Ce),r);t.a=function(e){return Oe[e]||ee}},function(e,t,n){"use strict";var r=n(0),s=n.n(r),o=n(8),a=function(e){var t=e.measure,n=e.evaluationRequested,r=e.handleReload,a=e.message,i=a.content,c=a.from_shop_id;return s.a.createElement(o.EvaluationMessage,{measure:t,content:i,handleReload:r,rateShopId:c,onSubmit:function(e){return n(e)}})},i=n(10),c=n(17),u={evaluationRequested:n(12).evaluationRequested};t.a=Object(c.a)(Object(i.connect)((function(){return{}}),u)((function(e){return s.a.createElement(a,e)})))},,function(e,t,n){var r=n(19),s=n(242);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(19),s=n(244);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},,,,,,,,,,,,,,,,function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(s[n]=e[n]);return s},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(50);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var s=t&&t.prototype instanceof d?t:d,o=Object.create(s.prototype),a=new S(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(s,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===s)throw o;return{value:void 0,done:!0}}for(n.method=s,n.arg=o;;){var a=n.delegate;if(a){var i=b(a,n);if(i){if(i===l)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function d(){}function p(){}function f(){}var h={};h[s]=function(){return this};var A=Object.getPrototypeOf,g=A&&A(A(x([])));g&&g!==t&&n.call(g,s)&&(h=g);var m=f.prototype=d.prototype=Object.create(h);function E(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){var r;this._invoke=function(s,o){function a(){return new t((function(r,a){!function r(s,o,a,i){var c=u(e[s],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,i)}),(function(e){r("throw",e,a,i)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,i)}))}i(c.arg)}(s,o,r,a)}))}return r=r?r.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var s=r.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function y(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function x(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=m.constructor=f,f.constructor=p,p.displayName=i(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},E(v.prototype),v.prototype[o]=function(){return this},e.AsyncIterator=v,e.async=function(t,n,r,s,o){void 0===o&&(o=Promise);var a=new v(c(t,n,r,s),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(m),i(m,a,"Generator"),m[s]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(y),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var i=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(i&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var o=s;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),y(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var s=r.arg;y(n)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t){var n,r,s=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&f())}function f(){if(!l){var e=i(p);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function A(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||i(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=A,s.addListener=A,s.once=A,s.off=A,s.removeListener=A,s.removeAllListeners=A,s.emit=A,s.prependListener=A,s.prependOnceListener=A,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,n){(t=n(20)(!0)).push([e.i,"._31xcV2AYAe7PQCE5go9tBW {\n  height: 100%;\n  width: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  box-sizing: border-box;\n  -ms-scroll-chaining: none;\n      overscroll-behavior: contain;\n}\n\n.jHfK1c-Py0hqmZG0XqDnq {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  box-sizing: border-box;\n}\n","",{version:3,sources:["style.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,WAAW;EACX,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;EACtB,yBAA4B;MAA5B,4BAA4B;AAC9B;;AAEA;EACE,MAAM;EACN,SAAS;EACT,OAAO;EACP,QAAQ;EACR,YAAY;EACZ,sBAAsB;AACxB",file:"style.css",sourcesContent:[".root {\n  height: 100%;\n  width: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  box-sizing: border-box;\n  overscroll-behavior: contain;\n}\n\n.empty {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  box-sizing: border-box;\n}\n"]}]),t.locals={root:"_31xcV2AYAe7PQCE5go9tBW",empty:"jHfK1c-Py0hqmZG0XqDnq"},e.exports=t},,,,,,,,function(e,t){e.exports=S},function(e,t,n){var r=n(19),s=n(235);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(19),s=n(236);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(19),s=n(237);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(19),s=n(238);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){var r=n(19),s=n(248);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){var r=n(13),s=n.n(r),o=n(14),a=n.n(o),i=n(6),c=n.n(i),u=n(15),l=n.n(u),d=n(16),p=n.n(d),f=n(9),h=n.n(f),A=n(0),g=n.n(A),m=n(177),E=n.n(m),v=n(178),b=n.n(v),_=n(179),y=n.n(_),S=n(180),x=n.n(S),C=n(181),O=n(182),w=n(100),I=n(74),M=n(101),T=n(1),j=n(7),B=n(2),k=n(33),R=n(202),N=n(139),P=n.n(N),D=n(46),U=B.MessageTypes.MSG_TYPE_IMAGE,q=B.MessageTypes.MSG_TYPE_TEXT,F=B.MessageTypes.MSG_TYPE_WEBVIEW,L=B.MessageTypes.MSG_TYPE_NOTIFICATION,H=B.MessageTypes.MSG_TYPE_RATE_CARDS,G=B.MessageTypes.MSG_TYPE_VOUCHER_WEB,z=B.MessageTypes.MSG_TYPE_FEED_STORY,W=B.MessageTypes.MSG_TYPE_SHOPPING_CART,Y=function(t){l()(r,t);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var s=h()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return p()(this,n)}}(r);function r(e){var t;return s()(this,r),(t=n.call(this,e)).keyMapper=t.keyMapper.bind(c()(t)),t.getListRef=t.getListRef.bind(c()(t)),t.handleWheel=t.handleWheel.bind(c()(t)),t.rowRenderer=t.rowRenderer.bind(c()(t)),t.handleScroll=t.handleScroll.bind(c()(t)),t.handleDbScroll=t.handleDbScroll.bind(c()(t)),t.debounceHandleScroll=Object(B.debounce)(t.handleDbScroll,300),t.scrollToMessage=t.scrollToMessage.bind(c()(t)),t.handleRowsRender=t.handleRowsRender.bind(c()(t)),t.handleRecomputeRow=t.handleRecomputeRow.bind(c()(t)),t.handleMessageListChanged=t.handleMessageListChanged.bind(c()(t)),t.handleConversationChanged=t.handleConversationChanged.bind(c()(t)),t.handleMessageListLengthUnchanged=t.handleMessageListLengthUnchanged.bind(c()(t)),t.addExposedMessageId=t.addExposedMessageId.bind(c()(t)),t.debounceShouldFetchPrevMessage=Object(B.debounce)(t.shouldFetchPrevMessage.bind(c()(t)),150),t.scrollUpHandler=Object(B.memFn)(k.e,10),t.handleViewNewMessage=t.markMessage.bind(c()(t)),t.containerProps={onWheel:t.handleWheel},t._cache=new x.a({fixedWidth:!0,keyMapper:t.keyMapper}),t.imgCache={},t.listNode=null,t.targetIndex=null,t.startIndex=0,t.stopIndex=0,t.scrollTop=0,t.latestScrollTop=0,t.hasSourceMessageMap={},t.state={firstUnreadMsgId:null,shouldRenderNewMessageTip:!1},t.exposedMessageIds=[],t}return a()(r,[{key:"addExposedMessageId",value:function(e){this.exposedMessageIds.push(e)}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.handleConversationChanged(e.props)})),T.EventBus.on("scrollToMessage",this.scrollToMessage)}},{key:"componentWillUnmount",value:function(){T.EventBus.removeListener("scrollToMessage",this.scrollToMessage)}},{key:"scrollToMessage",value:function(e){var t=this,n=this.props.messageList.findIndex((function(t){return t.id===e}));n>=0&&setTimeout((function(){t.scrollToRow=n,t.listNode&&t.listNode.scrollToRow(n)}),500)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this,r=Object.keys(e),s=Object.keys(this.props);return r.length!==s.length||t.shouldRenderNewMessageTip!==this.state.shouldRenderNewMessageTip||r.some((function(t){var r=e[t],s=n.props[t],o=!1;switch(t){case"currentConversation":o=r.id!==s.id;break;case"unreadMessageIds":o=!Object(k.c)(r,s);break;case"messageList":o=!Object(k.b)(r,s);break;default:o=r!==s}return o}))}},{key:"componentDidUpdate",value:function(e){var t=e.hasMoreOlderMessage,n=e.messageList,r=e.unreadMessageIds,s=e.currentConversation,o=this.props,a=o.hasMoreOlderMessage,i=o.messageList,c=o.unreadMessageIds,u=o.currentConversation,l={hasMoreOlderMessage:t,messageList:n,conversation:s,unreadMessageIds:r},d={hasMoreOlderMessage:a,messageList:i,unreadMessageIds:c,currentConversationCanRead:o.currentConversationCanRead,conversation:u};u.id===s.id?i.length===n.length?this.handleMessageListLengthUnchanged(l,d):this.handleMessageListChanged(l,d):(this.handleConversationChanged(d),this.exposedMessageIds=[])}},{key:"handleConversationChanged",value:function(e){this.startIndex=0,this.stopIndex=0,this.hasSourceMessageMap={},this.cleanTargetIndex(),this.scrollUpHandler.reset(),this.listNode&&(this.listNode.Grid._rowSizeAndPositionManager.arrangeOffsetData(),this.listNode.forceUpdateGrid(),this.listNode.scrollToPosition(200)),this._cache.clearAll();var t=e.messageList,n=e.unreadMessageIds,r=n.length?n[0]:null,s=r?t.findIndex((function(e){return e.id===r})):null;this.handleAppendMessage({index:s}),this.setState({firstUnreadMsgId:r,shouldRenderNewMessageTip:!1})}},{key:"handleMessageListLengthUnchanged",value:function(e,t){var n=t.messageList,r=t.unreadMessageIds,s=t.currentConversationCanRead,o=this.checkForceRerender(e.messageList,n),a=e.hasMoreOlderMessage&&!t.hasMoreOlderMessage;(o||a)&&this.listNode&&this.listNode.forceUpdateGrid(),(s||e.unreadMessageIds.length&&!r.length)&&this.setState({shouldRenderNewMessageTip:!1});var i=Object(k.d)(n),c=Object(k.d)(e.messageList);if(i&&c){var u=i.type,l=i.request_id,d=i.errorCode,p=i.message_option,f=c.request_id,h=c.retryRequestId,A=c.errorCode,g=c.message_option;(c.id!==i.id&&i.isFaking||u===q&&(l===f&&d!==A&&d===B.MessageErrorCode.BLACKLIST||(l===f||l===h)&&p!==g&&0!==p)||u===W&&c.fetchStatus.includes("pending")&&"done"===i.fetchStatus)&&this.handleAppendMessage()}}},{key:"handleMessageListChanged",value:function(e,t){var n=t.messageList,r=t.unreadMessageIds,s=t.conversation,o=t.currentConversationCanRead,a=n.length,i=e.messageList.length,c=0===i&&a>0||this.checkAppend(n,e.messageList),u=(Object(k.d)(n)||{}).to_id===s.to_id&&a>i,l=n.findIndex((function(e){return e.id===s.last_read_message_id})),d=!0;(u||!r.length||this.stopIndex>=l||o)&&(d=!1),this.setState({shouldRenderNewMessageTip:d}),!c||!u&&i&&i-1!==this.stopIndex||(this.cleanTargetIndex(),this.handleAppendMessage()),c||(this.cleanTargetIndex(),this.scrollToTarget=this.startIndex+a-i,this.bufferScrollTop=this.latestScrollTop,this.handlePrependMessage())}},{key:"getListRef",value:function(e){this.listNode=e}},{key:"keyMapper",value:function(e){var t=this.props.messageList[e];return t&&t.id}},{key:"handleWheel",value:function(e){this.targetIndex&&e.deltaY<0&&this.cleanTargetIndex()}},{key:"markMessage",value:function(e){var t=this.props,n=t.showChatWindow,r=t.showConversationDetail,s=t.markMessagesRequested,o=t.currentConversation,a=o.status,i=o.shop_id,c=o.id,u=o.unread_count,l=o.latest_message_id;n&&r&&"closed"!==a&&u>0&&s({shopId:i,isRead:!0,conversationId:c,latestMessageId:l,unreadCount:u}),!e&&this.handleAppendMessage()}},{key:"checkForceRerender",value:function(e,t){var n=e.slice(this.startIndex,this.stopIndex+1),r=t.slice(this.startIndex,this.stopIndex+1);return!Object(k.b)(n,r)}},{key:"checkAppend",value:function(e,t){return(t.length?t[0].id:null)===(e.length?e[0].id:null)}},{key:"handleAppendMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props.inScrollToMessage;if(!t&&this.props.messageList.length){var n=e.alignment,r=void 0===n?"end":n,s=e.index,o=void 0===s?null:s,a=o||this.props.messageList.length-1;"end"===r&&(this.targetIndex={index:a,range:this.makeCheckRange(this.startIndex,a)});var i=this.listNode&&"end"!==r?this.listNode.getOffsetForRow({index:a,alignment:r}):null;this.goToBottom({toRow:"end"===r,index:a<0?0:a,position:i})}}},{key:"handlePrependMessage",value:function(){if(this.listNode){var e=this.listNode.getOffsetForRow({index:this.scrollToTarget,alignment:"start"});this.listNode.scrollToPosition(e+this.bufferScrollTop),this._resolveGridPosition()}}},{key:"rowRenderer",value:function(e){var t=this,n=e.index,r=(e.key,e.parent),s=e.style,o=this.props,a=o.messageList,i=o.hasMoreOlderMessage,c=o.isSubAccount,u=o.currentUser,l=a[n];if(!l)return null;var d=a[n-1]||{},p=d.type,f=d.created_timestamp,h=d.content,A=void 0===h?{}:h,m=d.to_id,E=1e3*l.created_timestamp,v=1e3*f,b=E&&!v||E-v>3e5||0===n&&!i?Object(B.customizeTime)(E):null,_=l.id===this.state.firstUnreadMsgId,S=n===a.length-1,x=p===L||p===F&&A&&A.type===H&&(u.id!==m||c);return g.a.createElement(y.a,{key:l.id,parent:r,rowIndex:n,columnIndex:0,cache:this._cache},(function(e){var r=e.measure;return t.renderMessage({index:n,style:s,message:l,measure:r,timeFlag:b,isLastMessage:S,newMessageFlag:_,isLastSystemMessage:x})}))}},{key:"handleDbScroll",value:function(e){var t=e.clientHeight,n=e.scrollHeight,r=e.scrollTop,s=this.props,o=s.hasMoreLatestMessage,a=s.handleComponentScroll;s.inScrollToMessage&&0!==t&&this.scrollTop<r&&o&&r>n-t-30&&this.debounceShouldFetchPrevMessage("latest"),this.targetIndex&&this.scrollUpHandler.check(this.scrollTop,r)&&this.cleanTargetIndex(),this.scrollTop>r?a("up"):a("down"),this.scrollTop=r,t+r===n&&Object(B.debounce)(this.handleViewNewMessage,250)(!0)}},{key:"handleScroll",value:function(e){var t=e.clientHeight,n=e.scrollHeight,r=e.scrollTop,s=this.props.hasMoreOlderMessage;this.latestScrollTop=r,!1!==s&&r<200&&0!==t&&r<this.scrollTop&&this.debounceShouldFetchPrevMessage("older"),this.debounceHandleScroll({clientHeight:t,scrollHeight:n,scrollTop:r})}},{key:"handleRecomputeRow",value:function(e){this.targetIndex&&(this.targetIndex.range=this.targetIndex.range.map((function(t){return t.index!==e?t:Object.assign({},t,{measured:t.measured-1})})),this.listNode&&this.listNode.scrollToRow(this.targetIndex.index),this._resolveGridPosition(),this.targetIndex.range.every((function(e){return 0===e.measured}))&&this.cleanTargetIndex())}},{key:"cleanTargetIndex",value:function(){this.targetIndex=null}},{key:"makeCheckRange",value:function(e,t){for(var n=this.props,r=n.currentConversation,s=n.shopTranslationSettings,o=n.messageList,a=n.isScChat,i=n.currentConversationTranslationAccess,c=r.shop_id,u=r.to_id,l=(s[c]||{}).autoTranslationStatus,d=[],p=this._cache,f=e<t?e:0;f<=t;){var h=o[f],A=h.id,g=h.type,m=h.textContent,E=h.translateStatus,v=h.content,b=h.to_id,_=p.has(f),y=g===U&&!this.imgCache[A],S=!1;if(g===q){var x=v.translation,C=(x=void 0===x?{}:x).text;S=Object(B.handleDisplayTranslation)(l===B.SwitchStatus.ENABLED,u===b,C,a,i)&&"succeed"!==E}var O=g===z&&m&&!m.id,w=y||S||O;_?w&&d.push({index:f,measured:2}):d.push({index:f,measured:w?2:1}),f++}return d}},{key:"handleRowsRender",value:function(e){var t=e.startIndex,n=e.stopIndex,r=this.props,s=r.messageList,o=r.currentConversationCanRead,a=r.setCurrentConversationCanRead;if(this.startIndex=t,this.stopIndex=n,this.targetIndex){var i=this.targetIndex.range.filter((function(e){return e.index>=t&&e.measured>0}));i.length?this.targetIndex.range=i:this.cleanTargetIndex()}this.stopIndex<s.length-1&&o?a({canRead:!1}):this.stopIndex!==s.length-1||o||a({canRead:!0})}},{key:"shouldFetchPrevMessage",value:function(e){var t=this.props;(0,t.fetchRequested)({conversation:t.currentConversation,direction:e})}},{key:"goToBottom",value:function(e){var t=this,n=e.toRow,r=e.index,s=e.position;n?this.listNode&&this.listNode.scrollToRow(r):this.listNode&&this.listNode.scrollToPosition(s),setTimeout((function(){n?t.listNode&&t.listNode.scrollToRow(r):t.listNode&&t.listNode.scrollToPosition(s),t._resolveGridPosition()}))}},{key:"_resolveGridPosition",value:function(){this.listNode&&(this.listNode.measureAllRows(),this.listNode.Grid._rowSizeAndPositionManager.resetCell(0),this.listNode.Grid._rowSizeAndPositionManager.getTotalSize())}},{key:"renderMessage",value:function(e){var t=e.index,n=e.style,r=e.message,s=e.measure,o=e.timeFlag,a=e.isLastMessage,i=e.newMessageFlag,c=e.isLastSystemMessage,u=this.props,l=u.isScChat,d=u.currentUser,p=u.isSubAccount,f=u.resendMessageRequested,h=u.populateMessageRequested,A=u.cancelSendingMessageRequested,m=u.showWarningMessageIds,E=u.shop,v=u.conversationId,b=u.conversationShopId,_=u.conversationBuyerId,y=u.conversationStatus,S=r.type,x=r.content,C=void 0===x?{}:x,O=r.to_id,T=Object(w.a)(S);if(r.type===F){var j=r.content.type;j===G||C.url&&C.url.includes("voucher")?(T=I.a,r.textContent=r.content):j===H&&O===d.id&&(T=M.a)}return g.a.createElement(T,{index:t,style:n,message:r,measure:s,timeFlag:o,isScChat:l,isSubAccount:p,isLastMessage:a,newMessageFlag:i,isLastSystemMessage:c,hasSourceMessageMap:this.hasSourceMessageMap,resendMessageRequested:f,populateMessageRequested:h,addExposedMessageId:this.addExposedMessageId,exposedMessageIds:this.exposedMessageIds,cancelSendingMessageRequested:A,showWarningMessageIds:m,shop:E,conversationId:v,conversationShopId:b,conversationBuyerId:_,conversationStatus:y})}},{key:"render",value:function(){var t=this,n=this.props,r=n.currentUser,s=n.messageList,o=void 0===s?[]:s,a=n.unreadMessageIds,i=void 0===a?[]:a,c=n.currentConversation,u=n.translateTips,l=n.updateTranslateTips,d=n.shopTranslationSettings,p=n.isScChat,f=n.currentConversationTranslationAccess,h=c.status,A=c.shop_id,m=c.to_name,v=c.to_id,_=c.latest_message_from_id,y=o.filter((function(e){return i.includes(e.id)})),S=y.length?y[y.length-1]:null,x=o.length||1,w=v!==_,I=(S||{}).content,M=(void 0===I?{}:I).translation,T=(M=void 0===M?{}:M).text,j=(d[A]||{}).autoTranslationStatus===B.SwitchStatus.ENABLED,k=Object(B.handleDisplayTranslation)(j,w,T,p,f),R=(!u[A]||"closed"!==u[A])&&(j||f),N=e("auto_translation.".concat(j?"":"buyer.","suggestion"));return g.a.createElement("div",{className:P.a.messageSection,id:"messageSection"},g.a.createElement(b.a,null,(function(e){var n=e.width,r=e.height;return g.a.createElement(D.a.Provider,{value:t.imgCache},g.a.createElement(E.a,{width:n,height:r,containerStyle:{},ref:t.getListRef,overscanRowCount:10,className:P.a.grid,onScroll:t.handleScroll,rowCount:x,rowRenderer:t.rowRenderer,rowHeight:t._cache.rowHeight,containerProps:t.containerProps,onRowsRendered:t.handleRowsRender,deferredMeasurementCache:t._cache,onRecomputeGrid:t.handleRecomputeRow}))})),this.state.shouldRenderNewMessageTip&&"closed"!==h&&g.a.createElement(O.a,{currentUser:r,username:m,message:S||{},shopId:A,onClick:this.handleViewNewMessage,enableTranslation:k}),R&&g.a.createElement(C.a,{translationTips:N,currentConversation:c,updateTranslateTips:l}))}}]),r}(g.a.Component);t.a=Object(j.CatchStatus)(Y,{dataKey:"messageList",penddingController:function(e,t,n){return!t||n!==B.DataFetchStatus.INIT_PENDING},scrollController:R.a})}).call(this,n(21).t)},function(e,t){e.exports=x},function(e,t){e.exports=C},function(e,t){e.exports=O},function(e,t){e.exports=w},function(e,t,n){"use strict";var r=n(13),s=n.n(r),o=n(14),a=n.n(o),i=n(6),c=n.n(i),u=n(15),l=n.n(u),d=n(16),p=n.n(d),f=n(9),h=n.n(f),A=n(0),g=n.n(A),m=n(7),E=n(67),v=n.n(E),b=n(76),_=n.n(b),y=function(e){l()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var s=h()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;return s()(this,n),(r=t.call(this,e)).handleClose=r.handleClose.bind(c()(r)),r}return a()(n,[{key:"handleClose",value:function(){var e=this.props,t=e.currentConversation;(0,e.updateTranslateTips)({shopId:t.shop_id,flag:"closed"})}},{key:"render",value:function(){var e=this.props.translationTips;return g.a.createElement("div",{className:_.a.root},g.a.createElement("div",{className:_.a.left},g.a.createElement("div",{className:_.a.icon}),g.a.createElement("div",{className:_.a.tips},e)),g.a.createElement(m.Icon,{svg:v.a,className:_.a.close,onClick:this.handleClose}))}}]),n}(g.a.PureComponent);t.a=y},function(e,t,n){"use strict";var r=n(13),s=n.n(r),o=n(14),a=n.n(o),i=n(15),c=n.n(i),u=n(16),l=n.n(u),d=n(9),p=n.n(d),f=n(0),h=n.n(f),A=n(7),g=n(1),m=n(2),E=n(183),v=n.n(E),b=n(92),_=n.n(b),y=function(e){c()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var s=p()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return l()(this,n)}}(n);function n(){return s()(this,n),t.apply(this,arguments)}return a()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.message,n=e.shopId,r=t.id,s=t.conversation_id;Object(g.impressionTracker)({trackerName:"impressionOrClickUnreadBriefMessage",data:{message_id:r,conversation_id:s},shopId:n})}},{key:"render",value:function(){var e=this.props,t=e.username,n=e.message,r=e.onClick,s=e.shopId,o=e.enableTranslation,a=n.id,i=n.conversation_id;return h.a.createElement("div",{className:_.a.root,onClick:function(){Object(g.clickTracker)({trackerName:"impressionOrClickUnreadBriefMessage",data:{message_id:a,conversation_id:i},shopId:s}),r&&r()}},h.a.createElement("span",{className:_.a.newMessageUsername},t,":"),h.a.createElement("div",{className:_.a.newMessageContent},Object(m.previewMessage)(n,o,!0)),h.a.createElement(A.Icon,{svg:v.a,className:_.a.newMessageArrow}))}}]),n}(h.a.PureComponent);t.a=y},function(e,t){e.exports=I},function(e,t,n){"use strict";(function(e){var r=n(0),s=n.n(r),o=n(93),a=n.n(o),i=s.a.memo((function(){return s.a.createElement("div",{className:a.a.newMessageTip},s.a.createElement("span",{className:a.a.prevLine}),s.a.createElement("span",{className:a.a.newMessageContent},e("conversation_detail.message_list.unread_messages")),s.a.createElement("span",{className:a.a.postLine}))}));t.a=i}).call(this,n(21).t)},function(e,t,n){"use strict";(function(e){var r=n(0),s=n.n(r),o=n(2),a=n(99),i=n(1),c=n(10);t.a=Object(c.connect)((function(e){return{buyerShopId:Object(i.currentBuyerShopIdSelector)(e),currentUserShopId:Object(i.currentUserShopIdSelector)(e)}}),{})((function(t){var n,r=t.isFaking,i=t.content,c=void 0===i?{}:i,u=t.sendStatus,l=t.isSendByMe,d=t.currentUserShopId,p=t.isSubAccount,f=t.isScChat,h=t.buyerShopId,A=t.shopId,g=t.region,m=t.messageId,E=t.conversationId;p||(n="https://".concat(Object(o.getSellerCenterUrl)(),"/portal/sale/").concat(c.id));var v=Object(o.getMallOrderUrl)(c,l?h:d),b=c||{},_=b.id,y=b.status,S=b.image,x=b.title,C=b.products_count,O=Object(o.getOrderPayment)(c,g).payment,w={orderId:_,smallImage:!0,itemCount:C,status:y,statusText:e(Object(o.getOrderStatusTransifyKey)(y)),isSubAccount:p,shopId:A,orderLink:n,mallOrderLink:v,sendStatus:u,isSendByMe:l,isScChat:f,isFaking:r,messageId:m,conversationId:E};return s.a.createElement(a.a,{id:c.id,type:"order",image:S,name:x,price:O,extraProps:w})}))}).call(this,n(21).t)},function(e,t,n){var r=n(19),s=n(229);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]),r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){"use strict";(function(e){var r=n(13),s=n.n(r),o=n(14),a=n.n(o),i=n(6),c=n.n(i),u=n(15),l=n.n(u),d=n(16),p=n.n(d),f=n(9),h=n.n(f),A=n(0),g=n.n(A),m=n(77),E=n.n(m),v=n(188),b=n.n(v),_=n(7),y=n(2),S=function(t){l()(r,t);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var s=h()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return p()(this,n)}}(r);function r(e){var t;return s()(this,r),(t=n.call(this,e)).renderFooterActions=t.renderFooterActions.bind(c()(t)),t}return a()(r,[{key:"renderFooterActions",value:function(){var t=this.props.extraProps,n=t.sendStatus,r=t.isSendByMe;if(!t.isFaking&&[y.MessageSendStatus.SUCCEED,null].includes(n)&&r)return g.a.createElement("div",{className:E.a.sendStatus},g.a.createElement(_.Icon,{svg:b.a,className:E.a.linkArrow}),e("common.order.link_send"))}},{key:"render",value:function(){var t=this.props.type,n="".concat(E.a.root," ").concat(E.a.source);return g.a.createElement("div",{className:n},g.a.createElement("div",{className:E.a.label},e("common.".concat(t,".footer"))),this.renderFooterActions())}}]),r}(g.a.PureComponent);t.a=S}).call(this,n(21).t)},function(e,t){e.exports=M},function(e,t,n){"use strict";(function(e){var r=n(13),s=n.n(r),o=n(14),a=n.n(o),i=n(6),c=n.n(i),u=n(15),l=n.n(u),d=n(16),p=n.n(d),f=n(9),h=n.n(f),A=n(0),g=n.n(A),m=n(59),E=n.n(m),v=n(47),b=n.n(v),_=n(7),y=n(83),S=n.n(y),x=n(84),C=n.n(x),O=n(85),w=n.n(O),I=n(86),M=n.n(I),T=n(87),j=n.n(T),B=n(88),k=n.n(B),R=n(2),N=n(8),P={unpaid:C.a,to_ship:w.a,shipping:M.a,completed:j.a,cancelled:k.a,refund:S.a},D=function(t){l()(r,t);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var s=h()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return p()(this,n)}}(r);function r(e){var t;return s()(this,r),(t=n.call(this,e)).renderOrderStatus=t.renderOrderStatus.bind(c()(t)),t}return a()(r,[{key:"renderOrderStatus",value:function(e){var t=e.status,n=e.statusText,r=P[t];return g.a.createElement("div",{className:E.a.orderStatus},g.a.createElement(_.Icon,{svg:r,className:"".concat(E.a.statusIcon," ").concat(E.a[t])}),g.a.createElement("div",{className:E.a.statusText,title:n},n))}},{key:"render",value:function(){var t=this.props,n=t.image,r=t.price,s=t.extraProps,o=t.imageHash,a=s.itemCount,i=this.renderOrderStatus(s),c=e("conversation_detail.message_list.order_total_price",{orderTotalPrice:r}),u=e(Object(R.formatTransifyKeyWithNumber)("conversation_detail.message_list.order_product_count",a),{orderProductCount:a});return g.a.createElement("div",{className:b.a.detailBlock},g.a.createElement(N.ProductImage,{src:n,hash:o}),g.a.createElement("div",{className:b.a.content},i,g.a.createElement("div",{className:E.a.detail},g.a.createElement("div",{className:E.a.payment,title:c},c),g.a.createElement("div",{className:b.a.divider}),g.a.createElement("div",{className:E.a.sourceCount,title:u},u))))}}]),r}(g.a.PureComponent);t.a=D}).call(this,n(21).t)},function(e,t,n){"use strict";(function(e){var r=n(4),s=n.n(r),o=n(13),a=n.n(o),i=n(14),c=n.n(i),u=n(6),l=n.n(u),d=n(15),p=n.n(d),f=n(16),h=n.n(f),A=n(9),g=n.n(A),m=n(0),E=n.n(m),v=n(53),b=n.n(v),_=n(55),y=n.n(_),S=n(47),x=n.n(S),C=n(8),O=n(2),w=O.ProductStatusUsingNumber.DELETED,I=O.ProductStatusUsingNumber.BANNED,M=O.ProductStatusUsingNumber.SOLD_OUT,T=O.ProductStatusUsingNumber.NORMAL,j=O.ProductStatusUsingNumber.DELISTED,B=[w,I,M,j],k=function(t){p()(r,t);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var s=g()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return h()(this,n)}}(r);function r(e){var t;return a()(this,r),(t=n.call(this,e)).renderProductStatus=t.renderProductStatus.bind(l()(t)),t}return c()(r,[{key:"renderProductStatus",value:function(t){var n,r=t.status,o=void 0===r?T:r,a=t.stock,i=void 0===a?0:a,c=Object(O.getProductStatusTransifyKey)(o),u=o===T?e(Object(O.formatTransifyKeyWithNumber)(c,i),{productStock:i}):e(c);return E.a.createElement("div",{className:b()(y.a.status,(n={},s()(n,y.a.normal,o===T),s()(n,y.a.deleted,o===w),s()(n,y.a.invalid,o!==T&&o!==w),n))},u)}},{key:"render",value:function(){var e=this.props,t=e.image,n=e.image_hash,r=e.name,o=e.price,a=e.extraProps,i=a||{},c=i.originalPrice,u=i.status,l=this.renderProductStatus(a),d=B.includes(u);return E.a.createElement("div",{className:x.a.detailBlock},u===w?E.a.createElement(C.UnavailableProduct,{className:y.a.productDeleted}):E.a.createElement(E.a.Fragment,null,E.a.createElement(C.ProductImage,{src:t,hash:n,isProductInvalid:d}),E.a.createElement("div",{className:x.a.content},E.a.createElement("div",{className:x.a.productName,title:r},r),E.a.createElement("div",{className:b()(x.a.productDetail,s()({},y.a.origin,!!c))},c&&E.a.createElement("div",{title:c,className:y.a.originalPrice},c),E.a.createElement("div",{className:y.a.price,title:o},o),E.a.createElement("div",{className:x.a.divider}),l))))}}]),r}(E.a.PureComponent);t.a=k}).call(this,n(21).t)},function(e,t,n){"use strict";(function(e){var r=n(0),s=n.n(r),o=n(94),a=n.n(o),i=n(7),c=n(2),u=n(134),l=n.n(u),d=s.a.memo((function(t){var n=t.message,r=t.resendMessage,o=n.send_status,u=n.errorCode,d=n.message_option,p=o===c.MessageSendStatus.FAILED,f=u===c.MessageErrorCode.BLACKLIST,h=Object(c.hasTargetMessageOption)(d,c.MessageOption.NOT_SEND),A=s.a.createElement("div",{className:a.a.iconWrap},s.a.createElement(i.Icon,{svg:l.a,className:a.a.iconBase}));return p?f?A:s.a.createElement("div",{className:a.a.iconWrap},s.a.createElement(i.Tooltip,{content:e("conversation_detail.message_list.resend")},s.a.createElement(i.Icon,{svg:l.a,className:a.a.icon,onClick:r}))):h?A:s.a.createElement(s.a.Fragment,null)}));d.displayName="ErrorContent",t.a=d}).call(this,n(21).t)},function(e,t,n){"use strict";(function(e){var r=n(0),s=n.n(r),o=n(135),a=n.n(o),i=n(7),c=n(8),u=n(2),l=n(193),d=n.n(l),p=n(1),f=n(10),h=u.MessageTypes.MSG_TYPE_VIDEO,A=u.MessageTypes.MSG_TYPE_IMAGE,g=u.MessageTypes.MSG_TYPE_STICKER,m=s.a.memo((function(t){var n=t.type,r=t.status,o=t.videoUploaded,l=t.handleCancelMessage;return r===u.MessageSendStatus.SENDING?s.a.createElement("div",{className:a.a.sendingWrap},n!==h||o?[A,g].includes(n)?null:s.a.createElement(c.LoadingSpin,{theme:"dark"}):s.a.createElement(i.Tooltip,{content:e("common.cancel")},s.a.createElement(i.Icon,{svg:d.a,className:a.a.icon,onClick:l}))):null}));t.a=Object(f.connect)((function(e,t){var n=!1;return t.type===h&&(n="successful"===(Object(p.selectVideoInfoByKey)(t.requestId)(e)||{}).status),{videoUploaded:n}}),{})(m)}).call(this,n(21).t)},function(e,t){e.exports=T},function(e,t,n){"use strict";(function(e){var r=n(0),s=n.n(r),o=n(10),a=n(195),i=n(196),c=n(1),u=n(2),l=n(138),d=n.n(l),p=u.MessageTypes.MSG_TYPE_OFFER;t.a=Object(o.connect)((function(e){return{currentConversationToName:Object(c.currentConversationToNameSelector)(e)}}),{})((function(t){var n=t.message;if(!n)return s.a.createElement(s.a.Fragment,null);var r,o=t.currentConversationToName,c=t.conversationBuyerId,l=t.shop,f=n.type,h=n.textContent,A=n.to_id,g=n.errorCode,m=n.message_option,E=A===c;if(f===p&&h){var v=h.buyer_id===c;switch(h.status){case u.OfferStatus.ACCEPTED:r=v?E?null:e("conversation_detail.message_list.accept_offer"):E?e("conversation_detail.message_list.accept_offer_user",{username:o}):null;break;case u.OfferStatus.REJECTED:r=v?E?null:e("conversation_detail.message_list.reject_offer"):E?e("conversation_detail.message_list.reject_offer_user",{username:o}):null;break;case u.OfferStatus.CANCELLED:r=v?e("conversation_detail.message_list.cancel_offer",{username:o}):e("conversation_detail.message_list.cancel_offer_self")}}if(g===u.MessageErrorCode.FORBIDDEN)r=e("conversation_detail.message_list.error_message_blocked",{username:o});else if(g===u.MessageErrorCode.BLACKLIST)r=s.a.createElement(a.a,{color:"#bbb"});else if(g===u.MessageErrorCode.UNVERIFIED_PHONE_NUMBER)r=e("conversation_detail.message_list.unverified_phone_number");else if(E&&(Object(u.hasTargetMessageOption)(m,u.MessageOption.NOT_SEND)||Object(u.hasTargetMessageOption)(m,u.MessageOption.SEND))){var b=l&&l.country?l.country.toLowerCase():"sg";r=s.a.createElement(i.a,{code:m,region:b})}return r?s.a.createElement("div",{className:d.a.metaInfo},s.a.createElement("div",{className:d.a.metaContent},r)):s.a.createElement(s.a.Fragment,null)}))}).call(this,n(21).t)},function(e,t,n){"use strict";(function(e){var r=n(0),s=n.n(r),o=n(2),a=n(136),i=n.n(a);t.a=function(t){var n=t.color;return s.a.createElement("div",{className:i.a.root,style:{color:n}},e("common.blacklist.note_message"),s.a.createElement("span",{className:i.a.learnMore,onClick:function(){window.open("https://".concat(Object(o.getMallUrl)(),"/communityRules/"))}},e("common.learn_more")))}}).call(this,n(21).t)},function(e,t,n){"use strict";(function(e){var r=n(0),s=n.n(r),o=n(137),a=n.n(o),i=n(2);t.a=function(t){var n=t.code,o=Object(r.useRef)(null),c=function(){var e=t.region;window.open("".concat(i.cancelOrderPolicy[e]||i.cancelOrderPolicy.sg))};Object(r.useEffect)((function(){if(o&&o.current){var e=o.current.firstElementChild;if(e)return e.className=a.a.policy,e.addEventListener("click",c),function(){e.removeEventListener("click",c)}}}),[o]);var u=Object(i.hasTargetMessageOption)(n,i.MessageOption.NOT_SEND),l=Object(i.hasTargetMessageOption)(n,i.MessageOption.SEND);if(!u&&!l)return null;var d=u?e("cancel_order.meta.not_send"):l?e("cancel_order.meta.send_it"):"";return s.a.createElement("div",{ref:o,className:a.a.root,dangerouslySetInnerHTML:{__html:d}})}}).call(this,n(21).t)},function(e,t){e.exports=j},function(e,t){e.exports=B},function(e,t){e.exports=k},function(e,t,n){"use strict";(function(e){var r=n(0),s=n.n(r),o=n(53),a=n.n(o),i=n(205),c=n(206),u=n(8),l=n(2),d=n(61),p=n.n(d);t.a=function(t){var n=t.isSend,r=t.handleReload,o=t.message,d=t.updateCurrentFaqId,f=t.conversationShopId,h=t.fetchFaqMessagesRequested,A=t.handleMessageIsSend,g=o.id,m=o.type,E=o.content.messages,v=void 0===E?[]:E,b=o.textContent,_=void 0===b?{messages:[],error:""}:b,y=_.messages,S=void 0===y?[]:y;if(_.error)return s.a.createElement(u.Processor,{type:"reload",messageType:m,reloadRequest:r});var x=S.filter((function(e){return"webview"!==e.type})).map((function(e){var t=function(e){return{username:e.from_user_name,content:Object(l.previewMessage)(e)}}(e),n=t.username,r=t.content;return s.a.createElement("div",{key:"faq-".concat(e.id),className:p.a.preview},"".concat(n,": ").concat(r))}));return s.a.createElement(i.a,{onClose:function(){return d({id:null})},title:e("conversation_list.conversation_cell.new_bundle_message_message"),className:p.a.container,label:s.a.createElement("div",{onClick:function(){return h({sourceId:g,shopId:f,reset:!0})},className:a()(p.a.root,n?p.a.send:p.a.receive)},s.a.createElement("div",{className:p.a.header},e("conversation_list.conversation_cell.new_bundle_message_message")),s.a.createElement("div",{style:{height:"".concat(18*(v.length>3?3:v.length),"px")}},x),s.a.createElement("div",{className:p.a.footer},e("faq_history.see_all")))},s.a.createElement(c.a,{fetchFaqMessagesRequested:h,handleMessageIsSend:A}))}}).call(this,n(21).t)},function(e,t){e.exports=R},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),s=function(e,t,n,s,o,a,i){var c=e!==t;c&&(i&&s===r.DataFetchStatus.FAILED&&i(),n(e));var u=a.current;u&&clearTimeout(u),a.current=setTimeout((function(){c&&!s.toLowerCase().includes("init")&&o(r.DataFetchStatus.SUCCEED)}),10)}},,,function(e,t,n){"use strict";var r=n(22),s=n.n(r),o=n(0),a=n.n(o),i=n(201),c=n.n(i),u=n(7),l=n(67),d=n.n(l),p=n(95),f=n.n(p),h=function(e){var t=e.title,n=e.closeModal,r=e.noCancel,s="".concat(f.a.root," ").concat(r?"":f.a.hasCancel);return a.a.createElement("div",{className:s},a.a.createElement("div",{className:f.a.title},t),!r&&a.a.createElement(u.Icon,{svg:d.a,className:f.a.cancel,onClick:n}))},A=n(104),g=n.n(A),m=function(e){var t,n=e.label,r=e.title,i=e.children,u=e.closeable,l=e.onClick,d=e.className,p=e.getModalVisible,f=e.onClose,A=Object(o.useState)(!1),m=s()(A,2),E=m[0],v=m[1],b=function(){var e=E;v(!e),"function"==typeof p&&p(!e),"function"==typeof f&&e&&f()};return t="#".concat(window.miniChatContainerId),a.a.createElement("div",{className:g.a.root},a.a.createElement("div",{onClick:function(e){return function(e){var t=function(){e.stopPropagation(),b()};"function"==typeof l?l(t):t()}(e)}},n),a.a.createElement(c.a,{isOpen:E,className:g.a.content,overlayClassName:g.a.overlay,shouldReturnFocusAfterClose:!1,onRequestClose:u?b:null,parentSelector:function(){return document.querySelector(t)}},a.a.createElement("div",{className:d},a.a.createElement(h,{title:r,closeModal:b}),i)))};m.defaultProps={closeable:!1},t.a=m},function(e,t,n){"use strict";var r=n(0),s=n.n(r),o=n(10),a=n(12),i=n(1),c=n(66),u=n(100),l=n(74),d=n(101),p=n(8),f=n(2),h=n(56),A=n.n(h),g=f.MessageTypes.MSG_TYPE_WEBVIEW,m=f.MessageTypes.MSG_TYPE_RATE_CARDS,E=f.MessageTypes.MSG_TYPE_VOUCHER_WEB,v={},b=s.a.createContext({}),_=function(e){var t=e.isScChat,n=e.currentUser,o=e.isSubAccount,a=e.messageList,i=e.populateMessageRequested,h=e.messageHttpStatus,_=e.fetchFaqMessagesRequested,y=e.sourceId,S=e.shop,x=e.conversationId,C=e.conversationShopId,O=e.conversationBuyerId,w=e.conversationStatus,I=e.handleMessageIsSend,M=function(){},T=Object(r.useRef)({});return s.a.createElement("div",{className:A.a.list},s.a.createElement(b.Provider,{value:T.current},s.a.createElement(c.a,{style:{backgroundColor:"#fff"},makeItem:function(e,r){if(e&&e.content){var a=e.type,c=e.fetchStatus,h=void 0===c?"":c,b=e.content,y=void 0===b?{}:b,T=e.to_id,j=e.from_user_name,B=e.created_timestamp,k=T===O,R=Object(f.customizeTime)(1e3*B),N=Object(u.a)(a);if(e.type===g){var P=y.type;P===E||y.url&&y.url.includes("voucher")?(N=l.a,e.textContent=e.content):P===m&&T===n.id&&(N=d.a)}return s.a.createElement("div",{key:e.id,className:A.a.baseMessage},function(e,t,n){var r=[s.a.createElement("span",{key:"name",className:A.a.username},e),s.a.createElement("span",{key:"split",className:A.a.split}),s.a.createElement("span",{key:"time",className:A.a.stamp},t)],o="".concat(A.a.header," ").concat(n?A.a.right:"");return s.a.createElement("div",{className:o},n?r.reverse():r)}(j,R,k),h.includes("Card")?s.a.createElement(p.Processor,{type:"loading",messageType:a,content:y}):s.a.createElement(N,{className:A.a.message,index:r,shop:S,message:e,isScChat:t,newMessageFlag:!1,currentUser:n,isSubAccount:o,hasSourceMessageMap:v,populateMessageRequested:i,fetchFaqMessagesRequested:_,conversationId:x,conversationShopId:C,conversationBuyerId:O,conversationStatus:w,measure:M,replyOfferRequested:M,evaluationRequested:M,claimVoucherRequested:M,sendMessagesRequested:M,resendMessageRequested:M,translateMessagesRequested:M,handleMessageIsSend:I,isInFaqHistoryModal:!0}))}},listData:a,status:h,onLoadMore:function(){return _({sourceId:y,shopId:C})},onRefresh:function(){return _({sourceId:y,shopId:C,reset:!a.length})}})))},y={changeTranslateStatus:a.changeTranslateStatus,populateMessageRequested:a.populateMessageRequested};t.a=Object(o.connect)((function(e){return{isScChat:Object(i.isScChatSelector)(e),translateTips:Object(i.tipsSelector)(e),isSubAccount:Object(i.isSubAccountSelector)(e),messageList:Object(i.faqHistoryMessagesSelector)(e),currentUser:Object(i.currentUserSelector)(e),messageHttpStatus:Object(i.faqHistoryhttpStatusSelector)(e),currentConversation:Object(i.currentConversationSelector)(e),sourceId:Object(i.faqIdSelector)(e),conversationId:Object(i.currentConversationIdSelector)(e),conversationShopId:Object(i.currentConversationShopIdSelectors)(e),conversationBuyerId:Object(i.currentConversationBuyerIdSelectors)(e),conversationStatus:Object(i.currentConversationStatusSelectors)(e),shop:Object(i.currentConversationShopSelectors)(e)}}),y)((function(e){return s.a.createElement(_,e)}))},,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(20),s=n(72),o=n(226);t=r(!0);var a=s(o);t.push([e.i,"._2XZHkj8XnVnnta-8WzidfJ {\n  font-size: 12px;\n  padding: 4px 8px;\n  background-color: #fff6e1;\n  color: #333;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  z-index: 2;\n}\n\n.V0OU5JpZR_H0JiqzwnL7F {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.vwFS5vtz3pPGChtVETovP {\n  height: 14px;\n  width: 14px;\n  background: url("+a+") no-repeat center;\n  background-size: contain;\n  flex-shrink: 0;\n  flex-grow: 0;\n}\n\n._2HuZSX84ERzxWzLCIZOWpE {\n  font-size: 12px;\n  padding-left: 0.625em;\n}\n\n._1f26uo6jogKBGyW15YurpC {\n  height: 10px;\n  width: 10px;\n  min-width: 10px;\n  color: #bbb;\n  cursor: pointer;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,gBAAgB;EAChB,yBAAyB;EACzB,WAAW;EACX,aAAa;EACb,mBAAmB;EACnB,8BAA8B;EAC9B,kBAAkB;EAClB,OAAO;EACP,SAAS;EACT,UAAU;AACZ;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,2BAA2B;AAC7B;;AAEA;EACE,YAAY;EACZ,WAAW;EACX,oEAAsD;EACtD,wBAAwB;EACxB,cAAc;EACd,YAAY;AACd;;AAEA;EACE,eAAe;EACf,qBAAqB;AACvB;;AAEA;EACE,YAAY;EACZ,WAAW;EACX,eAAe;EACf,WAAW;EACX,eAAe;AACjB",file:"index.css",sourcesContent:[".root {\n  font-size: 12px;\n  padding: 4px 8px;\n  background-color: #fff6e1;\n  color: #333;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  z-index: 2;\n}\n\n.left {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.icon {\n  height: 14px;\n  width: 14px;\n  background: url('./notification.png') no-repeat center;\n  background-size: contain;\n  flex-shrink: 0;\n  flex-grow: 0;\n}\n\n.tips {\n  font-size: 12px;\n  padding-left: 0.625em;\n}\n\n.close {\n  height: 10px;\n  width: 10px;\n  min-width: 10px;\n  color: #bbb;\n  cursor: pointer;\n}\n"]}]),t.locals={root:"_2XZHkj8XnVnnta-8WzidfJ",left:"V0OU5JpZR_H0JiqzwnL7F",icon:"vwFS5vtz3pPGChtVETovP",tips:"_2HuZSX84ERzxWzLCIZOWpE",close:"_1f26uo6jogKBGyW15YurpC"},e.exports=t},function(e,t,n){"use strict";n.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAAAXNSR0IArs4c6QAABw5JREFUaAXVGmuIVkX0zP0+bd2nrroPNYsUU6x9mKYQrhrYHy31hwRlkIpWCBERQWAg9IIC+xHRiyyoiPDHupVECbquBJXi7haSkklpuQ9r1TXX137fdM7MnXvnfjNzv+/uI3PAb86cOc+dMzPnzBVAa7x98RU1TBPADy/mAjF+OcIgYTXB9YaEns4uuPwfpjh0JMFeLsIYowFf8fam19WEVRSbd4CxwNTGNknc3iR6pw7hoCDxKfPrUBTUB/p0pA+TQQRarQVlIFFEVLMuj/wlfNB0YkJGxrzWA8aOBsQFAHaTiLGhFaBjKUDNeoDuDwiDC+Q9JhjkiJxuOo2/tWoc9ETYsP9dGkcYCME7mx6ADOxA8CxMrq5jN++8RHjVAgaUfhDJ56uJSO+NmcYa9v5JOMGAxCiFF0WIcgep9CJWv+/7ND99fzF0nwuJ53wEUHSLJD//LcCJ5yScGfwOAeYh8cWIMEVMyIp7IlMY9s3OKItQqgGH1ckYkDHKkKpQspx9uCOcJNoEg/WeCtsAfbtYUDksnh2gCWCNBz6UJnmpR4KZY5sDEAbCuFSCw5Xma1PQ3j0YUoeQIiZMwBBOS0gsaM+5bjySynLnjLHHnmcNbS8aeEQYCgoKK5skhcM/B2to/VgNAwWxwa2oIYU7fB/uk70Av20LsFagsSbN2M6MUIAh2O/8U9zRAjBmglWGQPb/APDrM/b5dHmlJ/Zv3N85TjiJLb/bLpywg/19nn84uImGOUNxenaYMmLZGT+1dhyc6R4wqLxigBmvGWgn4pcttqkBucgdTVshy1+wUQjcnE8Afn5YTtfvAehcLuGG/XiyL3Gy0YYLw7Tj3qmQvfaHkzrRBOti89qmEEugQPHzzmULQR63CpWgDwUrJkOBmqCe/7hiAmT6d+AeWa3jNXgATdxCp5qGi4CxCohSBMFfPS+jkpXA+HTg7AJiD0KKvcXq2z6PSLMMnAp4voVXwhhcgOrxNWzKF2YkIo2hgA95sdkhXNgFSq/qI3cU71i6buiRxOfLk1iJln2gQERPNoO3eExjYwFK6mMIeFGuEqGA0+1USGjSJpv1RowCmhJKMK+RTawBarWnUURTdhfAzCDh9dn87siDAFe7ojg1qhlfQgvviVi35WhEmMZ7wCWc5ud+Rr/2RtctNjyucSO52rSnXDMhfuKKENYh/47xYnYpQKpEZ7HDdOo6Gl1mQRQ5aIaHzvAnRlcBsAWjq4DxstFVwNnJeAXFc/KvQWmdm4bBl5T+UgpvhsJtr2AUlbuZ9ZmLPwGcflvHSHhyTTHDpOtRDFW/VDJphoOhO9mLu42EcJYGIG9Um/qkhNITAarXKazZY0JMSLkGWLqZFD5m7s6wNBIcqJDa4N8AtZskbPlV2XZw4cQeeBYBsSitEgyiSKUZsYyFTIr0XZaZRB54oHiH5YlfjipZ1AceKKTwJG5NFGGkZ11A9QDWuhE0DgwPdAI/hN9EnLlPiJDBLtwrG1jdbmcCHatAV5YL+0nZKsSvwn10H/Z2I3IZwzElbd/gsAWNbIkzMmQxoYIdEHlBZ+9GTMK34b1uvoKYsoeAwaX02Daor3qfyrtCBOR1QObamebRM9plJjqTSq2xxaXO4XRA5pB50jxd0mjCOZW9rspwQGbWg5j2jUCYUAFZvlDq+/0lgL6vdd0JYQqv9AL1lKaYIw7wjiWbIZt9R00m6/EJoxL3chlWB2Or8IC7CWDcDDxJ/KvjGh4kl0/gv1MA51oB/jmcTLyi1l4cCRU4UHCxpASpvnQepsbbUZJxJCsKd3+1F+DYRrwXz7tpbDPay5RwYMgpRdVDAFMft6lIhju6AeDS8WQ8+HQoXgNF/cuBLpPkrQz/+iPRShuTS0GbyXYPqHhPfgklVzjyHMVkOxVOK0de9n8kEW3Hrxn4bHKjNrQdV4DefG7Qhrbj2YcPVte9Bad5Qkv4QSa/NvGWgjkZXlDT8fm7YjGWhUkT0Bgtl/CSo5u699MYopypFFul7oHm2FeQHL7/xRBrBbwH1sjrE4sGvJOHtxdS+GknVWr6VnInPmRVmvix4qXZxBeCIVvJZmzCAVFM4Fsq5gNdhfAbNHQj1+2WYZU7OQvvyFqhKzpz61aAeqxnxkyK4vOO0EZ69/WrtMjuEUVLew9+1nR8WHUJp3zoCiZp186YFJOwaLt4xJ4q0Pvl5ZN2PlMSYtghaKxepBc7EQcUj1/EtKIjRQp3fXt2GYubpbbixuqAMlYWNdn3rp8jaLjnbdI/UyrbVB/rgCLyi5xdiUNLCUjcY6h46dW5xYtNTEEO6Izii3Lv+aeB82fx6M3/VVlndsF0qjD2KlRVbHd9lHGzumYS4EVK3tezHLKwDB2bjZttJrJPwDxLOijTFSzJ+HHxP0k82AeV1Xty/4tGApUB6b9C7EuhDaGPMgAAAABJRU5ErkJggg=="},function(e,t,n){(t=n(20)(!0)).push([e.i,".CNKrzIWP-OkPpQbrM0-Oc {\n  left: 0;\n  bottom: 0;\n  color: #333;\n  display: flex;\n  width: 100%;\n  padding: 4px 8px;\n  font-size: 12px;\n  cursor: pointer;\n  position: absolute;\n  align-items: center;\n  flex-direction: row;\n  box-sizing: border-box;\n  background-color: rgba(232, 232, 232, 0.97);\n}\n\n._1BhT964mMRb3S4BuolNQQ7 {\n  font-weight: bold;\n}\n\n._1scfp7beuCTkEWXGUyO5hI {\n  margin-left: 0.5em;\n  flex-grow: 1;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.mp1XuJKArBi6lSqIbY4gZ {\n  display: inline-block;\n  width: 14px;\n  height: 14px;\n  flex-shrink: 0;\n  flex-grow: 0;\n  color: #01bfa5;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,OAAO;EACP,SAAS;EACT,WAAW;EACX,aAAa;EACb,WAAW;EACX,gBAAgB;EAChB,eAAe;EACf,eAAe;EACf,kBAAkB;EAClB,mBAAmB;EACnB,mBAAmB;EACnB,sBAAsB;EACtB,2CAA2C;AAC7C;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,qBAAqB;EACrB,WAAW;EACX,YAAY;EACZ,cAAc;EACd,YAAY;EACZ,cAAc;AAChB",file:"index.css",sourcesContent:[".root {\n  left: 0;\n  bottom: 0;\n  color: #333;\n  display: flex;\n  width: 100%;\n  padding: 4px 8px;\n  font-size: 12px;\n  cursor: pointer;\n  position: absolute;\n  align-items: center;\n  flex-direction: row;\n  box-sizing: border-box;\n  background-color: color(#e8e8e8 alpha(97%));\n}\n\n.new-message-username {\n  font-weight: bold;\n}\n\n.new-message-content {\n  margin-left: 0.5em;\n  flex-grow: 1;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.new-message-arrow {\n  display: inline-block;\n  width: 14px;\n  height: 14px;\n  flex-shrink: 0;\n  flex-grow: 0;\n  color: #01bfa5;\n}\n"]}]),t.locals={root:"CNKrzIWP-OkPpQbrM0-Oc","new-message-username":"_1BhT964mMRb3S4BuolNQQ7",newMessageUsername:"_1BhT964mMRb3S4BuolNQQ7","new-message-content":"_1scfp7beuCTkEWXGUyO5hI",newMessageContent:"_1scfp7beuCTkEWXGUyO5hI","new-message-arrow":"mp1XuJKArBi6lSqIbY4gZ",newMessageArrow:"mp1XuJKArBi6lSqIbY4gZ"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._3Zuz4gS_09RAlIXs-A3_mD {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-top: 1em;\n  line-height: 1.5;\n  color: #bbb;\n  font-size: 12px;\n  text-align: center\n}\n._3Zuz4gS_09RAlIXs-A3_mD ._1rI3ImajL8yA946BPU7dMq {\n    margin: 0 1em;\n  }\n._3Zuz4gS_09RAlIXs-A3_mD ._3loxdyn6L6DBQ9VfS0cTt0 {\n    flex-grow: 1;\n    height: 1px;\n    background-color: #f0f0f0;\n  }\n._3Zuz4gS_09RAlIXs-A3_mD ._3RtylBfyYcKudVkKnM5yZL {\n    height: 1px;\n    flex-grow: 1;\n    background-color: #f0f0f0;\n  }\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,gBAAgB;EAChB,WAAW;EACX,eAAe;EACf;AAiBF;AAfE;IACE,aAAa;EACf;AAEA;IACE,YAAY;IACZ,WAAW;IACX,yBAAyB;EAC3B;AAEA;IACE,WAAW;IACX,YAAY;IACZ,yBAAyB;EAC3B",file:"index.css",sourcesContent:[".new-message-tip {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-top: 1em;\n  line-height: 1.5;\n  color: #bbb;\n  font-size: 12px;\n  text-align: center;\n\n  & .new-message-content {\n    margin: 0 1em;\n  }\n\n  & .prev-line {\n    flex-grow: 1;\n    height: 1px;\n    background-color: #f0f0f0;\n  }\n\n  & .post-line {\n    height: 1px;\n    flex-grow: 1;\n    background-color: #f0f0f0;\n  }\n}\n"]}]),t.locals={"new-message-tip":"_3Zuz4gS_09RAlIXs-A3_mD",newMessageTip:"_3Zuz4gS_09RAlIXs-A3_mD","new-message-content":"_1rI3ImajL8yA946BPU7dMq",newMessageContent:"_1rI3ImajL8yA946BPU7dMq","prev-line":"_3loxdyn6L6DBQ9VfS0cTt0",prevLine:"_3loxdyn6L6DBQ9VfS0cTt0","post-line":"_3RtylBfyYcKudVkKnM5yZL",postLine:"_3RtylBfyYcKudVkKnM5yZL"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._29xNVRb5TdyTPH4YP2yf-o {\n  font-size: 16px;\n  width: calc(100% - 1em);\n  padding: 0.5em;\n  background-color: #f7f8fb;\n  height: 57px;\n  box-sizing: content-box;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,uBAAuB;EACvB,cAAc;EACd,yBAAyB;EACzB,YAAY;EACZ,uBAAuB;AACzB",file:"index.css",sourcesContent:[".root {\n  font-size: 16px;\n  width: calc(100% - 1em);\n  padding: 0.5em;\n  background-color: #f7f8fb;\n  height: 57px;\n  box-sizing: content-box;\n}\n"]}]),t.locals={root:"_29xNVRb5TdyTPH4YP2yf-o"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._3k04xz4WmTOyq6Z1ODP87B {\n  margin-top: 1em;\n  padding-top: 0.25em;\n  border-top: 1px dashed #f1f3f4\n}\n\n._3k04xz4WmTOyq6Z1ODP87B._1XUH6t4kA-sfuElQBXrPCU {\n    display: flex;\n    margin-top: 0.5em;\n    justify-content: space-between;\n  }\n\n.jsvm-uN4wR54Ze4gxQrQA,\n.g8pCOOd0iMM4X-ZIsyCu4,\n._1WcrxiCYB0fq7_ypQF11QS,\n._1MqEF8pgKM3MrK6oJaD2Lv,\n.p0tIx-HQb00-fI0aYCb1O {\n  font-size: 12px;\n  line-height: 14px;\n  transform: scale(0.916);\n}\n\n.jsvm-uN4wR54Ze4gxQrQA {\n  color: #555;\n}\n\n._3qpL2Q4aTaO1TnaaPvOVbK {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.g8pCOOd0iMM4X-ZIsyCu4,\n._1WcrxiCYB0fq7_ypQF11QS {\n  cursor: pointer\n}\n\n.g8pCOOd0iMM4X-ZIsyCu4._31ozcZzPpnzUvY1RN5DXwZ, ._1WcrxiCYB0fq7_ypQF11QS._31ozcZzPpnzUvY1RN5DXwZ {\n    cursor: not-allowed;\n  }\n\n.g8pCOOd0iMM4X-ZIsyCu4 {\n  color: #395692;\n  margin-left: 1.333em;\n}\n\n._1WcrxiCYB0fq7_ypQF11QS {\n  color: #b71b1c;\n}\n\n._11dOMe3wcgGsjKYc9NLgZr,\n._3ZzQpfKbMv-v_SJeURcO2Y {\n  font-size: 12px;\n  width: 1em;\n  height: 1em;\n  margin-right: 0.5em;\n}\n\n._11dOMe3wcgGsjKYc9NLgZr {\n  transform: rotate(-45deg);\n  color: #54cc77;\n}\n\n._1MqEF8pgKM3MrK6oJaD2Lv {\n  color: #888;\n  max-width: 120px;\n  white-space: nowrap;\n}\n\n.p0tIx-HQb00-fI0aYCb1O {\n  color: #395692;\n  cursor: pointer;\n  margin-left: 1.33em;\n}\n\n._3dTaEOEW3G-i3-NpCtqscr {\n  color: #ccc;\n  cursor: default;\n}\n\n._2Dd3pzc4Vy0p8X6EwETWLy {\n  display: flex;\n  align-items: center;\n  color: #888;\n  font-size: 11px;\n  transform: scale(0.9);\n}\n\n.tF16bezjFaUbT_q4wYzEU {\n  width: 10px;\n  height: 10px;\n  color: #888;\n  line-height: 12px;\n  margin-right: 4px;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,mBAAmB;EACnB;AAOF;;AALE;IACE,aAAa;IACb,iBAAiB;IACjB,8BAA8B;EAChC;;AAGF;;;;;EAKE,eAAe;EACf,iBAAiB;EACjB,uBAAuB;AACzB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,yBAAyB;AAC3B;;AAEA;;EAEE;AAKF;;AAHE;IACE,mBAAmB;EACrB;;AAGF;EACE,cAAc;EACd,oBAAoB;AACtB;;AAEA;EACE,cAAc;AAChB;;AAEA;;EAEE,eAAe;EACf,UAAU;EACV,WAAW;EACX,mBAAmB;AACrB;;AAEA;EACE,yBAAyB;EACzB,cAAc;AAChB;;AAEA;EACE,WAAW;EACX,gBAAgB;EAChB,mBAAmB;AACrB;;AAEA;EACE,cAAc;EACd,eAAe;EACf,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,eAAe;AACjB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,WAAW;EACX,eAAe;EACf,qBAAqB;AACvB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,WAAW;EACX,iBAAiB;EACjB,iBAAiB;AACnB",file:"index.css",sourcesContent:[".root {\n  margin-top: 1em;\n  padding-top: 0.25em;\n  border-top: 1px dashed #f1f3f4;\n\n  &.source {\n    display: flex;\n    margin-top: 0.5em;\n    justify-content: space-between;\n  }\n}\n\n.label,\n.accept-btn,\n.reject-btn,\n.status-text,\n.link {\n  font-size: 12px;\n  line-height: 14px;\n  transform: scale(0.916);\n}\n\n.label {\n  color: #555;\n}\n\n.actions {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.accept-btn,\n.reject-btn {\n  cursor: pointer;\n\n  &.disabled {\n    cursor: not-allowed;\n  }\n}\n\n.accept-btn {\n  color: #395692;\n  margin-left: 1.333em;\n}\n\n.reject-btn {\n  color: #b71b1c;\n}\n\n.accept-icon,\n.reject-icon {\n  font-size: 12px;\n  width: 1em;\n  height: 1em;\n  margin-right: 0.5em;\n}\n\n.accept-icon {\n  transform: rotate(-45deg);\n  color: #54cc77;\n}\n\n.status-text {\n  color: #888;\n  max-width: 120px;\n  white-space: nowrap;\n}\n\n.link {\n  color: #395692;\n  cursor: pointer;\n  margin-left: 1.33em;\n}\n\n.no-access {\n  color: #ccc;\n  cursor: default;\n}\n\n.send-status {\n  display: flex;\n  align-items: center;\n  color: #888;\n  font-size: 11px;\n  transform: scale(0.9);\n}\n\n.link-arrow {\n  width: 10px;\n  height: 10px;\n  color: #888;\n  line-height: 12px;\n  margin-right: 4px;\n}\n"]}]),t.locals={root:"_3k04xz4WmTOyq6Z1ODP87B",source:"_1XUH6t4kA-sfuElQBXrPCU",label:"jsvm-uN4wR54Ze4gxQrQA","accept-btn":"g8pCOOd0iMM4X-ZIsyCu4",acceptBtn:"g8pCOOd0iMM4X-ZIsyCu4","reject-btn":"_1WcrxiCYB0fq7_ypQF11QS",rejectBtn:"_1WcrxiCYB0fq7_ypQF11QS","status-text":"_1MqEF8pgKM3MrK6oJaD2Lv",statusText:"_1MqEF8pgKM3MrK6oJaD2Lv",link:"p0tIx-HQb00-fI0aYCb1O",actions:"_3qpL2Q4aTaO1TnaaPvOVbK",disabled:"_31ozcZzPpnzUvY1RN5DXwZ","accept-icon":"_11dOMe3wcgGsjKYc9NLgZr",acceptIcon:"_11dOMe3wcgGsjKYc9NLgZr","reject-icon":"_3ZzQpfKbMv-v_SJeURcO2Y",rejectIcon:"_3ZzQpfKbMv-v_SJeURcO2Y","no-access":"_3dTaEOEW3G-i3-NpCtqscr",noAccess:"_3dTaEOEW3G-i3-NpCtqscr","send-status":"_2Dd3pzc4Vy0p8X6EwETWLy",sendStatus:"_2Dd3pzc4Vy0p8X6EwETWLy","link-arrow":"tF16bezjFaUbT_q4wYzEU",linkArrow:"tF16bezjFaUbT_q4wYzEU"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._1ZKQu_hdrOyA9AkELOzAry {\n  display: flex;\n  align-items: center;\n  margin-bottom: 2px;\n}\n\n._3H_sMvt_zHYP1Ww4hoTHKW {\n  height: 0.875em;\n  width: 0.875em;\n  margin-right: 4px\n}\n\n._3H_sMvt_zHYP1Ww4hoTHKW._156s7q7NbDV_XaBBjAkExS {\n    color: #f5a623;\n  }\n\n._3H_sMvt_zHYP1Ww4hoTHKW._3mbdwXCy-vXlS9PV3Jq1tv {\n    color: #4185f4;\n  }\n\n._3H_sMvt_zHYP1Ww4hoTHKW._1HJa7ZJn-vN5VnsjXEiLYG {\n    color: #4185f4;\n  }\n\n._3H_sMvt_zHYP1Ww4hoTHKW._1TXajJqMGCISOZLJcJy2Zo {\n    color: #54cc77;\n  }\n\n._3H_sMvt_zHYP1Ww4hoTHKW._305TYbsUHPcLdYO9113O6B {\n    color: #888;\n  }\n\n._3H_sMvt_zHYP1Ww4hoTHKW._2Rq3qWvNomG23ooSWQDl83 {\n    color: #888;\n  }\n\n._3nclWWd7wYWm94VqSSIJvu,\n._2T5wXUs9sXAiFxZtaT7fkn,\n.xy5psOOts8pk5x3b8UQx8 {\n  font-size: 12px;\n  line-height: 14px;\n}\n\n._3nclWWd7wYWm94VqSSIJvu {\n  color: #333;\n  font-weight: 700;\n  max-width: 102px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n._3J1CNwbO6gUhyPgDAUYHcT {\n  line-height: 16px;\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n}\n\n._2T5wXUs9sXAiFxZtaT7fkn {\n  display: inline-block;\n  color: #333;\n  max-width: 136px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n._1G-A0p4LMa-ZzXdwXD_J3V {\n  display: inline-block;\n  font-size: 12px;\n  max-width: 66px;\n  overflow: hidden;\n  margin-right: 4px;\n  color: #888;\n  text-overflow: ellipsis;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,eAAe;EACf,cAAc;EACd;AAyBF;;AAvBE;IACE,cAAc;EAChB;;AAEA;IACE,cAAc;EAChB;;AAEA;IACE,cAAc;EAChB;;AAEA;IACE,cAAc;EAChB;;AAEA;IACE,WAAW;EACb;;AAEA;IACE,WAAW;EACb;;AAGF;;;EAGE,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,WAAW;EACX,gBAAgB;EAChB,gBAAgB;EAChB,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,iBAAiB;EACjB,aAAa;EACb,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;EACE,qBAAqB;EACrB,WAAW;EACX,gBAAgB;EAChB,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,qBAAqB;EACrB,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,iBAAiB;EACjB,WAAW;EACX,uBAAuB;AACzB",file:"index.css",sourcesContent:[".order-status {\n  display: flex;\n  align-items: center;\n  margin-bottom: 2px;\n}\n\n.status-icon {\n  height: 0.875em;\n  width: 0.875em;\n  margin-right: 4px;\n\n  &.unpaid {\n    color: #f5a623;\n  }\n\n  &.to_ship {\n    color: #4185f4;\n  }\n\n  &.shipping {\n    color: #4185f4;\n  }\n\n  &.completed {\n    color: #54cc77;\n  }\n\n  &.cancelled {\n    color: #888;\n  }\n\n  &.refund {\n    color: #888;\n  }\n}\n\n.status-text,\n.payment,\n.count {\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.status-text {\n  color: #333;\n  font-weight: 700;\n  max-width: 102px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.detail {\n  line-height: 16px;\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n}\n\n.payment {\n  display: inline-block;\n  color: #333;\n  max-width: 136px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.source-count {\n  display: inline-block;\n  font-size: 12px;\n  max-width: 66px;\n  overflow: hidden;\n  margin-right: 4px;\n  color: #888;\n  text-overflow: ellipsis;\n}\n"]}]),t.locals={"order-status":"_1ZKQu_hdrOyA9AkELOzAry",orderStatus:"_1ZKQu_hdrOyA9AkELOzAry","status-icon":"_3H_sMvt_zHYP1Ww4hoTHKW",statusIcon:"_3H_sMvt_zHYP1Ww4hoTHKW",unpaid:"_156s7q7NbDV_XaBBjAkExS",to_ship:"_3mbdwXCy-vXlS9PV3Jq1tv",toShip:"_3mbdwXCy-vXlS9PV3Jq1tv",shipping:"_1HJa7ZJn-vN5VnsjXEiLYG",completed:"_1TXajJqMGCISOZLJcJy2Zo",cancelled:"_305TYbsUHPcLdYO9113O6B",refund:"_2Rq3qWvNomG23ooSWQDl83","status-text":"_3nclWWd7wYWm94VqSSIJvu",statusText:"_3nclWWd7wYWm94VqSSIJvu",payment:"_2T5wXUs9sXAiFxZtaT7fkn",count:"xy5psOOts8pk5x3b8UQx8",detail:"_3J1CNwbO6gUhyPgDAUYHcT","source-count":"_1G-A0p4LMa-ZzXdwXD_J3V",sourceCount:"_1G-A0p4LMa-ZzXdwXD_J3V"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._2oTV7R5dmP4BNptCE96iOn {\n  height: 2em;\n  width: 100%;\n  position: relative;\n}\n\n._3UJXwxb6mv3TMr7dUHTXME {\n  height: 100%;\n  margin-left: 2em;\n  padding-left: 0.5em\n}\n\n._3UJXwxb6mv3TMr7dUHTXME._1jQZry9BBVXxkrYRBazsJ5 {\n    display: flex;\n    align-items: center;\n  }\n\n._1A0G3-BRJOYLyO2kO-JUE {\n  font-size: 12px;\n  line-height: 15px;\n  color: #333;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.EsAx_rTgH-k9XyoaddRfL {\n  margin-bottom: 4px;\n}\n\n._2nyGnJeMwVvNz8t3ugnVEs {\n  padding-top: 2px;\n}\n\n._3TNZPgeiDxmSMLtH-lkcoD {\n  padding-top: 0.4615em\n}\n\n._3TNZPgeiDxmSMLtH-lkcoD._1jQZry9BBVXxkrYRBazsJ5 {\n    padding-top: 0;\n  }\n\n._1dFVxEOo_s-Lp82cmAdtSs {\n  margin-top: 0.125em;\n}\n\n._1ppWOiShNWeofTOTT5dthd {\n  height: 10px;\n  padding-left: 4px;\n  border-left: 1px solid #ccc;\n  margin-left: 4px;\n}\n\n._3Y0p-eNiHIso914uqXN36a {\n  display: flex;\n  font-size: 12px;\n  white-space: nowrap;\n  align-items: center\n}\n\n._3Y0p-eNiHIso914uqXN36a ._1ppWOiShNWeofTOTT5dthd {\n    margin-left: 4px;\n    padding-left: 4px;\n  }\n","",{version:3,sources:["common.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,WAAW;EACX,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,gBAAgB;EAChB;AAMF;;AAJE;IACE,aAAa;IACb,mBAAmB;EACrB;;AAGF;EACE,eAAe;EACf,iBAAiB;EACjB,WAAW;EACX,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;AACzB;;AAEA;EAEE,kBAAkB;AACpB;;AAEA;EAEE,gBAAgB;AAClB;;AAEA;EAEE;AAKF;;AAHE;IACE,cAAc;EAChB;;AAGF;EACE,mBAAmB;AACrB;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,2BAA2B;EAC3B,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,eAAe;EACf,mBAAmB;EACnB;AAMF;;AAJE;IACE,gBAAgB;IAChB,iBAAiB;EACnB",file:"common.css",sourcesContent:[".detail-block {\n  height: 2em;\n  width: 100%;\n  position: relative;\n}\n\n.content {\n  height: 100%;\n  margin-left: 2em;\n  padding-left: 0.5em;\n\n  &.no-model {\n    display: flex;\n    align-items: center;\n  }\n}\n\n.name {\n  font-size: 12px;\n  line-height: 15px;\n  color: #333;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.product-name {\n  composes: name;\n  margin-bottom: 4px;\n}\n\n.order-name {\n  composes: name;\n  padding-top: 2px;\n}\n\n.offer-name {\n  composes: name;\n  padding-top: 0.4615em;\n\n  &.no-model {\n    padding-top: 0;\n  }\n}\n\n.order-detail {\n  margin-top: 0.125em;\n}\n\n.divider {\n  height: 10px;\n  padding-left: 4px;\n  border-left: 1px solid #ccc;\n  margin-left: 4px;\n}\n\n.product-detail {\n  display: flex;\n  font-size: 12px;\n  white-space: nowrap;\n  align-items: center;\n\n  & .divider {\n    margin-left: 4px;\n    padding-left: 4px;\n  }\n}\n"]}]),t.locals={"detail-block":"_2oTV7R5dmP4BNptCE96iOn",detailBlock:"_2oTV7R5dmP4BNptCE96iOn",content:"_3UJXwxb6mv3TMr7dUHTXME","no-model":"_1jQZry9BBVXxkrYRBazsJ5",noModel:"_1jQZry9BBVXxkrYRBazsJ5",name:"_1A0G3-BRJOYLyO2kO-JUE","product-name":"EsAx_rTgH-k9XyoaddRfL _1A0G3-BRJOYLyO2kO-JUE",productName:"EsAx_rTgH-k9XyoaddRfL _1A0G3-BRJOYLyO2kO-JUE","order-name":"_2nyGnJeMwVvNz8t3ugnVEs _1A0G3-BRJOYLyO2kO-JUE",orderName:"_2nyGnJeMwVvNz8t3ugnVEs _1A0G3-BRJOYLyO2kO-JUE","offer-name":"_3TNZPgeiDxmSMLtH-lkcoD _1A0G3-BRJOYLyO2kO-JUE",offerName:"_3TNZPgeiDxmSMLtH-lkcoD _1A0G3-BRJOYLyO2kO-JUE","order-detail":"_1dFVxEOo_s-Lp82cmAdtSs",orderDetail:"_1dFVxEOo_s-Lp82cmAdtSs",divider:"_1ppWOiShNWeofTOTT5dthd","product-detail":"_3Y0p-eNiHIso914uqXN36a",productDetail:"_3Y0p-eNiHIso914uqXN36a"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._2XbD1VRV5XvCEUdv07jMhD {\n  color: #bbb;\n  margin-right: 4px;\n  max-width: 44px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  text-decoration: line-through;\n}\n\n._18kuEKhYKQfpzPQY1RXWwa {\n  color: #333;\n  max-width: 130px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n._3miYfnKvigWx6KJKIpQSSe {\n  font-size: 12px;\n  max-width: 72px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  transform: scale(0.91) translateX(-3px)\n}\n\n._3miYfnKvigWx6KJKIpQSSe.niYnO0OPSxct9Tl7_EPZs {\n    color: #888;\n  }\n\n._3miYfnKvigWx6KJKIpQSSe.YS5nYbuUq_hDrM9oW09qH,\n  ._3miYfnKvigWx6KJKIpQSSe._19ySEpYFrmy9MC2q3q3IRH {\n    border-radius: 1px;\n    padding: 0 0.33em;\n  }\n\n._3miYfnKvigWx6KJKIpQSSe.YS5nYbuUq_hDrM9oW09qH {\n    background-color: #fdecec;\n    color: #ef4747;\n  }\n\n._3miYfnKvigWx6KJKIpQSSe._19ySEpYFrmy9MC2q3q3IRH {\n    background-color: #e7e7e7;\n    color: #888;\n  }\n\n._2dqztyvwFKvBHVxUEa0jgg ._18kuEKhYKQfpzPQY1RXWwa {\n    max-width: 82px;\n  }\n\n._3dD_KRz_yL44gF-kEVgUB8 > div {\n    background:#F7F8FB;\n  }\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,iBAAiB;EACjB,eAAe;EACf,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;EACvB,6BAA6B;AAC/B;;AAEA;EACE,WAAW;EACX,gBAAgB;EAChB,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;EACvB;AAqBF;;AAnBE;IACE,WAAW;EACb;;AAEA;;IAEE,kBAAkB;IAClB,iBAAiB;EACnB;;AAEA;IACE,yBAAyB;IACzB,cAAc;EAChB;;AAEA;IACE,yBAAyB;IACzB,WAAW;EACb;;AAIA;IACE,eAAe;EACjB;;AAIA;IACE,kBAAkB;EACpB",file:"index.css",sourcesContent:[".original-price {\n  color: #bbb;\n  margin-right: 4px;\n  max-width: 44px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  text-decoration: line-through;\n}\n\n.price {\n  color: #333;\n  max-width: 130px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.status {\n  font-size: 12px;\n  max-width: 72px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  transform: scale(0.91) translateX(-3px);\n\n  &.normal {\n    color: #888;\n  }\n\n  &.invalid,\n  &.deleted {\n    border-radius: 1px;\n    padding: 0 0.33em;\n  }\n\n  &.invalid {\n    background-color: #fdecec;\n    color: #ef4747;\n  }\n\n  &.deleted {\n    background-color: #e7e7e7;\n    color: #888;\n  }\n}\n\n.origin {\n  & .price {\n    max-width: 82px;\n  }\n}\n\n.product-deleted {\n  & > div {\n    background:#F7F8FB;\n  }\n}\n"]}]),t.locals={"original-price":"_2XbD1VRV5XvCEUdv07jMhD",originalPrice:"_2XbD1VRV5XvCEUdv07jMhD",price:"_18kuEKhYKQfpzPQY1RXWwa",status:"_3miYfnKvigWx6KJKIpQSSe",normal:"niYnO0OPSxct9Tl7_EPZs",invalid:"YS5nYbuUq_hDrM9oW09qH",deleted:"_19ySEpYFrmy9MC2q3q3IRH",origin:"_2dqztyvwFKvBHVxUEa0jgg","product-deleted":"_3dD_KRz_yL44gF-kEVgUB8",productDeleted:"_3dD_KRz_yL44gF-kEVgUB8"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._1OBdIbU3mbzAF_Wf2Y1dsb {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-right: 0.5em;\n  line-height: 0;\n}\n\n._3pPRsL_qAjGKA_rsOK0Dcr {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n._2P-7k3CcHlC1xVXT3w6ft {\n}\n\n._2P-7k3CcHlC1xVXT3w6ft:hover {\n    cursor: pointer;\n  }\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,mBAAmB;EACnB,mBAAmB;EACnB,cAAc;AAChB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,cAAc;EACd,cAAc;EACd,cAAc;AAChB;;AAEA;AAMA;;AAHE;IACE,eAAe;EACjB",file:"index.css",sourcesContent:[".icon-wrap {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-right: 0.5em;\n  line-height: 0;\n}\n\n.icon-base {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.icon {\n  composes: icon-base;\n\n  &:hover {\n    cursor: pointer;\n  }\n}\n"]}]),t.locals={"icon-wrap":"_1OBdIbU3mbzAF_Wf2Y1dsb",iconWrap:"_1OBdIbU3mbzAF_Wf2Y1dsb","icon-base":"_3pPRsL_qAjGKA_rsOK0Dcr",iconBase:"_3pPRsL_qAjGKA_rsOK0Dcr",icon:"_2P-7k3CcHlC1xVXT3w6ft _3pPRsL_qAjGKA_rsOK0Dcr"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._3XGhcShPisq9pcfbaAgkRZ {\n  margin-right: 0.5em;\n}\n\n._3yU4skyrFSHEIeWhoShPiP {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n._48E3pSpTGEtSNHGAjIImu {\n}\n\n._48E3pSpTGEtSNHGAjIImu:hover {\n    cursor: pointer;\n  }\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,cAAc;EACd,cAAc;EACd,cAAc;AAChB;;AAEA;AAMA;;AAHE;IACE,eAAe;EACjB",file:"index.css",sourcesContent:[".sending-wrap {\n  margin-right: 0.5em;\n}\n\n.icon-base {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.icon {\n  composes: icon-base;\n\n  &:hover {\n    cursor: pointer;\n  }\n}\n"]}]),t.locals={"sending-wrap":"_3XGhcShPisq9pcfbaAgkRZ",sendingWrap:"_3XGhcShPisq9pcfbaAgkRZ","icon-base":"_3yU4skyrFSHEIeWhoShPiP",iconBase:"_3yU4skyrFSHEIeWhoShPiP",icon:"_48E3pSpTGEtSNHGAjIImu _3yU4skyrFSHEIeWhoShPiP"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._2PCJSH-iWsGKEAb3LYmfIn {\n  font-size: 12px;\n  text-align: left;\n  word-spacing: 0.11em;\n}\n\n._13rJHzHcTZdq3c5GNID0L7 {\n  padding-left: 0.25em;\n  color: #395692\n}\n\n._13rJHzHcTZdq3c5GNID0L7:hover {\n    cursor: pointer;\n  }\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,gBAAgB;EAChB,oBAAoB;AACtB;;AAEA;EACE,oBAAoB;EACpB;AAKF;;AAHE;IACE,eAAe;EACjB",file:"index.css",sourcesContent:[".root {\n  font-size: 12px;\n  text-align: left;\n  word-spacing: 0.11em;\n}\n\n.learn-more {\n  padding-left: 0.25em;\n  color: #395692;\n\n  &:hover {\n    cursor: pointer;\n  }\n}\n"]}]),t.locals={root:"_2PCJSH-iWsGKEAb3LYmfIn","learn-more":"_13rJHzHcTZdq3c5GNID0L7",learnMore:"_13rJHzHcTZdq3c5GNID0L7"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._5wLVI4F5D56T_QINbHigx {\n  color: #395692;\n  cursor: pointer;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,cAAc;EACd,eAAe;AACjB",file:"index.css",sourcesContent:[".policy {\n  color: #395692;\n  cursor: pointer;\n}\n"]}]),t.locals={policy:"_5wLVI4F5D56T_QINbHigx"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._2t09BUMQKc4bgIoqctsCDW {\n  font-size: 12px;\n  margin-top: 0.667em;\n  text-align: center;\n  color: #bbb;\n}\n\n._1h-PJarm5zOGfI4Kd7x5DV {\n  display: inline-block;\n  max-width: 28.937em;\n  line-height: 1.167em;\n  text-align: center;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,mBAAmB;EACnB,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE,qBAAqB;EACrB,mBAAmB;EACnB,oBAAoB;EACpB,kBAAkB;AACpB",file:"index.css",sourcesContent:[".meta-info {\n  font-size: 12px;\n  margin-top: 0.667em;\n  text-align: center;\n  color: #bbb;\n}\n\n.meta-content {\n  display: inline-block;\n  max-width: 28.937em;\n  line-height: 1.167em;\n  text-align: center;\n}\n"]}]),t.locals={"meta-info":"_2t09BUMQKc4bgIoqctsCDW",metaInfo:"_2t09BUMQKc4bgIoqctsCDW","meta-content":"_1h-PJarm5zOGfI4Kd7x5DV",metaContent:"_1h-PJarm5zOGfI4Kd7x5DV"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,".hIUzfpaVECkDIJLAUT8nQ {\n  box-sizing: border-box;\n  padding: 0 7.5px;\n}\n\n.iO_LmGZJlY5GQPtrLCqYA {\n  padding-bottom: 0.75em;\n}\n\n._3mU2lmG0OMgpVc1ILR5IIj {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n\n._1kXjVAWsG7Wpv7gjTen4dO {\n  align-items: center;\n  justify-content: flex-end;\n}\n\n._3i7qVUWGc_4XFFvwGuSjs {\n  justify-content: flex-start;\n}\n\n._1gSD02QgxKPVWzCL8H5HFX {\n  font-size: 12px;\n  margin-top: 12px;\n  line-height: 1.167em;\n  color: rgba(0, 0, 0, 0.4);\n  text-align: center;\n}\n\n.IPmaWbEyb3XJP81UoHa1X {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n._10NdzHgUq2t2h34mnkJYUk {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: row;\n}\n\n._19znMMOdpg_sjc3xP_X5mc {\n  position: relative;\n}\n\n._1qIaUEuhc5NIRCucR2SxcQ {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 0.75em;\n  flex-shrink: 0;\n}\n\n.UETBdTZGJjcRkr-epsTSU {\n  opacity: 0.6;\n  -webkit-filter: grayscale(50%);\n          filter: grayscale(50%);\n}\n\n.SLd4tyhTFjdOFDPaea5VH {\n  background-color: rgba(0, 0, 0, 0.6);\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 1.2em 1.2em;\n}\n\n._356u6qBl91x3AhxxLiPAHC {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease\n}\n\n._356u6qBl91x3AhxxLiPAHC:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n\n._1X-toVNEZ4Je3bmFQOkgev {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease\n}\n\n._1X-toVNEZ4Je3bmFQOkgev:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n\n._3OuqACWfFzF5fJj67xKjLa ._356u6qBl91x3AhxxLiPAHC:hover {\n    color: #555;\n    cursor: not-allowed;\n  }\n\n._22aPtuolP_b-r6xWDYesLO {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.24;\n  color: #333;\n  font-size: 14px;\n  font-weight: 500;\n  word-break: break-all;\n}\n\n.aQ2AzGIMlMyp8Af90Ry_7 {\n  margin-right: 0.25em;\n  position: relative;\n  color: #bbb\n}\n\n.aQ2AzGIMlMyp8Af90Ry_7::after {\n    content: '';\n    width: 100%;\n    height: 1px;\n    position: absolute;\n    left: 0;\n    top: 50%;\n    background-color: #bbb;\n  }\n\n._3_4WU1PfpfkSvjau4c885o {\n  margin-top: 0.5em;\n  line-height: 1.16;\n  color: #555;\n  font-size: 12px;\n}\n\n._9oDU3A3Hpv8zCxKSVucO7 {\n  margin-left: 0.5em;\n  color: #888;\n}\n\n._3vWueDaR1oqWg_9uQj5Bu3 {\n  font-size: 14px;\n  line-height: 1.36em;\n  color: #333;\n  display: flex;\n  align-items: center;\n}\n\n._1W9kkQHUmqXvAl5gnu2E2a {\n  color: #ff4742;\n}\n\n._95FFIz3GMqLSZsSyjL3p0 {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n._2VJTxxq1zDHPvdgFtynXcQ {\n  width: 2.25em;\n  height: 2.25em;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n._2MOKj1O3NhdC3XGC1PHHiU {\n  width: 100%;\n  height: 100%;\n}\n\n._3sVJ2x7tt7f9ox0PsE2qJ {\n  width: 2.25em;\n  flex-shrink: 0;\n}\n\n._3lFdhGA0mPqi-e22KMHVPn {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n._2j6LIO-m2B-zONTTMttHp1 {\n  flex-grow: 1;\n  overflow: hidden;\n}\n\n._27CywXexvaQLq5OwN8hVyl {\n  display: flex;\n  flex-direction: row;\n}\n\n.Oe4T3cTQbo4rnZzSd-rQd {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 1em;\n  flex-shrink: 0;\n}\n\n.HHnxRisfJdk1An5JIz2Y0 {\n  margin-bottom: 0.428em;\n}\n\n._2QEERxNkYoE0GLwuHEcWWK {\n  font-size: 14px;\n  color: #01bfa5;\n}\n\n._3Q7MX1PUFdtnzKLc3UdX9z {\n  margin: 0 0.428em;\n  color: rgba(136, 136, 136, 0.4);\n}\n\n._222nHElIK9k9niZwYrLu2T {\n  line-height: 1.142;\n  font-size: 14px;\n  color: #555;\n  font-weight: bold;\n}\n\n._2Z_8hAKzyLRNZazhpL4zsq {\n  line-height: 1.16em;\n  font-size: 12px;\n  color: #888;\n}\n\n.qECB0-PzoHjr-k6NJHDll {\n  margin-right: 1.333em;\n}\n\n._3H0-oXxxnRlyKLUYpPq0-R {\n  background-color: #f4f4f4;\n  font-size: 16px;\n  height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding-left: 0.75em;\n}\n\n._1zo0NC_PnWRIG4TcgizX5u {\n  height: 1em;\n  width: 1em;\n}\n\n.RkUm5cXsYvXWI-mFPi9_8 {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.42);\n  margin-left: 1em;\n}\n\n._3IpazX4jsFewcvd_xgdDaD {\n  font-size: 16px;\n  height: 3.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n._3CRjohg_9glx8EXdakoLi- {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n._34wG4_h5rLP4uSPWajJrCp {\n  height: 2.25em;\n  width: 2.25em;\n  margin: 0 0.75em\n}\n\n._34wG4_h5rLP4uSPWajJrCp > * {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n  }\n\n._34wG4_h5rLP4uSPWajJrCp > div {\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: bold;\n  }\n\n._2zuF5J9VpNTbrMmIHCBWcK {\n  font-size: 14px;\n  color: #555;\n}\n\n._1XkSwZoXiDI-Oyl5siW3qt {\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  margin: 0 0.75em;\n}\n\n@-webkit-keyframes _2bHD5BSYqz1gXwqln93m-Y {\n  from {\n    transform: rotateZ(0);\n  }\n\n  to {\n    transform: rotateZ(360deg);\n  }\n}\n\n@keyframes _2bHD5BSYqz1gXwqln93m-Y {\n  from {\n    transform: rotateZ(0);\n  }\n\n  to {\n    transform: rotateZ(360deg);\n  }\n}\n\n._12HH49fG8dEWOGmO0gNpQ2 {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n\n._1T0GTHcs44T0oqc9gfk3pA {\n  padding: 0.667em 0.857em;\n  font-size: 14px;\n  line-height: 1.143em;\n  border-radius: 2px;\n  background-color: #d7e4ff;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,gBAAgB;AAClB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EAEE,mBAAmB;EACnB,yBAAyB;AAC3B;;AAEA;EAEE,2BAA2B;AAC7B;;AAEA;EACE,eAAe;EACf,gBAAgB;EAChB,oBAAoB;EACpB,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,oBAAoB;EACpB,cAAc;AAChB;;AAEA;EACE,YAAY;EACZ,8BAAsB;UAAtB,sBAAsB;AACxB;;AAEA;EACE,oCAAoC;EACpC,4BAA4B;EAC5B,2BAA2B;EAC3B,4BAA4B;AAC9B;;AAEA;EACE,WAAW;EACX,eAAe;EACf,cAAc;EACd,qBAAqB;EACrB;AAMF;;AAJE;IACE,cAAc;IACd,eAAe;EACjB;;AAGF;EACE,WAAW;EACX,eAAe;EACf,cAAc;EACd,qBAAqB;EACrB;AAMF;;AAJE;IACE,cAAc;IACd,eAAe;EACjB;;AAIA;IACE,WAAW;IACX,mBAAmB;EACrB;;AAGF;EACE,gBAAgB;EAChB,uBAAuB;EACvB,iBAAiB;EACjB,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,qBAAqB;AACvB;;AAEA;EACE,oBAAoB;EACpB,kBAAkB;EAClB;AAWF;;AATE;IACE,WAAW;IACX,WAAW;IACX,WAAW;IACX,kBAAkB;IAClB,OAAO;IACP,QAAQ;IACR,sBAAsB;EACxB;;AAGF;EACE,iBAAiB;EACjB,iBAAiB;EACjB,WAAW;EACX,eAAe;AACjB;;AAEA;EACE,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE,eAAe;EACf,mBAAmB;EACnB,WAAW;EACX,aAAa;EACb,mBAAmB;AACrB;;AAEA;EAEE,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,kBAAkB;EAClB,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,YAAY;AACd;;AAEA;EACE,aAAa;EACb,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,iBAAiB;EACjB,cAAc;AAChB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,eAAe;EACf,cAAc;AAChB;;AAEA;EACE,iBAAiB;EACjB,+BAA+B;AACjC;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,WAAW;EACX,iBAAiB;AACnB;;AAEA;EACE,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,qBAAqB;AACvB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,WAAW;EACX,aAAa;EACb,mBAAmB;EACnB,2BAA2B;EAC3B,oBAAoB;AACtB;;AAEA;EACE,WAAW;EACX,UAAU;AACZ;;AAEA;EACE,eAAe;EACf,0BAA0B;EAC1B,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,cAAc;EACd,yBAAyB;EACzB,kBAAkB;EAClB,aAAa;EACb,mBAAmB;EACnB,8BAA8B;AAChC;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,mBAAmB;EACnB,2BAA2B;AAC7B;;AAEA;EACE,cAAc;EACd,aAAa;EACb;AAeF;;AAbE;IACE,WAAW;IACX,YAAY;IACZ,kBAAkB;EACpB;;AAEA;IACE,WAAW;IACX,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,iBAAiB;EACnB;;AAGF;EACE,eAAe;EACf,WAAW;AACb;;AAEA;EACE,aAAa;EACb,cAAc;EACd,mBAAmB;EACnB,uBAAuB;EACvB,gBAAgB;AAClB;;AAEA;EACE;IACE,qBAAqB;EACvB;;EAEA;IACE,0BAA0B;EAC5B;AACF;;AARA;EACE;IACE,qBAAqB;EACvB;;EAEA;IACE,0BAA0B;EAC5B;AACF;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,wBAAwB;EACxB,eAAe;EACf,oBAAoB;EACpB,kBAAkB;EAClB,yBAAyB;AAC3B",file:"index.css",sourcesContent:[".root {\n  box-sizing: border-box;\n  padding: 0 7.5px;\n}\n\n.last-message {\n  padding-bottom: 0.75em;\n}\n\n.message {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n\n.message-send {\n  composes: message;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.message-receive {\n  composes: message;\n  justify-content: flex-start;\n}\n\n.message-time {\n  font-size: 12px;\n  margin-top: 12px;\n  line-height: 1.167em;\n  color: rgba(0, 0, 0, 0.4);\n  text-align: center;\n}\n\n.product-origin {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.product-origin-info {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: row;\n}\n\n.image-wrapper {\n  position: relative;\n}\n\n.product-image {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 0.75em;\n  flex-shrink: 0;\n}\n\n.sold-out {\n  opacity: 0.6;\n  filter: grayscale(50%);\n}\n\n.background-settings {\n  background-color: rgba(0, 0, 0, 0.6);\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 1.2em 1.2em;\n}\n\n.view-link {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n\n  &:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n}\n\n.view-mall-link {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n\n  &:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n}\n\n.banned {\n  & .view-link:hover {\n    color: #555;\n    cursor: not-allowed;\n  }\n}\n\n.product-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.24;\n  color: #333;\n  font-size: 14px;\n  font-weight: 500;\n  word-break: break-all;\n}\n\n.origin-price {\n  margin-right: 0.25em;\n  position: relative;\n  color: #bbb;\n\n  &::after {\n    content: '';\n    width: 100%;\n    height: 1px;\n    position: absolute;\n    left: 0;\n    top: 50%;\n    background-color: #bbb;\n  }\n}\n\n.product-price {\n  margin-top: 0.5em;\n  line-height: 1.16;\n  color: #555;\n  font-size: 12px;\n}\n\n.product-stock {\n  margin-left: 0.5em;\n  color: #888;\n}\n\n.deleted-product {\n  font-size: 14px;\n  line-height: 1.36em;\n  color: #333;\n  display: flex;\n  align-items: center;\n}\n\n.banned-product {\n  composes: product-price;\n  color: #ff4742;\n}\n\n.view-product-block {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.avatar-wrap {\n  width: 2.25em;\n  height: 2.25em;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.avatar {\n  width: 100%;\n  height: 100%;\n}\n\n.avatar-placeholder {\n  width: 2.25em;\n  flex-shrink: 0;\n}\n\n.order-origin {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.order-origin-info {\n  flex-grow: 1;\n  overflow: hidden;\n}\n\n.order-info {\n  display: flex;\n  flex-direction: row;\n}\n\n.order-product-image {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 1em;\n  flex-shrink: 0;\n}\n\n.status-wrap {\n  margin-bottom: 0.428em;\n}\n\n.order-status {\n  font-size: 14px;\n  color: #01bfa5;\n}\n\n.pipe {\n  margin: 0 0.428em;\n  color: rgba(136, 136, 136, 0.4);\n}\n\n.order-product-name {\n  line-height: 1.142;\n  font-size: 14px;\n  color: #555;\n  font-weight: bold;\n}\n\n.order-detail {\n  line-height: 1.16em;\n  font-size: 12px;\n  color: #888;\n}\n\n.order-sn {\n  margin-right: 1.333em;\n}\n\n.shop-information {\n  background-color: #f4f4f4;\n  font-size: 16px;\n  height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding-left: 0.75em;\n}\n\n.shop-avatar {\n  height: 1em;\n  width: 1em;\n}\n\n.shop-name {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.42);\n  margin-left: 1em;\n}\n\n.shop-origin {\n  font-size: 16px;\n  height: 3.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.shop-origin-info {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.shop-origin-avatar {\n  height: 2.25em;\n  width: 2.25em;\n  margin: 0 0.75em;\n\n  & > * {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n  }\n\n  & > div {\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: bold;\n  }\n}\n\n.shop-origin-name {\n  font-size: 14px;\n  color: #555;\n}\n\n.view-shop-block {\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  margin: 0 0.75em;\n}\n\n@keyframes rotate {\n  from {\n    transform: rotateZ(0);\n  }\n\n  to {\n    transform: rotateZ(360deg);\n  }\n}\n\n.bubble {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n\n.offer-tips {\n  padding: 0.667em 0.857em;\n  font-size: 14px;\n  line-height: 1.143em;\n  border-radius: 2px;\n  background-color: #d7e4ff;\n}\n"]}]),t.locals={root:"hIUzfpaVECkDIJLAUT8nQ","last-message":"iO_LmGZJlY5GQPtrLCqYA",lastMessage:"iO_LmGZJlY5GQPtrLCqYA",message:"_3mU2lmG0OMgpVc1ILR5IIj","message-send":"_1kXjVAWsG7Wpv7gjTen4dO _3mU2lmG0OMgpVc1ILR5IIj",messageSend:"_1kXjVAWsG7Wpv7gjTen4dO _3mU2lmG0OMgpVc1ILR5IIj","message-receive":"_3i7qVUWGc_4XFFvwGuSjs _3mU2lmG0OMgpVc1ILR5IIj",messageReceive:"_3i7qVUWGc_4XFFvwGuSjs _3mU2lmG0OMgpVc1ILR5IIj","message-time":"_1gSD02QgxKPVWzCL8H5HFX",messageTime:"_1gSD02QgxKPVWzCL8H5HFX","product-origin":"IPmaWbEyb3XJP81UoHa1X",productOrigin:"IPmaWbEyb3XJP81UoHa1X","product-origin-info":"_10NdzHgUq2t2h34mnkJYUk",productOriginInfo:"_10NdzHgUq2t2h34mnkJYUk","image-wrapper":"_19znMMOdpg_sjc3xP_X5mc",imageWrapper:"_19znMMOdpg_sjc3xP_X5mc","product-image":"_1qIaUEuhc5NIRCucR2SxcQ",productImage:"_1qIaUEuhc5NIRCucR2SxcQ","sold-out":"UETBdTZGJjcRkr-epsTSU",soldOut:"UETBdTZGJjcRkr-epsTSU","background-settings":"SLd4tyhTFjdOFDPaea5VH",backgroundSettings:"SLd4tyhTFjdOFDPaea5VH","view-link":"_356u6qBl91x3AhxxLiPAHC",viewLink:"_356u6qBl91x3AhxxLiPAHC","view-mall-link":"_1X-toVNEZ4Je3bmFQOkgev",viewMallLink:"_1X-toVNEZ4Je3bmFQOkgev",banned:"_3OuqACWfFzF5fJj67xKjLa","product-name":"_22aPtuolP_b-r6xWDYesLO",productName:"_22aPtuolP_b-r6xWDYesLO","origin-price":"aQ2AzGIMlMyp8Af90Ry_7",originPrice:"aQ2AzGIMlMyp8Af90Ry_7","product-price":"_3_4WU1PfpfkSvjau4c885o",productPrice:"_3_4WU1PfpfkSvjau4c885o","product-stock":"_9oDU3A3Hpv8zCxKSVucO7",productStock:"_9oDU3A3Hpv8zCxKSVucO7","deleted-product":"_3vWueDaR1oqWg_9uQj5Bu3",deletedProduct:"_3vWueDaR1oqWg_9uQj5Bu3","banned-product":"_1W9kkQHUmqXvAl5gnu2E2a _3_4WU1PfpfkSvjau4c885o",bannedProduct:"_1W9kkQHUmqXvAl5gnu2E2a _3_4WU1PfpfkSvjau4c885o","view-product-block":"_95FFIz3GMqLSZsSyjL3p0",viewProductBlock:"_95FFIz3GMqLSZsSyjL3p0","avatar-wrap":"_2VJTxxq1zDHPvdgFtynXcQ",avatarWrap:"_2VJTxxq1zDHPvdgFtynXcQ",avatar:"_2MOKj1O3NhdC3XGC1PHHiU","avatar-placeholder":"_3sVJ2x7tt7f9ox0PsE2qJ",avatarPlaceholder:"_3sVJ2x7tt7f9ox0PsE2qJ","order-origin":"_3lFdhGA0mPqi-e22KMHVPn",orderOrigin:"_3lFdhGA0mPqi-e22KMHVPn","order-origin-info":"_2j6LIO-m2B-zONTTMttHp1",orderOriginInfo:"_2j6LIO-m2B-zONTTMttHp1","order-info":"_27CywXexvaQLq5OwN8hVyl",orderInfo:"_27CywXexvaQLq5OwN8hVyl","order-product-image":"Oe4T3cTQbo4rnZzSd-rQd",orderProductImage:"Oe4T3cTQbo4rnZzSd-rQd","status-wrap":"HHnxRisfJdk1An5JIz2Y0",statusWrap:"HHnxRisfJdk1An5JIz2Y0","order-status":"_2QEERxNkYoE0GLwuHEcWWK",orderStatus:"_2QEERxNkYoE0GLwuHEcWWK",pipe:"_3Q7MX1PUFdtnzKLc3UdX9z","order-product-name":"_222nHElIK9k9niZwYrLu2T",orderProductName:"_222nHElIK9k9niZwYrLu2T","order-detail":"_2Z_8hAKzyLRNZazhpL4zsq",orderDetail:"_2Z_8hAKzyLRNZazhpL4zsq","order-sn":"qECB0-PzoHjr-k6NJHDll",orderSn:"qECB0-PzoHjr-k6NJHDll","shop-information":"_3H0-oXxxnRlyKLUYpPq0-R",shopInformation:"_3H0-oXxxnRlyKLUYpPq0-R","shop-avatar":"_1zo0NC_PnWRIG4TcgizX5u",shopAvatar:"_1zo0NC_PnWRIG4TcgizX5u","shop-name":"RkUm5cXsYvXWI-mFPi9_8",shopName:"RkUm5cXsYvXWI-mFPi9_8","shop-origin":"_3IpazX4jsFewcvd_xgdDaD",shopOrigin:"_3IpazX4jsFewcvd_xgdDaD","shop-origin-info":"_3CRjohg_9glx8EXdakoLi-",shopOriginInfo:"_3CRjohg_9glx8EXdakoLi-","shop-origin-avatar":"_34wG4_h5rLP4uSPWajJrCp",shopOriginAvatar:"_34wG4_h5rLP4uSPWajJrCp","shop-origin-name":"_2zuF5J9VpNTbrMmIHCBWcK",shopOriginName:"_2zuF5J9VpNTbrMmIHCBWcK","view-shop-block":"_1XkSwZoXiDI-Oyl5siW3qt",viewShopBlock:"_1XkSwZoXiDI-Oyl5siW3qt",bubble:"_12HH49fG8dEWOGmO0gNpQ2","offer-tips":"_1T0GTHcs44T0oqc9gfk3pA",offerTips:"_1T0GTHcs44T0oqc9gfk3pA",rotate:"_2bHD5BSYqz1gXwqln93m-Y"},e.exports=t},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var s=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,s=n;return[s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]]].join("")}},function(e,t,n){(t=n(20)(!0)).push([e.i,"._3uVN1xhiPgOdvNDRZBtHr8 {\n  margin: 0;\n  box-sizing: border-box;\n  max-width: 29.5em;\n  padding: 8px;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  border-radius: 2px;\n  color: #333;\n  font-size: 14px;\n  background-color: #f5f6f8\n}\n\n._3uVN1xhiPgOdvNDRZBtHr8._10V8TmtFupYFXByshFbH8A {\n    background-color: #d7e4ff;\n    color: #333;\n  }\n\n.o4xK5IN7I_Og8b49vKyLA {\n  max-width: 240px;\n  line-height: 21px;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,SAAS;EACT,sBAAsB;EACtB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,qBAAqB;EACrB,kBAAkB;EAClB,WAAW;EACX,eAAe;EACf;AAMF;;AAJE;IACE,yBAAyB;IACzB,WAAW;EACb;;AAGF;EACE,gBAAgB;EAChB,iBAAiB;AACnB",file:"index.css",sourcesContent:[".message {\n  margin: 0;\n  box-sizing: border-box;\n  max-width: 29.5em;\n  padding: 8px;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  border-radius: 2px;\n  color: #333;\n  font-size: 14px;\n  background-color: #f5f6f8;\n\n  &.send {\n    background-color: #d7e4ff;\n    color: #333;\n  }\n}\n\n.unsupport-faq {\n  max-width: 240px;\n  line-height: 21px;\n}\n"]}]),t.locals={message:"_3uVN1xhiPgOdvNDRZBtHr8",send:"_10V8TmtFupYFXByshFbH8A","unsupport-faq":"o4xK5IN7I_Og8b49vKyLA",unsupportFaq:"o4xK5IN7I_Og8b49vKyLA"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._1j5d8cvhor_R-eU8Qi3zRP {\n  width: 100%;\n  font-size: 20px;\n  height: 1.1em;\n  text-align: left;\n  position: relative;\n}\n\n._1ZqrPyv3nHeMPeJGQs60ml {\n  max-width: 100%;\n  height: 1.2em;\n  line-height: 1.1em;\n  font-weight: 500\n}\n\n._1ZqrPyv3nHeMPeJGQs60ml._1rIcIdhZ_srqCjcH0MAJRf {\n    max-width: 80%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n._16JPm10NXWtKixnRuTgBSc {\n  height: 0.7em;\n  width: 0.7em;\n  color: #bbb;\n  position: absolute;\n  top: 0;\n  right: -0.2em;\n  cursor: pointer;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,eAAe;EACf,aAAa;EACb,gBAAgB;EAChB,kBAAkB;AACpB;;AAEA;EACE,eAAe;EACf,aAAa;EACb,kBAAkB;EAClB;AAQF;;AANE;IACE,cAAc;IACd,gBAAgB;IAChB,uBAAuB;IACvB,mBAAmB;EACrB;;AAGF;EACE,aAAa;EACb,YAAY;EACZ,WAAW;EACX,kBAAkB;EAClB,MAAM;EACN,aAAa;EACb,eAAe;AACjB",file:"index.css",sourcesContent:[".root {\n  width: 100%;\n  font-size: 20px;\n  height: 1.1em;\n  text-align: left;\n  position: relative;\n}\n\n.title {\n  max-width: 100%;\n  height: 1.2em;\n  line-height: 1.1em;\n  font-weight: 500;\n\n  &.has-cancel {\n    max-width: 80%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n}\n\n.cancel {\n  height: 0.7em;\n  width: 0.7em;\n  color: #bbb;\n  position: absolute;\n  top: 0;\n  right: -0.2em;\n  cursor: pointer;\n}\n"]}]),t.locals={root:"_1j5d8cvhor_R-eU8Qi3zRP",title:"_1ZqrPyv3nHeMPeJGQs60ml","has-cancel":"_1rIcIdhZ_srqCjcH0MAJRf",hasCancel:"_1rIcIdhZ_srqCjcH0MAJRf",cancel:"_16JPm10NXWtKixnRuTgBSc"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._15_uMmuonnTw0UCEDORtT- {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n}\n\n._2PHIZXX9EiRgvbQtvQDubs {\n  padding: 1.5em;\n  border-radius: 3px;\n  background: #fff;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em 0 rgba(0, 0, 0, 0.05), 0 1em 1em 0 rgba(0, 0, 0, 0.09);\n}\n\n._2PHIZXX9EiRgvbQtvQDubs:focus {\n  outline: none;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,OAAO;EACP,QAAQ;EACR,MAAM;EACN,SAAS;EACT,8BAA8B;EAC9B,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,YAAY;AACd;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;EACtB,0EAA0E;AAC5E;;AAEA;EACE,aAAa;AACf",file:"index.css",sourcesContent:[".overlay {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n}\n\n.content {\n  padding: 1.5em;\n  border-radius: 3px;\n  background: #fff;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em 0 rgba(0, 0, 0, 0.05), 0 1em 1em 0 rgba(0, 0, 0, 0.09);\n}\n\n.content:focus {\n  outline: none;\n}\n"]}]),t.locals={overlay:"_15_uMmuonnTw0UCEDORtT-",content:"_2PHIZXX9EiRgvbQtvQDubs"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._1zafb29X67OX0Rm_0qzJGh {\n  height: 645px;\n  margin-top: 24px;\n  margin-right: -21px;\n  margin-bottom: -24px;\n}\n\n.LDz0Dq7pML923HYs9zVmg {\n  font-size: 12px;\n  color: #bbb;\n  padding-right: 16px;\n  margin-bottom: 8px;\n}\n\n._1p7TMVjy_Gbt7LeWGM-ZOd {\n  padding: 0;\n  margin-bottom: 16px;\n  padding-right: 16px;\n  margin-top: -4px;\n}\n\n._1Rz3tNtpi3Viv2yVE8gM0x {\n  text-align: right;\n}\n\n._1605I46joGT0Ot1AfnRjzy {\n  color: #888;\n}\n\n._2AsLfdssbSXBa9uiFsUIkp {\n  color: #bbb;\n}\n\n._1yTJSmnBZBKg65byQFatTj {\n  display: inline-block;\n  width: 0;\n  margin-left: 8px;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,gBAAgB;EAChB,mBAAmB;EACnB,oBAAoB;AACtB;;AAEA;EACE,eAAe;EACf,WAAW;EACX,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,UAAU;EACV,mBAAmB;EACnB,mBAAmB;EACnB,gBAAgB;AAClB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,qBAAqB;EACrB,QAAQ;EACR,gBAAgB;AAClB",file:"index.css",sourcesContent:[".list {\n  height: 645px;\n  margin-top: 24px;\n  margin-right: -21px;\n  margin-bottom: -24px;\n}\n\n.header {\n  font-size: 12px;\n  color: #bbb;\n  padding-right: 16px;\n  margin-bottom: 8px;\n}\n\n.message {\n  padding: 0;\n  margin-bottom: 16px;\n  padding-right: 16px;\n  margin-top: -4px;\n}\n\n.right {\n  text-align: right;\n}\n\n.username {\n  color: #888;\n}\n\n.stamp {\n  color: #bbb;\n}\n\n.split {\n  display: inline-block;\n  width: 0;\n  margin-left: 8px;\n}\n"]}]),t.locals={list:"_1zafb29X67OX0Rm_0qzJGh",header:"LDz0Dq7pML923HYs9zVmg",message:"_1p7TMVjy_Gbt7LeWGM-ZOd",right:"_1Rz3tNtpi3Viv2yVE8gM0x",username:"_1605I46joGT0Ot1AfnRjzy",stamp:"_2AsLfdssbSXBa9uiFsUIkp",split:"_1yTJSmnBZBKg65byQFatTj"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._3O82p2memlng7tcEwAGMft {\n  width: 240px;\n  padding: 8px;\n  background-color: #fff;\n  border-radius: 2px;\n  box-sizing: border-box;\n  cursor: pointer;\n  transition: all 0.2s ease\n}\n\n._3O82p2memlng7tcEwAGMft.bO3UXl2EOZucz1-aizAnR {\n    border: 0.25em solid #d7e4ff;\n  }\n\n._3O82p2memlng7tcEwAGMft.WDwf45vWP7-1nl-yGTs5e {\n    border: 0.25em solid #f1f3f4;\n  }\n\n.tAVL13GN4v_5PaIUOzgLQ {\n  width: 600px;\n  height: 672px;\n}\n\n._8vB6v5PFehXJMtwqioiPx {\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 12px;\n  line-height: 14px;\n  margin-bottom: 16px;\n  color: #555;\n}\n\n._1E7BqUAizKcdZG5aLkon11 {\n  font-size: 12px;\n  line-height: 14px;\n  text-align: right;\n  padding-top: 8px;\n  border-top: 1px dashed #f1f3f4;\n  color: #395692;\n  margin-top: 8px;\n}\n\n._3JjGB_k4kg4HhIzlYAJ9Ty {\n  font-size: 12px;\n  color: #888;\n  line-height: 18px;\n  width: 220px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n  white-space: nowrap;\n  height: 18px;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,YAAY;EACZ,sBAAsB;EACtB,kBAAkB;EAClB,sBAAsB;EACtB,eAAe;EACf;AASF;;AAPE;IACE,4BAA4B;EAC9B;;AAEA;IACE,4BAA4B;EAC9B;;AAGF;EACE,YAAY;EACZ,aAAa;AACf;;AAEA;EACE,WAAW;EACX,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;EACvB,eAAe;EACf,iBAAiB;EACjB,mBAAmB;EACnB,WAAW;AACb;;AAEA;EACE,eAAe;EACf,iBAAiB;EACjB,iBAAiB;EACjB,gBAAgB;EAChB,8BAA8B;EAC9B,cAAc;EACd,eAAe;AACjB;;AAEA;EACE,eAAe;EACf,WAAW;EACX,iBAAiB;EACjB,YAAY;EACZ,uBAAuB;EACvB,gBAAgB;EAChB,qBAAqB;EACrB,mBAAmB;EACnB,YAAY;AACd",file:"index.css",sourcesContent:[".root {\n  width: 240px;\n  padding: 8px;\n  background-color: #fff;\n  border-radius: 2px;\n  box-sizing: border-box;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &.send {\n    border: 0.25em solid #d7e4ff;\n  }\n\n  &.receive {\n    border: 0.25em solid #f1f3f4;\n  }\n}\n\n.container {\n  width: 600px;\n  height: 672px;\n}\n\n.header {\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 12px;\n  line-height: 14px;\n  margin-bottom: 16px;\n  color: #555;\n}\n\n.footer {\n  font-size: 12px;\n  line-height: 14px;\n  text-align: right;\n  padding-top: 8px;\n  border-top: 1px dashed #f1f3f4;\n  color: #395692;\n  margin-top: 8px;\n}\n\n.preview {\n  font-size: 12px;\n  color: #888;\n  line-height: 18px;\n  width: 220px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n  white-space: nowrap;\n  height: 18px;\n}\n"]}]),t.locals={root:"_3O82p2memlng7tcEwAGMft",send:"bO3UXl2EOZucz1-aizAnR",receive:"WDwf45vWP7-1nl-yGTs5e",container:"tAVL13GN4v_5PaIUOzgLQ",header:"_8vB6v5PFehXJMtwqioiPx",footer:"_1E7BqUAizKcdZG5aLkon11",preview:"_3JjGB_k4kg4HhIzlYAJ9Ty"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._2DHthNBqDPxDjC1c6JvkZH {\n  background: #f5f6f8;\n  padding: 8px;\n  width: 224px;\n  word-break: break-all;\n  font-size: 14px;\n  box-sizing: content-box;\n}\n\n._3pWLUxyM1FZ7-NdZqZbKY_ {\n  box-sizing: content-box;\n  border-top: 1px solid #e8e8e8;\n  height: 36px;\n  line-height: 36px;\n  width: 224px;\n  word-break: break-all;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #888;\n  cursor: pointer;\n  text-align: center;\n  white-space: nowrap;\n}\n\n._7-vPwOgwWBYpZj0E5MyHX {\n  padding-bottom: 8px;\n  line-height: 21px;\n}\n\n._2la8jPuCjpqKzvP_S2sWAE {\n  color: #ee4d2d;\n}\n\n._1DekCN6MP9k1IUvBQZzeom {\n  color: #ccc;\n  cursor: default;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,mBAAmB;EACnB,YAAY;EACZ,YAAY;EACZ,qBAAqB;EACrB,eAAe;EACf,uBAAuB;AACzB;;AAEA;EACE,uBAAuB;EACvB,6BAA6B;EAC7B,YAAY;EACZ,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,gBAAgB;EAChB,uBAAuB;EACvB,WAAW;EACX,eAAe;EACf,kBAAkB;EAClB,mBAAmB;AACrB;;AAEA;EACE,mBAAmB;EACnB,iBAAiB;AACnB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,WAAW;EACX,eAAe;AACjB",file:"index.css",sourcesContent:[".root {\n  background: #f5f6f8;\n  padding: 8px;\n  width: 224px;\n  word-break: break-all;\n  font-size: 14px;\n  box-sizing: content-box;\n}\n\n.option {\n  box-sizing: content-box;\n  border-top: 1px solid #e8e8e8;\n  height: 36px;\n  line-height: 36px;\n  width: 224px;\n  word-break: break-all;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #888;\n  cursor: pointer;\n  text-align: center;\n  white-space: nowrap;\n}\n\n.title {\n  padding-bottom: 8px;\n  line-height: 21px;\n}\n\n.primary {\n  color: #ee4d2d;\n}\n\n.invalid {\n  color: #ccc;\n  cursor: default;\n}\n"]}]),t.locals={root:"_2DHthNBqDPxDjC1c6JvkZH",option:"_3pWLUxyM1FZ7-NdZqZbKY_",title:"_7-vPwOgwWBYpZj0E5MyHX",primary:"_2la8jPuCjpqKzvP_S2sWAE",invalid:"_1DekCN6MP9k1IUvBQZzeom"},e.exports=t},function(e,t,n){(t=n(20)(!0)).push([e.i,"._61IkPwaOcwo1jAenPujlR {\n  height: 100%;\n  flex-grow: 1;\n}\n\n._23cvBXwOyu7fgpbeq6EbXs {\n  outline: 0 none;\n  -ms-scroll-chaining: none;\n      overscroll-behavior: contain;\n}\n","",{version:3,sources:["index.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,YAAY;AACd;;AAEA;EACE,eAAe;EACf,yBAA4B;MAA5B,4BAA4B;AAC9B",file:"index.css",sourcesContent:[".message-section {\n  height: 100%;\n  flex-grow: 1;\n}\n\n.grid {\n  outline: 0 none;\n  overscroll-behavior: contain;\n}\n"]}]),t.locals={"message-section":"_61IkPwaOcwo1jAenPujlR",messageSection:"_61IkPwaOcwo1jAenPujlR",grid:"_23cvBXwOyu7fgpbeq6EbXs"},e.exports=t},function(e,t){e.exports=N},,function(e,t,n){"use strict";n.r(t),n.d(t,"getModule",(function(){return D})),n.d(t,"default",(function(){return U}));var r=n(51),s=n.n(r),o=n(0),a=n.n(o),i=n(82),c=n(36),u=n.n(c),l=n(4),d=n.n(l),p=n(13),f=n.n(p),h=n(14),A=n.n(h),g=n(6),m=n.n(g),E=n(15),v=n.n(E),b=n(16),_=n.n(b),y=n(9),S=n.n(y),x=n(10),C=n(176),O=n(1),w=n(12),I=["fetchMessagesRequested","messageHttpStatus"];function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(e){v()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S()(e);if(t){var s=S()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return _()(this,n)}}(n);function n(e){var r;return f()(this,n),(r=t.call(this,e)).fetchRequested=r.fetchRequested.bind(m()(r)),r}return A()(n,[{key:"fetchRequested",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needReset,n=void 0!==t&&t,r=e.direction,s=this.props,o=s.messageList,a=s.currentConversation,i=s.fetchMessagesRequested,c={conversation:a,direction:"up"===r||"older"===r?"older":"latest"};if(n)c.read=!0,c.reset=!0;else if(!o.length)return;i(T({},c))}},{key:"render",value:function(){var e=this.props,t=(e.fetchMessagesRequested,e.messageHttpStatus),n=s()(e,I);return a.a.createElement(C.a,u()({},n,{status:t,fetchRequested:this.fetchRequested}))}}]),n}(a.a.PureComponent),B={updateTranslateTips:O.updateTranslateTips,markMessagesRequested:O.markMessagesRequested,sendMessagesRequested:w.sendMessagesRequested,fetchMessagesRequested:w.fetchMessagesRequested,resendMessageRequested:w.resendMessageRequested,populateMessageRequested:w.populateMessageRequested,setCurrentConversationCanRead:O.setCurrentConversationCanRead,cancelSendingMessageRequested:w.cancelSendingMessageRequested},k=Object(x.connect)((function(e){return{isScChat:Object(O.isScChatSelector)(e),translateTips:Object(O.tipsSelector)(e),hasMoreOlderMessage:Object(O.hasMoreOlderMessageSelector)(e),hasMoreLatestMessage:Object(O.hasMoreLatestMessageSelector)(e),isSubAccount:Object(O.isSubAccountSelector)(e),messageList:Object(O.messagesWithSourceSelector)(e),showChatWindow:Object(O.showChatWindowSelector)(e),unreadMessageIds:Object(O.unreadMessageIdsSelector)(e),messageHttpStatus:Object(O.messageHttpStatusSelector)(e),showConversationDetail:Object(O.showConversationDetailSelector)(e),currentConversationCanRead:Object(O.currentConversationCanReadSelector)(e),showWarningMessageIds:Object(O.showWarningMessageIdsSelector)(e),conversationId:Object(O.currentConversationIdSelector)(e),conversationShopId:Object(O.currentConversationShopIdSelectors)(e),conversationBuyerId:Object(O.currentConversationBuyerIdSelectors)(e),conversationStatus:Object(O.currentConversationStatusSelectors)(e),shop:Object(O.currentConversationShopSelectors)(e),inScrollToMessage:Object(O.inScrollToMessageSelector)(e)||Object(O.inlocationSelector)(e),shopTranslationSettings:Object(O.shopTranslationSettingsSelector)(e),currentConversationTranslationAccess:Object(O.currentConversationTranslationAccessSelector)(e)}}),B)(j),R=w.reducerMap,N=w.sagas,P=s()(w,["reducerMap","sagas"]),D=function(){return{id:"message-section",reducerMap:R,sagas:N,actionsMap:P,retained:!0}};function U(e){return a.a.createElement(i.DynamicModuleLoader,{modules:[D()]},a.a.createElement(k,e))}}]))},KdhP:function(e,t,n){function r(e){this.options=e||{locator:{}}}function s(){this.cdata=!1}function o(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function i(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function c(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new u,o=n.domBuilder||new s,i=n.errorHandler,c=n.locator,l=n.xmlns||{},d={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return c&&o.setDocumentLocator(c),r.errorHandler=function(e,t,n){if(!e){if(t instanceof s)return t;e=t}var r={},o=e instanceof Function;function i(t){var s=e[t];!s&&o&&(s=2==e.length?function(n){e(t,n)}:e),r[t]=s&&function(e){s("[xmldom "+t+"]\t"+e+a(n))}||function(){}}return n=n||{},i("warning"),i("error"),i("fatalError"),r}(i,o,c),r.domBuilder=n.domBuilder||o,/\/x?html?$/.test(t)&&(d.nbsp="Â ",d.copy="Â©",l[""]="http://www.w3.org/1999/xhtml"),l.xml=l.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,l,d):r.errorHandler.error("invalid doc source"),o.doc},s.prototype={startDocument:function(){this.doc=(new l).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var s=this.doc,a=s.createElementNS(e,n||t),i=r.length;c(this,a),this.currentElement=a,this.locator&&o(this.locator,a);for(var u=0;u<i;u++){e=r.getURI(u);var l=r.getValue(u),d=(n=r.getQName(u),s.createAttributeNS(e,n));this.locator&&o(r.getLocator(u),d),d.value=d.nodeValue=l,a.setAttributeNode(d)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&o(this.locator,n),c(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=i.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&o(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=i.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&o(this.locator,r),c(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var s=r.createDocumentType(e,t,n);this.locator&&o(this.locator,s),c(this,s)}},warning:function(e){console.warn("[xmldom warning]\t"+e,a(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,a(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,a(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){s.prototype[e]=function(){return null}}));var u=n("1h1e").XMLReader,l=t.DOMImplementation=n("dJxt").DOMImplementation;t.XMLSerializer=n("dJxt").XMLSerializer,t.DOMParser=r},"TU/D":function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.UssVodUploader=void 0;var o=n("ifpt"),a=n("ibA+"),i=function(){function e(e){var t=this,n=e.mediaFile,r=e.coverFile,s=e.uss,i=e.cancelToken,c=e.mediaType,u=e.autoPicType;this.eventMap=new Map,this.cancel=function(){return s.cancel(i)},this.resume=function(){return s.resume(i)};var l=[Promise.resolve(null),Promise.resolve(null),Promise.resolve(null),Promise.resolve(null)];n&&(l[0]=s.putObject({file:n,contentType:c==a.MediaType.video?a.ContentType.video:a.ContentType.audio,cancelToken:i,onUploadProgress:function(e){t.emit(a.UploaderEvents.mediaProgress,e)}}).then((function(e){var n=t.getNormalizeResponse(e);return t.emit(a.UploaderEvents.mediaUpload,n),n})).catch((function(e){throw t.cancel(),e})),l[2]=o.getFileMd5(n)),r&&(l[1]=s.putObject({file:r,contentType:a.ContentType.image,cancelToken:i,onUploadProgress:function(e){t.emit(a.UploaderEvents.coverProgress,e)},autoPicType:u}).then((function(e){var n=t.getNormalizeResponse(e);return t.emit(a.UploaderEvents.coverUpload,n),n})),l[3]=o.getFileMd5(r)),this.donePromise=Promise.all(l)}return e.prototype.done=function(){return r(this,void 0,void 0,(function(){var e,t,n,r,o,a;return s(this,(function(s){switch(s.label){case 0:return[4,this.donePromise];case 1:return e=s.sent(),t=e[0],n=e[1],r=e[2],o=e[3],a={video:t,cover:n},r&&(a.video.md5=r),o&&(a.cover.md5=o),[2,a]}}))}))},e.prototype.on=function(e,t){var n=this.eventMap.get(e)||new Set;n.add(t),this.eventMap.set(e,n)},e.prototype.off=function(e,t){var n=this.eventMap.get(e);n&&(n.delete(t),0===n.size&&this.eventMap.delete(e))},e.prototype.getNormalizeResponse=function(e){return{url:e.url,etag:e.etag,extendId:e.fid}},e.prototype.emit=function(e,t){var n=this.eventMap.get(e);n&&n.forEach((function(e){e(t)}))},e}();t.UssVodUploader=i},WUFY:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,s(n("ibA+"),t);var o=n("oEf+");Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.UssVod}})},YZgg:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.VodReporter=t.VodReportEvent=void 0;var s,o,a=n("s3hC"),i=n("FRsH"),c=n("yPq/");!function(e){e.report_apply="report_apply",e.report_cos_upload="report_cos_upload",e.report_commit="report_commit",e.report_done="report_done"}(s=t.VodReportEvent||(t.VodReportEvent={})),function(e){e[e.apply=10001]="apply",e[e.cos_upload=20001]="cos_upload",e[e.commit=10002]="commit",e[e.done=40001]="done"}(o||(o={}));var u=function(){function e(e,t){this.baseReportData={version:i.version,platform:3e3,device:navigator.userAgent},this.reportUrl="https://vodreport.qcloud.com/ugcupload_new",this.uploader=e,this.options=t,this.init()}return e.prototype.init=function(){this.uploader.on(s.report_apply,this.onApply.bind(this)),this.uploader.on(s.report_cos_upload,this.onCosUpload.bind(this)),this.uploader.on(s.report_commit,this.onCommit.bind(this)),this.uploader.on(s.report_done,this.onDone.bind(this))},e.prototype.onApply=function(e){try{var t=this.uploader;if(!t.videoFile)return;Object.assign(this.baseReportData,{appId:t.appId,fileSize:t.videoFile.size,fileName:t.videoFile.name,fileType:t.videoFile.type,vodSessionKey:t.vodSessionKey,reqKey:t.reqKey,reportId:t.reportId});var n={reqType:o.apply,errCode:0,vodErrCode:0,errMsg:"",reqTimeCost:Number(new Date)-Number(e.requestStartTime),reqTime:Number(e.requestStartTime)};e.err&&(n.errCode=1,n.vodErrCode=e.err.code,n.errMsg=e.err.message),e.data&&(this.baseReportData.cosRegion=e.data.storageRegionV5),this.report(n)}catch(e){if(console.error("onApply",e),c.default.isTest)throw e}},e.prototype.onCosUpload=function(e){try{var t={reqType:o.cos_upload,errCode:0,cosErrCode:"",errMsg:"",reqTimeCost:Number(new Date)-Number(e.requestStartTime),reqTime:Number(e.requestStartTime)};e.err&&(t.errCode=1,t.cosErrCode=e.err.error?e.err.error.Code:e.err,e.err&&"error"===e.err.error&&(t.cosErrCode="cors error"),t.errMsg=JSON.stringify(e.err)),this.report(t)}catch(e){if(console.error("onCosUpload",e),c.default.isTest)throw e}},e.prototype.onCommit=function(e){try{var t={reqType:o.commit,errCode:0,vodErrCode:0,errMsg:"",reqTimeCost:Number(new Date)-Number(e.requestStartTime),reqTime:Number(e.requestStartTime)};e.err&&(t.errCode=1,t.vodErrCode=e.err.code,t.errMsg=e.err.message),e.data&&(this.baseReportData.fileId=e.data.fileId),this.report(t)}catch(e){if(console.error("onCommit",e),c.default.isTest)throw e}},e.prototype.onDone=function(e){try{var t={reqType:o.done,errCode:e.err&&e.err.code,reqTimeCost:Number(new Date)-Number(e.requestStartTime),reqTime:Number(e.requestStartTime)};this.report(t)}catch(e){if(console.error("onDone",e),c.default.isTest)throw e}},e.prototype.report=function(e){e=r(r({},this.baseReportData),e),this.send(e)},e.prototype.send=function(e){c.default.isDev||c.default.isTest?console.log("send reportData",e):a.vodAxios.post(this.reportUrl,e)},e}();t.VodReporter=u},"YZm+":function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var root="object"==typeof window?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS&&(root=global);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__("PDX0"),HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(e){return function(t){return new Sha1(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Sha1},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return method(e);return crypto.createHash("sha1").update(new Buffer(e)).digest("hex")};return nodeMethod};function Sha1(e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===root.ArrayBuffer&&(e=new Uint8Array(e));for(var n,r,s=0,o=e.length||0,a=this.blocks;s<o;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)for(r=this.start;s<o&&r<64;++s)a[r>>2]|=e[s]<<SHIFT[3&r++];else for(r=this.start;s<o&&r<64;++s)(n=e.charCodeAt(s))<128?a[r>>2]|=n<<SHIFT[3&r++]:n<2048?(a[r>>2]|=(192|n>>6)<<SHIFT[3&r++],a[r>>2]|=(128|63&n)<<SHIFT[3&r++]):n<55296||n>=57344?(a[r>>2]|=(224|n>>12)<<SHIFT[3&r++],a[r>>2]|=(128|n>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&n)<<SHIFT[3&r++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++s)),a[r>>2]|=(240|n>>18)<<SHIFT[3&r++],a[r>>2]|=(128|n>>12&63)<<SHIFT[3&r++],a[r>>2]|=(128|n>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&n)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=a[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var e,t,n=this.h0,r=this.h1,s=this.h2,o=this.h3,a=this.h4,i=this.blocks;for(e=16;e<80;++e)t=i[e-3]^i[e-8]^i[e-14]^i[e-16],i[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)n=(t=(r=(t=(s=(t=(o=(t=(a=(t=n<<5|n>>>27)+(r&s|~r&o)+a+1518500249+i[e]<<0)<<5|a>>>27)+(n&(r=r<<30|r>>>2)|~n&s)+o+1518500249+i[e+1]<<0)<<5|o>>>27)+(a&(n=n<<30|n>>>2)|~a&r)+s+1518500249+i[e+2]<<0)<<5|s>>>27)+(o&(a=a<<30|a>>>2)|~o&n)+r+1518500249+i[e+3]<<0)<<5|r>>>27)+(s&(o=o<<30|o>>>2)|~s&a)+n+1518500249+i[e+4]<<0,s=s<<30|s>>>2;for(;e<40;e+=5)n=(t=(r=(t=(s=(t=(o=(t=(a=(t=n<<5|n>>>27)+(r^s^o)+a+1859775393+i[e]<<0)<<5|a>>>27)+(n^(r=r<<30|r>>>2)^s)+o+1859775393+i[e+1]<<0)<<5|o>>>27)+(a^(n=n<<30|n>>>2)^r)+s+1859775393+i[e+2]<<0)<<5|s>>>27)+(o^(a=a<<30|a>>>2)^n)+r+1859775393+i[e+3]<<0)<<5|r>>>27)+(s^(o=o<<30|o>>>2)^a)+n+1859775393+i[e+4]<<0,s=s<<30|s>>>2;for(;e<60;e+=5)n=(t=(r=(t=(s=(t=(o=(t=(a=(t=n<<5|n>>>27)+(r&s|r&o|s&o)+a-1894007588+i[e]<<0)<<5|a>>>27)+(n&(r=r<<30|r>>>2)|n&s|r&s)+o-1894007588+i[e+1]<<0)<<5|o>>>27)+(a&(n=n<<30|n>>>2)|a&r|n&r)+s-1894007588+i[e+2]<<0)<<5|s>>>27)+(o&(a=a<<30|a>>>2)|o&n|a&n)+r-1894007588+i[e+3]<<0)<<5|r>>>27)+(s&(o=o<<30|o>>>2)|s&a|o&a)+n-1894007588+i[e+4]<<0,s=s<<30|s>>>2;for(;e<80;e+=5)n=(t=(r=(t=(s=(t=(o=(t=(a=(t=n<<5|n>>>27)+(r^s^o)+a-899497514+i[e]<<0)<<5|a>>>27)+(n^(r=r<<30|r>>>2)^s)+o-899497514+i[e+1]<<0)<<5|o>>>27)+(a^(n=n<<30|n>>>2)^r)+s-899497514+i[e+2]<<0)<<5|s>>>27)+(o^(a=a<<30|a>>>2)^n)+r-899497514+i[e+3]<<0)<<5|r>>>27)+(s^(o=o<<30|o>>>2)^a)+n-899497514+i[e+4]<<0,s=s<<30|s>>>2;this.h0=this.h0+n<<0,this.h1=this.h1+r<<0,this.h2=this.h2+s<<0,this.h3=this.h3+o<<0,this.h4=this.h4+a<<0},Sha1.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,s=this.h4;return HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,s=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,s>>24&255,s>>16&255,s>>8&255,255&s]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};var exports=createMethod();COMMON_JS?module.exports=exports:(root.sha1=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()}).call(this,__webpack_require__("8oxB"),__webpack_require__("yLpj"))},aaBP:function(e,t,n){e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],r=e[1],s=e[2],o=e[3];r=((r+=((s=((s+=((o=((o+=((n=((n+=(r&s|~r&o)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&s)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+t[2]+606105819|0)<<17|s>>>15)+o|0)&o|~s&n)+t[3]-1044525330|0)<<22|r>>>10)+s|0,r=((r+=((s=((s+=((o=((o+=((n=((n+=(r&s|~r&o)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&s)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+t[6]-1473231341|0)<<17|s>>>15)+o|0)&o|~s&n)+t[7]-45705983|0)<<22|r>>>10)+s|0,r=((r+=((s=((s+=((o=((o+=((n=((n+=(r&s|~r&o)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&s)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+t[10]-42063|0)<<17|s>>>15)+o|0)&o|~s&n)+t[11]-1990404162|0)<<22|r>>>10)+s|0,r=((r+=((s=((s+=((o=((o+=((n=((n+=(r&s|~r&o)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&s)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+t[14]-1502002290|0)<<17|s>>>15)+o|0)&o|~s&n)+t[15]+1236535329|0)<<22|r>>>10)+s|0,r=((r+=((s=((s+=((o=((o+=((n=((n+=(r&o|s&~o)+t[1]-165796510|0)<<5|n>>>27)+r|0)&s|r&~s)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|s>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|r>>>12)+s|0,r=((r+=((s=((s+=((o=((o+=((n=((n+=(r&o|s&~o)+t[5]-701558691|0)<<5|n>>>27)+r|0)&s|r&~s)+t[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|s>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|r>>>12)+s|0,r=((r+=((s=((s+=((o=((o+=((n=((n+=(r&o|s&~o)+t[9]+568446438|0)<<5|n>>>27)+r|0)&s|r&~s)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|s>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|r>>>12)+s|0,r=((r+=((s=((s+=((o=((o+=((n=((n+=(r&o|s&~o)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&s|r&~s)+t[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|s>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|r>>>12)+s|0,r=((r+=((s=((s+=((o=((o+=((n=((n+=(r^s^o)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^s)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|s>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|r>>>9)+s|0,r=((r+=((s=((s+=((o=((o+=((n=((n+=(r^s^o)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^s)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|s>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|r>>>9)+s|0,r=((r+=((s=((s+=((o=((o+=((n=((n+=(r^s^o)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^s)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|s>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|r>>>9)+s|0,r=((r+=((s=((s+=((o=((o+=((n=((n+=(r^s^o)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^s)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|s>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|r>>>9)+s|0,r=((r+=((o=((o+=(r^((n=((n+=(s^(r|~o))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~s))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((s=((s+=(n^(o|~r))+t[14]-1416354905|0)<<15|s>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+s|0,r=((r+=((o=((o+=(r^((n=((n+=(s^(r|~o))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~s))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((s=((s+=(n^(o|~r))+t[10]-1051523|0)<<15|s>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+s|0,r=((r+=((o=((o+=(r^((n=((n+=(s^(r|~o))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~s))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((s=((s+=(n^(o|~r))+t[6]-1560198380|0)<<15|s>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+s|0,r=((r+=((o=((o+=(r^((n=((n+=(s^(r|~o))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~s))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((s=((s+=(n^(o|~r))+t[2]+718787259|0)<<15|s>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+s|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=s+e[2]|0,e[3]=o+e[3]|0}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function s(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function o(e){var t,s,o,a,i,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)n(l,r(e.substring(t-64,t)));for(s=(e=e.substring(t-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<s;t+=1)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(l,o),t=0;t<16;t+=1)o[t]=0;return a=(a=8*u).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(a[2],16),c=parseInt(a[1],16)||0,o[14]=i,o[15]=c,n(l,o),l}function a(e){var n,r="";for(n=0;n<4;n+=1)r+=t[e>>8*n+4&15]+t[e>>8*n&15];return r}function i(e){var t;for(t=0;t<e.length;t+=1)e[t]=a(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function l(){this.reset()}return i(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var s,o,a,i,c=this.byteLength,u=t(n,c),l=c;return r!==e&&(l=t(r,c)),u>l?new ArrayBuffer(0):(s=l-u,o=new ArrayBuffer(s),a=new Uint8Array(o),i=new Uint8Array(this,u,s),a.set(i),o)}}(),l.prototype.append=function(e){return this.appendBinary(c(e)),this},l.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,s=this._buff.length;for(t=64;t<=s;t+=64)n(this._hash,r(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},l.prototype.end=function(e){var t,n,r=this._buff,s=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<s;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,s),n=i(this._hash),e&&(n=u(n)),this.reset(),n},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},l.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(e,t){var r,s,o,a=t;if(e[a>>2]|=128<<(a%4<<3),a>55)for(n(this._hash,e),a=0;a<16;a+=1)e[a]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(r[2],16),o=parseInt(r[1],16)||0,e[14]=s,e[15]=o,n(this._hash,e)},l.hash=function(e,t){return l.hashBinary(c(e),t)},l.hashBinary=function(e,t){var n=i(o(e));return t?u(n):n},l.ArrayBuffer=function(){this.reset()},l.ArrayBuffer.prototype.append=function(e){var t,r,o,a,i,c=(r=this._buff.buffer,o=e,a=!0,(i=new Uint8Array(r.byteLength+o.byteLength)).set(new Uint8Array(r)),i.set(new Uint8Array(o),r.byteLength),a?i:i.buffer),u=c.length;for(this._length+=e.byteLength,t=64;t<=u;t+=64)n(this._hash,s(c.subarray(t-64,t)));return this._buff=t-64<u?new Uint8Array(c.buffer.slice(t-64)):new Uint8Array(0),this},l.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,s=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<s;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,s),n=i(this._hash),e&&(n=u(n)),this.reset(),n},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var e,t=l.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},l.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,r=e.length,s=new ArrayBuffer(r),o=new Uint8Array(s);for(n=0;n<r;n+=1)o[n]=e.charCodeAt(n);return t?o:s}(e.buff,!0),l.prototype.setState.call(this,e)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(e,t){var r=i(function(e){var t,r,o,a,i,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)n(l,s(e.subarray(t-64,t)));for(e=t-64<u?e.subarray(t-64):new Uint8Array(0),r=e.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)o[t>>2]|=e[t]<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(l,o),t=0;t<16;t+=1)o[t]=0;return a=(a=8*u).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(a[2],16),c=parseInt(a[1],16)||0,o[14]=i,o[15]=c,n(l,o),l}(new Uint8Array(e)));return t?u(r):r},l}()},dJxt:function(e,t){function n(e,t){for(var n in e)t[n]=e[n]}function r(e,t){var r=e.prototype;if(Object.create){var s=Object.create(t.prototype);r.__proto__=s}if(!(r instanceof t)){function o(){}o.prototype=t.prototype,n(r,o=new o),e.prototype=r=o}r.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),r.constructor=e)}var s="http://www.w3.org/1999/xhtml",o={},a=o.ELEMENT_NODE=1,i=o.ATTRIBUTE_NODE=2,c=o.TEXT_NODE=3,u=o.CDATA_SECTION_NODE=4,l=o.ENTITY_REFERENCE_NODE=5,d=o.ENTITY_NODE=6,p=o.PROCESSING_INSTRUCTION_NODE=7,f=o.COMMENT_NODE=8,h=o.DOCUMENT_NODE=9,A=o.DOCUMENT_TYPE_NODE=10,g=o.DOCUMENT_FRAGMENT_NODE=11,m=o.NOTATION_NODE=12,E={},v={},b=(E.INDEX_SIZE_ERR=(v[1]="Index size error",1),E.DOMSTRING_SIZE_ERR=(v[2]="DOMString size error",2),E.HIERARCHY_REQUEST_ERR=(v[3]="Hierarchy request error",3)),_=(E.WRONG_DOCUMENT_ERR=(v[4]="Wrong document",4),E.INVALID_CHARACTER_ERR=(v[5]="Invalid character",5),E.NO_DATA_ALLOWED_ERR=(v[6]="No data allowed",6),E.NO_MODIFICATION_ALLOWED_ERR=(v[7]="No modification allowed",7),E.NOT_FOUND_ERR=(v[8]="Not found",8)),y=(E.NOT_SUPPORTED_ERR=(v[9]="Not supported",9),E.INUSE_ATTRIBUTE_ERR=(v[10]="Attribute in use",10));E.INVALID_STATE_ERR=(v[11]="Invalid state",11),E.SYNTAX_ERR=(v[12]="Syntax error",12),E.INVALID_MODIFICATION_ERR=(v[13]="Invalid modification",13),E.NAMESPACE_ERR=(v[14]="Invalid namespace",14),E.INVALID_ACCESS_ERR=(v[15]="Invalid access",15);function S(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,v[e]),this.message=v[e],Error.captureStackTrace&&Error.captureStackTrace(this,S);return n.code=e,t&&(this.message=this.message+": "+t),n}function x(){}function C(e,t){this._node=e,this._refresh=t,O(this)}function O(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);ne(e,"length",r.length),n(r,e),e._inc=t}}function w(){}function I(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function M(e,t,n,r){if(r?t[I(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var s=e.ownerDocument;s&&(r&&P(s,e,r),function(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(s,e,n))}}function T(e,t,n){var r=I(t,n);if(!(r>=0))throw S(_,new Error(e.tagName+"@"+n));for(var s=t.length-1;r<s;)t[r]=t[++r];if(t.length=s,e){var o=e.ownerDocument;o&&(P(o,e,n),n.ownerElement=null)}}function j(e){if(this._features={},e)for(var t in e)this._features=e[t]}function B(){}function k(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function R(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(R(e,t))return!0}while(e=e.nextSibling)}function N(){}function P(e,t,n,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function D(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var s=t.firstChild,o=0;s;)r[o++]=s,s=s.nextSibling;r.length=o}}}function U(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,D(e.ownerDocument,e),t}function q(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===g){var s=t.firstChild;if(null==s)return t;var o=t.lastChild}else s=o=t;var a=n?n.previousSibling:e.lastChild;s.previousSibling=a,o.nextSibling=n,a?a.nextSibling=s:e.firstChild=s,null==n?e.lastChild=o:n.previousSibling=o;do{s.parentNode=e}while(s!==o&&(s=s.nextSibling));return D(e.ownerDocument||e,e),t.nodeType==g&&(t.firstChild=t.lastChild=null),t}function F(){this._nsMap={}}function L(){}function H(){}function G(){}function z(){}function W(){}function Y(){}function V(){}function X(){}function Q(){}function J(){}function K(){}function Z(){}function $(e,t){var n=[],r=9==this.nodeType?this.documentElement:this,s=r.prefix,o=r.namespaceURI;if(o&&null==s&&null==(s=r.lookupPrefix(o)))var a=[{namespace:o,prefix:null}];return te(this,n,e,t,a),n.join("")}function ee(e,t,n){var r=e.prefix||"",s=e.namespaceURI;if(!r&&!s)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===s||"http://www.w3.org/2000/xmlns/"==s)return!1;for(var o=n.length;o--;){var a=n[o];if(a.prefix==r)return a.namespace!=s}return!0}function te(e,t,n,r,o){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case a:o||(o=[]);o.length;var d=e.attributes,m=d.length,E=e.firstChild,v=e.tagName;n=s===e.namespaceURI||n,t.push("<",v);for(var b=0;b<m;b++){"xmlns"==(_=d.item(b)).prefix?o.push({prefix:_.localName,namespace:_.value}):"xmlns"==_.nodeName&&o.push({prefix:"",namespace:_.value})}for(b=0;b<m;b++){var _;if(ee(_=d.item(b),0,o)){var y=_.prefix||"",S=_.namespaceURI,x=y?" xmlns:"+y:" xmlns";t.push(x,'="',S,'"'),o.push({prefix:y,namespace:S})}te(_,t,n,r,o)}if(ee(e,0,o)){y=e.prefix||"",S=e.namespaceURI,x=y?" xmlns:"+y:" xmlns";t.push(x,'="',S,'"'),o.push({prefix:y,namespace:S})}if(E||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(v)){if(t.push(">"),n&&/^script$/i.test(v))for(;E;)E.data?t.push(E.data):te(E,t,n,r,o),E=E.nextSibling;else for(;E;)te(E,t,n,r,o),E=E.nextSibling;t.push("</",v,">")}else t.push("/>");return;case h:case g:for(E=e.firstChild;E;)te(E,t,n,r,o),E=E.nextSibling;return;case i:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,k),'"');case c:return t.push(e.data.replace(/[<&]/g,k));case u:return t.push("<![CDATA[",e.data,"]]>");case f:return t.push("\x3c!--",e.data,"--\x3e");case A:var C=e.publicId,O=e.systemId;if(t.push("<!DOCTYPE ",e.name),C)t.push(' PUBLIC "',C),O&&"."!=O&&t.push('" "',O),t.push('">');else if(O&&"."!=O)t.push(' SYSTEM "',O,'">');else{var w=e.internalSubset;w&&t.push(" [",w,"]"),t.push(">")}return;case p:return t.push("<?",e.target," ",e.data,"?>");case l:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ne(e,t,n){e[t]=n}S.prototype=Error.prototype,n(E,S),x.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)te(this[r],n,e,t);return n.join("")}},C.prototype.item=function(e){return O(this),this[e]},r(C,x),w.prototype={length:0,item:x.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new S(y);var n=this.getNamedItem(e.nodeName);return M(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new S(y);return t=this.getNamedItemNS(e.namespaceURI,e.localName),M(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return T(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return T(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},j.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new N;if(r.implementation=this,r.childNodes=new x,r.doctype=n,n&&r.appendChild(n),t){var s=r.createElementNS(e,t);r.appendChild(s)}return r},createDocumentType:function(e,t,n){var r=new Y;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},B.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return q(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return U(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,r){var s=new n.constructor;for(var o in n){var c=n[o];"object"!=typeof c&&c!=s[o]&&(s[o]=c)}n.childNodes&&(s.childNodes=new x);s.ownerDocument=t;switch(s.nodeType){case a:var u=n.attributes,l=s.attributes=new w,d=u.length;l._ownerElement=s;for(var p=0;p<d;p++)s.setAttributeNode(e(t,u.item(p),!0));break;case i:r=!0}if(r)for(var f=n.firstChild;f;)s.appendChild(e(t,f,r)),f=f.nextSibling;return s}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==c&&e.nodeType==c?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=t.nodeType==i?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==i?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},n(o,B),n(o,B.prototype),N.prototype={nodeName:"#document",nodeType:h,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==g){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return null==this.documentElement&&e.nodeType==a&&(this.documentElement=e),q(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),U(this,e)},importNode:function(e,t){return function e(t,n,r){var s;switch(n.nodeType){case a:(s=n.cloneNode(!1)).ownerDocument=t;case g:break;case i:r=!0}s||(s=n.cloneNode(!1));s.ownerDocument=t;s.parentNode=null;if(r)for(var o=n.firstChild;o;)s.appendChild(e(t,o,r)),o=o.nextSibling;return s}(this,e,t)},getElementById:function(e){var t=null;return R(this.documentElement,(function(n){if(n.nodeType==a&&n.getAttribute("id")==e)return t=n,!0})),t},createElement:function(e){var t=new F;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new x,(t.attributes=new w)._ownerElement=t,t},createDocumentFragment:function(){var e=new J;return e.ownerDocument=this,e.childNodes=new x,e},createTextNode:function(e){var t=new G;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new z;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new W;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new K;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new L;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new Q;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new F,r=t.split(":"),s=n.attributes=new w;return n.childNodes=new x,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,s._ownerElement=n,n},createAttributeNS:function(e,t){var n=new L,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},r(N,B),F.prototype={nodeType:a,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===g?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var r=e.lastChild;n.removeChild(t);r=e.lastChild}return r=e.lastChild,t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,D(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new C(this,(function(t){var n=[];return R(t,(function(r){r===t||r.nodeType!=a||"*"!==e&&r.tagName!=e||n.push(r)})),n}))},getElementsByTagNameNS:function(e,t){return new C(this,(function(n){var r=[];return R(n,(function(s){s===n||s.nodeType!==a||"*"!==e&&s.namespaceURI!==e||"*"!==t&&s.localName!=t||r.push(s)})),r}))}},N.prototype.getElementsByTagName=F.prototype.getElementsByTagName,N.prototype.getElementsByTagNameNS=F.prototype.getElementsByTagNameNS,r(F,B),L.prototype.nodeType=i,r(L,B),H.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(v[b])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},r(H,B),G.prototype={nodeName:"#text",nodeType:c,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},r(G,H),z.prototype={nodeName:"#comment",nodeType:f},r(z,H),W.prototype={nodeName:"#cdata-section",nodeType:u},r(W,H),Y.prototype.nodeType=A,r(Y,B),V.prototype.nodeType=m,r(V,B),X.prototype.nodeType=d,r(X,B),Q.prototype.nodeType=l,r(Q,B),J.prototype.nodeName="#document-fragment",J.prototype.nodeType=g,r(J,B),K.prototype.nodeType=p,r(K,B),Z.prototype.serializeToString=function(e,t,n){return $.call(e,t,n)},B.prototype.toString=$;try{if(Object.defineProperty){Object.defineProperty(C.prototype,"length",{get:function(){return O(this),this.$$length}}),Object.defineProperty(B.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case a:case g:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case a:case g:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ne=function(e,t,n){e["$$"+t]=n}}}catch(e){}t.DOMImplementation=j,t.XMLSerializer=Z},"ibA+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorCode=t.ContentTypeHeader=t.FileExt=t.MediaType=t.ContentType=t.HttpCode=t.UploaderEvents=void 0,function(e){e.mediaUpload="media_upload",e.mediaProgress="media_progress",e.coverUpload="cover_upload",e.coverProgress="cover_progress"}(t.UploaderEvents||(t.UploaderEvents={})),function(e){e[e.ok=200]="ok",e[e.invalidParam=400]="invalidParam",e[e.invalidToken=403]="invalidToken",e[e.bucketUnExist=404]="bucketUnExist",e[e.sizeExceeded=413]="sizeExceeded",e[e.serverError=500]="serverError"}(t.HttpCode||(t.HttpCode={})),function(e){e.video="video",e.image="image",e.audio="audio"}(t.ContentType||(t.ContentType={})),function(e){e.video="video",e.audio="audio"}(t.MediaType||(t.MediaType={})),function(e){e.video="mp4",e.image="jpg",e.audio="aac"}(t.FileExt||(t.FileExt={})),function(e){e.video="video/mpeg4",e.image="image/jpeg",e.audio="audio/aac",e.slice="application/octet-stream",e.pngImage="image/png"}(t.ContentTypeHeader||(t.ContentTypeHeader={})),function(e){e[e.Success=0]="Success",e[e.Unknown=-1]="Unknown",e[e.PreparePublishFail=1e3]="PreparePublishFail",e[e.PublishResultRequestFailed=1001]="PublishResultRequestFailed",e[e.PublishResultResponseError=1002]="PublishResultResponseError",e[e.PublishResultVideoFailed=1003]="PublishResultVideoFailed",e[e.PublishResultCoverFailed=1004]="PublishResultCoverFailed",e[e.PublishResultVideoInvalid=1007]="PublishResultVideoInvalid",e[e.PublishResultCoverInvalid=1008]="PublishResultCoverInvalid",e[e.TokenInvalid=1012]="TokenInvalid",e[e.VideoPathIsNull=1013]="VideoPathIsNull",e[e.VideoNoExist=1014]="VideoNoExist",e[e.CoverNoExist=1016]="CoverNoExist",e[e.UserCancel=1017]="UserCancel",e[e.CheckFileFail=1101]="CheckFileFail",e[e.UssMergeFilesFail=1102]="UssMergeFilesFail"}(t.ErrorCode||(t.ErrorCode={}))},ifpt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFileMd5=void 0;var r=n("aaBP"),s=n("ibA+"),o=n("rPHV");t.getFileMd5=function(e){var t=File.prototype.slice,n=2097152,a=Math.ceil(e.size/n),i=0,c=new r.ArrayBuffer,u=new FileReader;return new Promise((function(r,l){function d(){var r=i*n,s=r+n>=e.size?e.size:r+n;u.readAsArrayBuffer(t.call(e,r,s))}u.onload=function(e){c.append(e.target.result),++i<a?d():r(c.end())},u.onerror=function(e){l(new o.Error({code:s.ErrorCode.CheckFileFail,message:"Get file etag failed",error:e}))},d()}))}},"oEf+":function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.UssVod=void 0;var s=n("vDqi"),o=n("ibA+"),a=n("TU/D"),i=n("Ao50"),c=n("rPHV"),u=function(){function e(e){this.cancelToken=s.default.CancelToken.source(),this.uss=new i.USS(r(r({},e),{sliceSize:e.sliceSize}))}return e.prototype.upload=function(e){if(e.coverFile&&!c.isImage(e.coverFile))throw new c.Error({code:o.ErrorCode.PublishResultCoverInvalid,message:"Publish result cover invalid."});return new a.UssVodUploader(r(r({},e),{cancelToken:s.default.CancelToken.source(),uss:this.uss}))},e}();t.UssVod=u},rPHV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Error=t.isAudio=t.isVideo=t.isImage=t.createStorage=t.Queue=void 0;var r=function(){function e(e,t){this.index=-1,this.running=0,this.canceled=!1,this.tasks=e,this.concurrency=t.concurrency}return e.prototype.addTask=function(e){this.tasks.push(e)},e.prototype.setTaskFullfilledHandler=function(e){this.onTaskFullfilled=e},e.prototype.setTaskRejectedHandler=function(e){this.onTaskRejected=e},e.prototype.setAllTaskFullfilledHandler=function(e){this.onAllTaskFullfilled=e},e.prototype.run=function(){var e=this;this.running<this.concurrency&&!this.canceled&&this.index<this.tasks.length-1&&(this.running++,this.tasks[++this.index]().then((function(t){var n;null===(n=e.onTaskFullfilled)||void 0===n||n.call(e,t),e.index===e.tasks.length-1&&e.onAllTaskFullfilled()})).catch((function(t){var n;null===(n=e.onTaskRejected)||void 0===n||n.call(e,t)})).finally((function(){e.running>0&&e.running--,e.run()})),this.run())},e.prototype.start=function(){this.index=-1,this.run()},e.prototype.cancel=function(){this.canceled=!0},e.prototype.resume=function(){this.canceled=!1,this.run()},e}();t.Queue=r;t.createStorage=function(e){var t="USS_VOD_"+e;return{set:function(e){try{localStorage.setItem(t,JSON.stringify(e))}catch(e){console.error(e)}},get:function(){try{return JSON.parse(localStorage.getItem(t))}catch(e){return null}},remove:function(){localStorage.removeItem(t)}}};t.isImage=function(e){var t=e.name.split(".").pop();return/^(jpg|jpeg|png|gif|bmp|webp)$/i.test(t)};t.isVideo=function(e){var t=e.name.split(".").pop();return/^(mp4|rmvb|mkv|flv|mpeg4|3gp|avi|mov|wmv|rm|mpg)$/i.test(t)};t.isAudio=function(e){var t=e.name.split(".").pop();return/^(mp3|aac)$/i.test(t)};var s=function(e){var t=e.code,n=void 0===t?-1:t,r=e.message,s=e.error,o=void 0===s?null:s,a=e.httpCode,i=void 0===a?null:a;this.code=n,this.message=r,this.error=o,this.httpCode=i};t.Error=s},s3hC:function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.UploaderEvent=t.vodAxios=void 0;var c,u=n("YZm+"),l=n("NDg5"),d=n("uhBA"),p=n("vDqi"),f=n("yPq/"),h=n("YZgg"),A=n("xk4V");t.vodAxios=p.default.create(),t.vodAxios.interceptors.response.use((function(e){return e}),(function(e){return isNaN(e.code)&&(e.code=500),Promise.reject(e)})),function(e){e.video_progress="video_progress",e.media_progress="media_progress",e.video_upload="video_upload",e.media_upload="media_upload",e.cover_progress="cover_progress",e.cover_upload="cover_upload"}(c=t.UploaderEvent||(t.UploaderEvent={}));var g=function(e){function n(t){var n=e.call(this)||this;return n.sessionName="",n.vodSessionKey="",n.appId=0,n.reqKey=A(),n.reportId="",n.enableResume=!0,n.applyRequestTimeout=5e3,n.applyRequestRetryCount=3,n.commitRequestTimeout=5e3,n.commitRequestRetryCount=3,n.retryDelay=1e3,n.validateInitParams(t),n.videoFile=t.mediaFile||t.videoFile,n.getSignature=t.getSignature,n.enableResume=t.enableResume,n.videoName=t.mediaName||t.videoName,n.coverFile=t.coverFile,n.fileId=t.fileId,n.applyRequestTimeout=t.applyRequestTimeout||n.applyRequestTimeout,n.commitRequestTimeout=t.commitRequestTimeout||n.commitRequestTimeout,n.retryDelay=t.retryDelay||n.retryDelay,n.appId=t.appId||n.appId,n.reportId=t.reportId||n.reportId,n.cosAuthTime=0,n.genFileInfo(),n}return s(n,e),n.prototype.setStorage=function(e,t){if(e){var n="webugc_"+u(e);try{localStorage.setItem(n,t)}catch(e){}}},n.prototype.getStorage=function(e){if(e){var t="webugc_"+u(e),n=null;try{n=localStorage.getItem(t)}catch(e){}return n}},n.prototype.delStorage=function(e){if(e){var t="webugc_"+u(e);try{localStorage.removeItem(t)}catch(e){}}},n.prototype.validateInitParams=function(e){if(!f.default.isFunction(e.getSignature))throw new Error("getSignature must be a function");if(e.videoFile&&!f.default.isFile(e.videoFile))throw new Error("videoFile must be a File")},n.prototype.genFileInfo=function(){var e=this.videoFile;if(e){var t=e.name.lastIndexOf("."),n="";if(this.videoName){if(!f.default.isString(this.videoName))throw new Error("mediaName must be a string");if(/[:*?<>\"\\/|]/g.test(this.videoName))throw new Error('Cant use these chars in filename: \\ / : * ? " < > |');n=this.videoName}else n=e.name.substring(0,t);this.videoInfo={name:n,type:e.name.substring(t+1).toLowerCase(),size:e.size},this.sessionName+=e.name+"_"+e.size+";"}var r=this.coverFile;if(r){var s=r.name,o=s.lastIndexOf(".");this.coverInfo={name:s.substring(0,o),type:s.substring(o+1).toLowerCase(),size:r.size},this.sessionName+=r.name+"_"+r.size+";"}},n.prototype.applyUploadUGC=function(e){return void 0===e&&(e=0),a(this,void 0,void 0,(function(){function r(t){return a(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:if(500===t.code&&(n.host=n.host===f.HOST.MAIN?f.HOST.BACKUP:f.HOST.MAIN),s.emit(h.VodReportEvent.report_apply,{err:t,requestStartTime:p}),s.delStorage(s.sessionName),s.applyRequestRetryCount==e){if(t)throw t;throw new Error("apply upload failed")}return[4,f.default.delay(s.retryDelay)];case 1:return r.sent(),[2,s.applyUploadUGC(e+1)]}}))}))}var s,o,c,u,l,d,p,A,g,m,E,v;return i(this,(function(e){switch(e.label){case 0:return s=this,[4,this.getSignature()];case 1:if(o=e.sent(),u=this.videoInfo,l=this.coverInfo,d=this.vodSessionKey||this.enableResume&&this.getStorage(this.sessionName))c={signature:o,vodSessionKey:d};else if(u)c={signature:o,videoName:u.name,videoType:u.type,videoSize:u.size},l&&(c.coverName=l.name,c.coverType=l.type,c.coverSize=l.size);else{if(!this.fileId||!l)throw"Wrong params, please check and try again";c={signature:o,fileId:this.fileId,coverName:l.name,coverType:l.type,coverSize:l.size}}p=new Date,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t.vodAxios.post("https://"+n.host+"/v3/index.php?Action=ApplyUploadUGC",c,{timeout:this.applyRequestTimeout,withCredentials:!1})];case 3:return A=e.sent(),[3,5];case 4:return[2,r(e.sent())];case 5:return 0==(g=A.data).code?(m=g.data,E=m.vodSessionKey,this.setStorage(this.sessionName,E),this.vodSessionKey=E,this.appId=m.appId,this.emit(h.VodReportEvent.report_apply,{data:m,requestStartTime:p}),[2,m]):((v=new Error(g.message)).code=g.code,[2,r(v)])}}))}))},n.prototype.uploadToCos=function(e){return a(this,void 0,void 0,(function(){var t,n,r,s,u,d,p,A;return i(this,(function(g){switch(g.label){case 0:return t=this,n={bucket:e.storageBucket+"-"+e.storageAppId,region:e.storageRegionV5},r=new l({getAuthorization:function(n,r){return a(this,void 0,void 0,(function(){var n,s;return i(this,(function(o){switch(o.label){case 0:return n=f.default.getUnix(),s=.9*(e.tempCertificate.expiredTime-e.timestamp),0!==t.cosAuthTime?[3,1]:(t.cosAuthTime=n,[3,3]);case 1:return t.cosAuthTime&&n-t.cosAuthTime>=s?[4,t.applyUploadUGC()]:[3,3];case 2:e=o.sent(),t.cosAuthTime=f.default.getUnix(),o.label=3;case 3:return r({TmpSecretId:e.tempCertificate.secretId,TmpSecretKey:e.tempCertificate.secretKey,XCosSecurityToken:e.tempCertificate.token,StartTime:e.timestamp,ExpiredTime:e.tempCertificate.expiredTime}),[2]}}))}))}}),this.cos=r,s=[],this.videoFile&&(u=o(o({},n),{file:this.videoFile,key:e.video.storagePath,onProgress:function(e){t.emit(c.video_progress,e),t.emit(c.media_progress,e)},onUpload:function(e){t.emit(c.video_upload,e),t.emit(c.media_upload,e)},onTaskReady:function(e){t.taskId=e}}),s.push(u)),this.coverFile&&(d=o(o({},n),{file:this.coverFile,key:e.cover.storagePath,onProgress:function(e){t.emit(c.cover_progress,e)},onUpload:function(e){t.emit(c.cover_upload,e)},onTaskReady:f.default.noop}),s.push(d)),p=new Date,A=s.map((function(e){return new Promise((function(n,s){r.sliceUploadFile({Bucket:e.bucket,Region:e.region,Key:e.key,Body:e.file,onTaskReady:e.onTaskReady,onProgress:e.onProgress},(function(r,o){return e.file===t.videoFile&&t.emit(h.VodReportEvent.report_cos_upload,{err:r,requestStartTime:p}),r?(t.delStorage(t.sessionName),'{"error":"error","headers":{}}'===JSON.stringify(r)?s(new Error("cors error")):void s(r)):(e.onUpload(o),n())}))}))})),[4,Promise.all(A)];case 1:return[2,g.sent()]}}))}))},n.prototype.commitUploadUGC=function(e){return void 0===e&&(e=0),a(this,void 0,void 0,(function(){function r(t){return a(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:if(500===t.code&&(n.host=n.host===f.HOST.MAIN?f.HOST.BACKUP:f.HOST.MAIN),s.emit(h.VodReportEvent.report_commit,{err:t,requestStartTime:u}),s.commitRequestRetryCount==e){if(t)throw t;throw new Error("commit upload failed")}return[4,f.default.delay(s.retryDelay)];case 1:return r.sent(),[2,s.commitUploadUGC(e+1)]}}))}))}var s,o,c,u,l,d,p;return i(this,(function(e){switch(e.label){case 0:return s=this,[4,this.getSignature()];case 1:o=e.sent(),this.delStorage(this.sessionName),c=this.vodSessionKey,u=new Date,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t.vodAxios.post("https://"+n.host+"/v3/index.php?Action=CommitUploadUGC",{signature:o,vodSessionKey:c},{timeout:this.commitRequestTimeout,withCredentials:!1})];case 3:return l=e.sent(),[3,5];case 4:return[2,r(e.sent())];case 5:return 0==(d=l.data).code?(this.emit(h.VodReportEvent.report_commit,{data:d.data,requestStartTime:u}),[2,d.data]):((p=new Error(d.message)).code=d.code,[2,r(p)])}}))}))},n.prototype.start=function(){var e=this,t=new Date;this.donePromise=this._start().then((function(n){return e.emit(h.VodReportEvent.report_done,{err:{code:0},requestStartTime:t}),n})).catch((function(n){throw e.emit(h.VodReportEvent.report_done,{err:{code:n&&n.code||f.default.CLIENT_ERROR_CODE.UPLOAD_FAIL},requestStartTime:t}),n}))},n.prototype._start=function(){return a(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,this.applyUploadUGC()];case 1:return e=t.sent(),[4,this.uploadToCos(e)];case 2:return t.sent(),[4,this.commitUploadUGC()];case 3:return[2,t.sent()]}}))}))},n.prototype.done=function(){return this.donePromise},n.prototype.cancel=function(){this.cos.cancelTask(this.taskId)},n.host=f.HOST.MAIN,n}(d.EventEmitter);t.default=g},"yPq/":function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.HOST=void 0,function(e){e[e.UPLOAD_FAIL=1]="UPLOAD_FAIL"}(r||(r={})),function(e){e.MAIN="vod2.qcloud.com",e.BACKUP="vod2.dnsv1.com"}(t.HOST||(t.HOST={})),t.default={isFile:function(e){return"[object File]"==Object.prototype.toString.call(e)},isFunction:function(e){return"function"==typeof e},isString:function(e){return"string"==typeof e},noop:function(){},delay:function(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))},getUnix:function(){return Math.floor(Date.now()/1e3)},isTest:!1,isDev:!1,CLIENT_ERROR_CODE:r}},zDSj:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getEtag=void 0;var o=n("YZm+"),a=n("ibA+"),i=n("rPHV");function c(e){var t=new FileReader;return t.readAsArrayBuffer(e),new Promise((function(e,n){t.onload=function(t){e(t.target.result)},t.onerror=n}))}t.getEtag=function(e){return r(this,void 0,void 0,(function(){function t(e){for(var t=[],n=0,r=e;n<r.length;n++){var s=r[n];t=t.concat(s)}return new Uint8Array(t)}function n(){if(!l.length)return"Fto5o-5ea0sNMlW_75VgGJCv2AcJ";var e=t(l);return p>1?(d=150,e=u(e.buffer)):e=Array.apply([],e),function(e,t){for(var n,r=0,s=e.length,o="";r<s;)n=e.subarray(r,Math.min(r+32768,s)),o+=String.fromCharCode.apply(null,n),r+=32768;return t?btoa(o).replace(/\//g,"_").replace(/\+/g,"-"):btoa(o)}(e=t([[d],e]),!0)}var r,u,l,d,p,f,h;return s(this,(function(t){switch(t.label){case 0:return[4,c(e).catch((function(e){throw new i.Error({code:a.ErrorCode.CheckFileFail,message:"Get file etag failed",error:e})}))];case 1:for(r=t.sent(),u=o.digest,4194304,l=[],d=22,p=0,f=r.size||r.length||r.byteLength,p=Math.ceil(f/4194304),h=0;h<p;h++)l.push(u(r.slice(4194304*h,4194304*(h+1))));return[2,n()]}}))}))}}}]);